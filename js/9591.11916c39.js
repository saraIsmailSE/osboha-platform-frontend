"use strict";(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[9591],{94140:function(e,o,t){var a=t(24150);class r{async getAll(){try{const e=await a.hi.get("book-level");return e.data.data}catch(e){return e}}}o.Z=new r},45347:function(e,o,t){var a=t(24150);class r{async getAllBookTypes(){try{const e=await a.hi.get("/book-type");return e.data.data}catch(e){return e}}async create(e){try{return await a.hi.post("/book-type/create",{type:e})}catch(o){return o}}async getBookTypeById(e){try{const o=await a.hi.post("/book-type/show",{id:e});return o.data}catch(o){return o}}async updateBookTypeById(e,o){try{return await a.hi.post("/book-type/update",{id:e,type:o})}catch(t){return t}}async deleteBookTypeById(e){try{return await a.hi.post("/book-type/delete",{id:e})}catch(o){return o}}}o.Z=new r},34964:function(e,o,t){var a=t(24150),r=t(66252),l=t(79940);class s{async create(e){try{const o=await a.hi.post("/books",e,{headers:{"Content-type":"multipart/form-data"}});return o.data.data}catch(o){(0,r.S3)(o)}}async getAll(e){try{const o=await a.hi.get("books?page="+e);return o.data.data}catch(o){(0,r.S3)(o)}}async getById(e){try{const o=await a.hi.get(`/books/${e}`);return o.data}catch(o){(0,l.F)(o,"BookService.getById")}}async deleteById(e){try{return await a.hi.delete(`/books/${e}`)}catch(o){return o}}async getBooksByType(e){try{const o=await a.hi.get(`/books/type/${e}`);return o.data}catch(o){return o}}async getBooksByLevel(e,o){try{const t=await a.hi.get(`/books/level/${e}?page=${o}`);return t.data.data}catch(t){(0,r.S3)(t)}}async getBooksByName(e,o){try{const t=await a.hi.get(`/books/name?page=${o}&name=${e}`);return t.data.data}catch(t){(0,r.S3)(t)}}async getBooksByLanguage(e,o){try{const t=await a.hi.get(`/books/language/${e}?page=${o}`);return t.data.data}catch(t){(0,r.S3)(t)}}async getBooksBySection(e){try{const o=await a.hi.get(`/books/section/${e}`);return o.data}catch(o){return o}}async getRecentAddedBooks(){try{const e=await a.hi.get("/books/recent-added-books");return e.data.data}catch(e){return console.log(e),""}}async getMostReadableBooks(){try{const e=await a.hi.get("/books/most-readable-books");return e.data.data}catch(e){return console.log(e),""}}async getRandomBook(){try{const e=await a.hi.get("/books/random-book");return e.data.data}catch(e){return console.log(e),""}}async latestBooks(){try{const e=await a.hi.get("/books/latest");return e.data.data}catch(e){return console.log(e),""}}async showBasicInfo(e){try{const o=await a.hi.get(`books/${e}`);return o.data.data}catch(o){return o}}async update(e){try{const o=await a.hi.post("/books/update",e,{headers:{"Content-type":"multipart/form-data"}});return o.data.data}catch(o){(0,r.S3)(o)}}}o.Z=new s},65913:function(e,o,t){var a=t(24150);class r{async getAll(){try{const e=await a.hi.get("language");return e.data.data}catch(e){return e}}}o.Z=new r},92176:function(e,o,t){var a=t(24150);class r{async getAll(){try{const e=await a.hi.get("section");return e.data}catch(e){return e}}}o.Z=new r},60351:function(e,o,t){t.d(o,{So:function(){return a},Wx:function(){return l},b5:function(){return i},gg:function(){return s},jx:function(){return r}});const a={ambassador:"سفير",leader:"قائد",supervisor:"مراقب",advisor:"موجه",consultant:"مستشار",admin:"ادارة",book_quality_team:"جودة الكتب"},r={arabic:"اللغة العربية",english:"اللغة الانجليزية"},l={normal:"منهج",ramadan:"رمضان",young:"يافعين",kids:"أطفال",tafseer:"تفسير",free:"كتاب حر"},s={January:"يناير",February:"فبراير",March:"مارس",April:"ابريل",May:"مايو",June:"يونيو",July:"يوليو",August:"أغسطس",September:"سبتمبر",October:"أكتوبر",November:"نوفمبر",December:"ديسمبر"},i={"01":"يناير","02":"فبراير","03":"مارس","04":"ابريل","05":"مايو","06":"يونيو","07":"يوليو","08":"أغسطس","09":"سبتمبر",10:"أكتوبر",11:"نوفمبر",12:"ديسمبر"}},79940:function(e,o,t){t.d(o,{F:function(){return r}});t(70560);var a=t(1120);function r(e,o=""){throw console.log(`[ERROR] ${o} =>`,e.response.data),404===e.response.data.statusCode?a.Z.push({name:"NotFound"}):403===e.response.data.statusCode&&a.Z.push({name:"NotAuthorized"}),e}},89591:function(e,o,t){t.r(o),t.d(o,{default:function(){return Se}});t(76265);var a=t(66252),r=t(49963),l=t(3577),s=t(8584),i=t(79885);const n={class:"col-sm-12 mt-3"},d=(0,a._)("div",{class:"iq-card-header-toolbar d-flex text-center align-items-center mx-auto"},[(0,a._)("h1",{class:"text-center mt-3 mb-3"},"اضافة كتاب")],-1),c=(0,a._)("div",{class:"iq-card-body p-4"},[(0,a._)("div",{class:"image-block text-center mt-3"},[(0,a._)("img",{class:"img-fluid rounded w-75",src:s,alt:"add-group"})])],-1),u={class:"col-12 bg-white pt-2"},m={class:"sign-in-from"},k=(0,a._)("small",{style:{color:"red"}}," * الحقل مطلوب",-1),g={class:"form-group"},b=(0,a._)("label",{for:"bookName"},"* اسم الكتاب",-1),y={key:0,style:{color:"red"}},h={class:"form-group"},p={for:"bookDescription"},f={key:0},_={key:0,style:{color:"red"}},w={class:"form-group"},v={for:"bookAuther"},$={key:0},F={key:0,style:{color:"red"}},q={class:"form-group"},D={for:"bookPublisher"},B={key:0},x={key:0,style:{color:"red"}},U={class:"form-group"},A={for:"bookLink"},C={key:0},V={key:0,style:{color:"red"}},S={class:"form-group"},Z=(0,a._)("label",{for:"bookStartPage"},"* صفحة البداية",-1),T={key:0,style:{color:"red"}},I={class:"form-group"},R=(0,a._)("label",{for:"bookEndPage"},"* صفحة النهاية",-1),L={key:0,style:{color:"red"}},M={class:"form-group"},N={for:"bookType"},O={key:0},z=(0,a._)("option",{value:"0",selected:""},"اختر نوع الكتاب",-1),P=["value"],K=(0,a._)("option",{value:"0",selected:""},"كتاب حر",-1),E=[K],H={key:2,style:{color:"red"}},j={class:"form-group"},Y={for:"bookLevel"},J={key:0},W=(0,a._)("option",{value:"0",selected:""},"اختر مستوى الكتاب",-1),G=["value"],Q={key:0,style:{color:"red"}},X={class:"form-group col-12"},ee={key:0},oe=(0,a._)("option",{value:"0",selected:""},"اختر قسم الكتاب",-1),te=["value"],ae={key:0,style:{color:"red"}},re={class:"form-group col-12"},le={key:0},se=(0,a._)("option",{value:"0",selected:""},"اختر لغة الكتاب",-1),ie=["value"],ne={key:0,style:{color:"red"}},de={class:"form-group col-12"},ce=(0,a._)("h4",null,"صورة الكتاب",-1),ue={key:0,class:"text-center my-2",style:{color:"red"}},me=(0,a._)("span",{class:"align-middle material-symbols-outlined"}," keyboard_return ",-1),ke={key:2,class:"col-sm-12 text-center"},ge=(0,a._)("p",{class:"text-center"},"جاري الاضافة",-1),be=(0,a._)("img",{src:i,alt:"loader",style:{height:"100px"}},null,-1),ye=[ge,be],he={key:3,class:"d-inline-block w-100"},pe=["disabled"];function fe(e,o,t,s,i,K){const ge=(0,a.up)("router-link"),be=(0,a.up)("iq-card");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a.Wm)(be,{class:"iq-card"},{default:(0,a.w5)((()=>[d,c,(0,a._)("div",u,[(0,a._)("div",m,[(0,a._)("form",{class:"mt-2",onSubmit:o[13]||(o[13]=(0,r.iM)((e=>K.onSubmit()),["prevent"]))},[k,(0,a._)("div",g,[b,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>s.v$.bookForm.name.$model=e),class:"form-control mb-0",id:"bookName",placeholder:" اسم الكتاب"},null,512),[[r.nr,s.v$.bookForm.name.$model]]),s.v$.bookForm.name.$error?((0,a.wg)(),(0,a.iD)("small",y," اسم الكتاب مطلوب")):(0,a.kq)("",!0)]),(0,a._)("div",h,[(0,a._)("label",p,[K.shouldfFill?((0,a.wg)(),(0,a.iD)("span",f,"*")):(0,a.kq)("",!0),(0,a.Uk)(" وصف الكتاب")]),(0,a.wy)((0,a._)("textarea",{type:"text","onUpdate:modelValue":o[1]||(o[1]=e=>s.v$.bookForm.brief.$model=e),class:"form-control mb-0",id:"bookDescription",placeholder:"وصف الكتاب ",style:(0,l.j5)([{"padding-right":"1rem !important"},{direction:"rtl","max-height":"120px",resize:"none",overflow:"auto"}]),rows:1,ref:"bodyRef"},null,512),[[r.nr,s.v$.bookForm.brief.$model]]),s.v$.bookForm.brief.$error?((0,a.wg)(),(0,a.iD)("small",_,"وصف الكتاب مطلوب")):(0,a.kq)("",!0)]),(0,a._)("div",w,[(0,a._)("label",v,[K.shouldfFill?((0,a.wg)(),(0,a.iD)("span",$,"*")):(0,a.kq)("",!0),(0,a.Uk)(" الكاتب")]),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=e=>s.v$.bookForm.writer.$model=e),class:"form-control mb-0",id:"bookAuther",placeholder:"اسم الكاتب "},null,512),[[r.nr,s.v$.bookForm.writer.$model]]),s.v$.bookForm.writer.$error?((0,a.wg)(),(0,a.iD)("small",F,"اسم الكاتب مطلوب")):(0,a.kq)("",!0)]),(0,a._)("div",q,[(0,a._)("label",D,[K.shouldfFill?((0,a.wg)(),(0,a.iD)("span",B,"*")):(0,a.kq)("",!0),(0,a.Uk)(" دار النشر")]),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=e=>s.v$.bookForm.publisher.$model=e),class:"form-control mb-0",id:"bookPublisher",placeholder:"دار النشر "},null,512),[[r.nr,s.v$.bookForm.publisher.$model]]),s.v$.bookForm.publisher.$error?((0,a.wg)(),(0,a.iD)("small",x,"دار النشر مطلوبة")):(0,a.kq)("",!0)]),(0,a._)("div",U,[(0,a._)("label",A,[K.shouldfFill?((0,a.wg)(),(0,a.iD)("span",C,"*")):(0,a.kq)("",!0),(0,a.Uk)(" رابط الكتاب")]),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=e=>s.v$.bookForm.link.$model=e),class:"form-control mb-0",id:"bookLink",placeholder:"رابط الكتاب "},null,512),[[r.nr,s.v$.bookForm.link.$model]]),s.v$.bookForm.link.$error?((0,a.wg)(),(0,a.iD)("small",V,"رابط الكتاب مطلوب")):(0,a.kq)("",!0)]),(0,a._)("div",S,[Z,(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":o[5]||(o[5]=e=>s.v$.bookForm.start_page.$model=e),class:"form-control mb-0",id:"bookStartPage",placeholder:"صفحة البداية "},null,512),[[r.nr,s.v$.bookForm.start_page.$model]]),s.v$.bookForm.start_page.$error?((0,a.wg)(),(0,a.iD)("small",T,"صفحة البداية مطلوبة")):(0,a.kq)("",!0)]),(0,a._)("div",I,[R,(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":o[6]||(o[6]=e=>s.v$.bookForm.end_page.$model=e),class:"form-control mb-0",id:"bookEndPage",placeholder:"صفحة النهاية "},null,512),[[r.nr,s.v$.bookForm.end_page.$model]]),s.v$.bookForm.end_page.$error?((0,a.wg)(),(0,a.iD)("small",L,"صفحة النهاية مطلوبة")):(0,a.kq)("",!0)]),(0,a._)("div",M,[(0,a._)("label",N,[K.shouldfFill?((0,a.wg)(),(0,a.iD)("span",O,"*")):(0,a.kq)("",!0),(0,a.Uk)(" نوع الكتاب")]),K.shouldfFill?(0,a.wy)(((0,a.wg)(),(0,a.iD)("select",{key:0,"onUpdate:modelValue":o[7]||(o[7]=e=>s.v$.bookForm.type_id.$model=e),class:"form-select","data-trigger":"",name:"choices-single-default",id:"choices-single-default"},[z,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.types,((e,o)=>((0,a.wg)(),(0,a.iD)("option",{key:o,value:e.id},(0,l.zw)(i.BOOK_Types[e.type]),9,P)))),128))],512)),[[r.bM,s.v$.bookForm.type_id.$model]]):(0,a.wy)(((0,a.wg)(),(0,a.iD)("select",{key:1,"onUpdate:modelValue":o[8]||(o[8]=e=>s.v$.bookForm.type_id.$model=e),class:"form-select","data-trigger":"",name:"choices-single-default",id:"choices-single-default",disabled:""},E,512)),[[r.bM,s.v$.bookForm.type_id.$model]]),s.v$.bookForm.type_id.$error?((0,a.wg)(),(0,a.iD)("small",H,"نوع الكتاب مطلوب")):(0,a.kq)("",!0)]),(0,a._)("div",j,[(0,a._)("label",Y,[K.shouldfFill?((0,a.wg)(),(0,a.iD)("span",J,"*")):(0,a.kq)("",!0),(0,a.Uk)(" مستوى الكتاب")]),(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":o[9]||(o[9]=e=>s.v$.bookForm.level_id.$model=e),class:"form-select","data-trigger":"",name:"choices-single-default",id:"choices-single-default"},[W,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.bookLevels,((e,o)=>((0,a.wg)(),(0,a.iD)("option",{key:o,value:e.id},(0,l.zw)(e.arabic_level),9,G)))),128))],512),[[r.bM,s.v$.bookForm.level_id.$model]]),s.v$.bookForm.level_id.$error?((0,a.wg)(),(0,a.iD)("small",Q,"مستوى الكتاب مطلوب")):(0,a.kq)("",!0)]),(0,a._)("div",X,[(0,a._)("h4",null,[(0,a.Uk)(" قسم الكتاب "),K.shouldfFill?((0,a.wg)(),(0,a.iD)("span",ee,"*")):(0,a.kq)("",!0)]),(0,a.wy)((0,a._)("select",{class:"form-select mt-2","data-trigger":"",name:"section",id:"section","onUpdate:modelValue":o[10]||(o[10]=e=>s.v$.bookForm.section_id.$model=e)},[oe,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.sections,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.id,value:e.id},(0,l.zw)(e.section),9,te)))),128))],512),[[r.bM,s.v$.bookForm.section_id.$model]]),s.v$.bookForm.section_id.$error?((0,a.wg)(),(0,a.iD)("small",ae,"قسم الكتاب مطلوب")):(0,a.kq)("",!0)]),(0,a._)("div",re,[(0,a._)("h4",null,[(0,a.Uk)(" لغة الكتاب "),K.shouldfFill?((0,a.wg)(),(0,a.iD)("span",le,"*")):(0,a.kq)("",!0)]),(0,a.wy)((0,a._)("select",{class:"form-select mt-2","data-trigger":"",name:"section",id:"section","onUpdate:modelValue":o[11]||(o[11]=e=>s.v$.bookForm.language_id.$model=e)},[se,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.languages,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.id,value:e.id},(0,l.zw)(i.LANUAGES[e.language]),9,ie)))),128))],512),[[r.bM,s.v$.bookForm.language_id.$model]]),s.v$.bookForm.language_id.$error?((0,a.wg)(),(0,a.iD)("small",ne,"لغة الكتاب مطلوبة")):(0,a.kq)("",!0)]),(0,a._)("div",de,[ce,(0,a._)("input",{class:"form-control mt-2",type:"file",name:"book_media",id:"book_media",ref:"book_media",accept:"image/*",onChange:o[12]||(o[12]=(...e)=>K.uploadFile&&K.uploadFile(...e))},null,544)]),i.message?((0,a.wg)(),(0,a.iD)("p",ue,(0,l.zw)(i.message),1)):(0,a.kq)("",!0),i.book_id?((0,a.wg)(),(0,a.j4)(ge,{key:1,class:"mb-3 text-center d-block w-100",to:{name:"book.book-details",params:{book_id:i.book_id}}},{default:(0,a.w5)((()=>[(0,a.Uk)(" عرض الكتاب "),me])),_:1},8,["to"])):(0,a.kq)("",!0),i.loading?((0,a.wg)(),(0,a.iD)("div",ke,ye)):((0,a.wg)(),(0,a.iD)("div",he,[(0,a._)("button",{type:"submit",class:"btn btn-primary float-end",disabled:i.loading}," اضافة ",8,pe)]))],32)])])])),_:1})])}t(70560);var _e=t(5705),we=t(10760),ve=t(34964),$e=t(45347),Fe=t(65913),qe=t(94140),De=t(92176),Be=t(60351),xe=t(49579);const Ue=e=>e>0;var Ae={name:"Create Book",setup(){return{v$:(0,_e.ZP)()}},async created(){this.bookLevels=await qe.Z.getAll(),this.sections=await De.Z.getAll(),this.sections=this.sections.data,this.languages=await Fe.Z.getAll(),this.types=await $e.Z.getAllBookTypes()},watch:{bookBrief(){this.$refs.bodyRef.style.height="auto",this.$nextTick((()=>{this.$refs.bodyRef.style.height=this.$refs.bodyRef.scrollHeight+"px"}))}},computed:{shouldfFill(){return this.isAdmin||this.inBooksTeam},bookBrief(){return this.bookForm.brief},user(){return this.$store.getters.getUser},inBooksTeam(){return xe.Z.hasRole(this.user,"book_quality_team")},isAdmin(){return xe.Z.hasRole(this.user,"admin")}},data(){return{types:[],bookLevels:[],sections:[],languages:[],LANUAGES:Be.jx,BOOK_Types:Be.Wx,bookForm:{book_media:null,name:"",writer:"",publisher:"",brief:"",link:"",start_page:0,end_page:0,section_id:0,level_id:0,type_id:0,language_id:0,is_free:0},message:"",loading:!1,currentMedia:null,book_id:0}},validations(){return{bookForm:{name:{required:we.C1},writer:{required:(0,we.CF)((function(){return!!this.shouldfFill}))},publisher:{required:(0,we.CF)((function(){return!!this.shouldfFill}))},brief:{required:(0,we.CF)((function(){return!!this.shouldfFill}))},link:{required:(0,we.CF)((function(){return!!this.shouldfFill}))},start_page:{required:we.C1,maxValue:Ue},end_page:{required:we.C1,maxValue:Ue},type_id:{required:(0,we.CF)((function(){return!!this.shouldfFill})),maxValue:this.selectItem},level_id:{required:(0,we.CF)((function(){return!!this.shouldfFill})),maxValue:this.selectItem},language_id:{required:(0,we.CF)((function(){return!!this.shouldfFill})),maxValue:this.selectItem},section_id:{required:(0,we.CF)((function(){return!!this.shouldfFill})),maxValue:this.selectItem}}}},methods:{selectItem(e){return!this.isAdmin&&!this.inBooksTeam||e>0},uploadFile(e){this.bookForm.book_media=e.target.files[0]},async onSubmit(){if(this.v$.$touch(),!this.v$.bookForm.$invalid){this.loading=!0;try{const e=await ve.Z.create(this.bookForm);this.book_id=e.id,this.message=" تم لاضافة - سيتم تحويلك لصفحة الكتاب",setTimeout((()=>{this.$router.push({name:"book.book-details",params:{book_id:this.book_id}})}),3e3)}catch(e){this.message="حصل خطأ - لم يتم الاضافة!",console.log(e)}finally{this.loading=!1}}}}},Ce=t(83744);const Ve=(0,Ce.Z)(Ae,[["render",fe]]);var Se=Ve},8584:function(e,o,t){e.exports=t.p+"img/reading_list.1a92b0ea.png"}}]);
//# sourceMappingURL=9591.11916c39.js.map