"use strict";(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[4809],{805:function(e,r,t){var n=t(50124),a=t(48534),u=t(13087),o=t(62833),i=t(24150),s=function(){function e(){(0,u.Z)(this,e)}return(0,o.Z)(e,[{key:"getAllGroupTypes",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var r;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.get("/group-type");case 3:return r=e.sent,e.abrupt("return",r.data.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function r(){return e.apply(this,arguments)}return r}()},{key:"create",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.post("/group-type/create",{type:r});case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function r(r){return e.apply(this,arguments)}return r}()},{key:"getGroupTypeById",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.post("/group-type/show",{id:r});case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function r(r){return e.apply(this,arguments)}return r}()},{key:"updateGroupTypeById",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r,t){var a;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.post("/group-type/update",{id:r,type:t});case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function r(r,t){return e.apply(this,arguments)}return r}()},{key:"deleteGroupTypeById",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.post("/group-type/delete",{id:r});case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function r(r){return e.apply(this,arguments)}return r}()}]),e}();r.Z=new s},24809:function(e,r,t){t.r(r),t.d(r,{default:function(){return H}});t(59749),t(86544);var n=t(66252),a=t(49963),u=t(3577),o=t(59797),i=t(79885),s={class:"col-sm-12 mt-3"},c=(0,n._)("div",{class:"iq-card-header-toolbar d-flex text-center align-items-center mx-auto"},[(0,n._)("h1",{class:"text-center mt-3 mb-3"},"اضافة مجموعة")],-1),p=(0,n._)("div",{class:"iq-card-body p-4"},[(0,n._)("div",{class:"image-block text-center"},[(0,n._)("img",{class:"img-fluid rounded w-75",src:o,alt:"add-group"})])],-1),l={class:"col-12 bg-white pt-2"},d={class:"sign-in-from"},m={class:"form-group"},g=(0,n._)("label",{for:"groupName"},"اسم المجموعة",-1),v={key:0,style:{color:"red"}},f={class:"form-group"},y=(0,n._)("label",{for:"groupType"},"نوع المجموعة",-1),h=(0,n._)("option",{value:"0",selected:""},"اختر نوع المجموعة",-1),w=["value"],b={key:0,style:{color:"red"}},_={class:"form-group"},k=(0,n._)("label",{for:"groupDescription"},"وصف المجموعة",-1),x={key:0,style:{color:"red"}},Z={key:0,class:"text-center my-2",style:{color:"red"}},$=(0,n._)("span",{class:"align-middle material-symbols-outlined"}," keyboard_return ",-1),F={key:2,class:"col-sm-12 text-center"},q=(0,n._)("p",{class:"text-center"},"جاري الاضافة",-1),D=(0,n._)("img",{src:i,alt:"loader",style:{height:"100px"}},null,-1),G=[q,D],T={key:3,class:"d-inline-block w-100"},C=["disabled"];function A(e,r,t,o,i,q){var D=(0,n.up)("router-link"),A=(0,n.up)("iq-card");return(0,n.wg)(),(0,n.iD)("div",s,[(0,n.Wm)(A,{class:"iq-card"},{default:(0,n.w5)((function(){return[c,p,(0,n._)("div",l,[(0,n._)("div",d,[(0,n._)("form",{class:"mt-2",onSubmit:r[3]||(r[3]=(0,a.iM)((function(e){return q.onSubmit()}),["prevent"]))},[(0,n._)("div",m,[g,(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=function(e){return o.v$.groupForm.name.$model=e}),class:"form-control mb-0",id:"groupName",placeholder:" اسم المجموعة"},null,512),[[a.nr,o.v$.groupForm.name.$model]]),o.v$.groupForm.name.$error?((0,n.wg)(),(0,n.iD)("small",v," اسم المجموعة مطلوب")):(0,n.kq)("",!0)]),(0,n._)("div",f,[y,(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":r[1]||(r[1]=function(e){return o.v$.groupForm.type_id.$model=e}),class:"form-select","data-trigger":"",name:"choices-single-default",id:"choices-single-default"},[h,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.types,(function(e,r){return(0,n.wg)(),(0,n.iD)("option",{key:r,value:e.id},(0,u.zw)(i.group_type[e.type]),9,w)})),128))],512),[[a.bM,o.v$.groupForm.type_id.$model]]),o.v$.groupForm.type_id.$error?((0,n.wg)(),(0,n.iD)("small",b,"نوع المجموعة مطلوب")):(0,n.kq)("",!0)]),(0,n._)("div",_,[k,(0,n.wy)((0,n._)("textarea",{type:"text","onUpdate:modelValue":r[2]||(r[2]=function(e){return o.v$.groupForm.description.$model=e}),class:"form-control mb-0",id:"groupDescription",placeholder:"وصف المجموعة "},null,512),[[a.nr,o.v$.groupForm.description.$model]]),o.v$.groupForm.description.$error?((0,n.wg)(),(0,n.iD)("small",x,"وصف المجموعة مطلوب")):(0,n.kq)("",!0)]),i.message?((0,n.wg)(),(0,n.iD)("p",Z,(0,u.zw)(i.message),1)):(0,n.kq)("",!0),i.group_id?((0,n.wg)(),(0,n.j4)(D,{key:1,class:"mb-3 text-center d-block w-100",to:{name:"group.group-detail",params:{group_id:i.group_id}}},{default:(0,n.w5)((function(){return[(0,n.Uk)(" عرض المجموعة "),$]})),_:1},8,["to"])):(0,n.kq)("",!0),i.loading?((0,n.wg)(),(0,n.iD)("div",F,G)):((0,n.wg)(),(0,n.iD)("div",T,[(0,n._)("button",{type:"submit",class:"btn btn-primary float-end",disabled:i.loading}," اضافة ",8,C)]))],32)])])]})),_:1})])}var U=t(50124),V=t(48534),B=t(5705),I=t(10760),S=t(22658),z=t(805),M=function(e){return e>0},N={name:"Add Group",setup:function(){return{v$:(0,B.ZP)()}},created:function(){var e=this;return(0,V.Z)((0,U.Z)().mark((function r(){return(0,U.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,z.Z.getAllGroupTypes();case 2:e.types=r.sent;case 3:case"end":return r.stop()}}),r)})))()},data:function(){return{types:[],group_type:{followup:"فريق متابعة",supervising:"فريق رقابة",advising:"فريق توجيه",consultation:"فريق الاستشارة",Administration:"الإدارة العليا"},groupForm:{name:"",type_id:0,description:""},message:"",group_id:null,loading:!1}},methods:{onSubmit:function(){var e=this;return(0,V.Z)((0,U.Z)().mark((function r(){var t;return(0,U.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.v$.$touch(),e.v$.groupForm.$invalid){r.next=21;break}return e.loading=!0,r.prev=3,r.next=6,S.Z.createGroup(e.groupForm);case 6:t=r.sent,e.message="تمت الاضافة",e.group_id=t.id,e.v$.groupForm.$reset(),e.groupForm={name:"",type_id:0,description:""},setTimeout((function(){e.message=""}),1800),r.next=18;break;case 14:r.prev=14,r.t0=r["catch"](3),e.message="حصل خطأ - لم تتم الاضافة!",console.log(r.t0.response.data);case 18:return r.prev=18,e.loading=!1,r.finish(18);case 21:case"end":return r.stop()}}),r,null,[[3,14,18,21]])})))()}},validations:function(){return{groupForm:{name:{required:I.C1},type_id:{required:I.C1,maxValue:M},description:{required:I.C1}}}}},O=t(83744);const j=(0,O.Z)(N,[["render",A]]);var H=j},59797:function(e,r,t){e.exports=t.p+"img/request_amb.aa8e9207.png"}}]);
//# sourceMappingURL=4809-legacy.3bcc55b7.js.map