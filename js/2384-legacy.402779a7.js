"use strict";(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[2384],{34964:function(e,t,n){var r=n(50124),o=n(48534),a=n(13087),s=n(62833),i=(n(34338),n(24150)),u=n(66252),c=n(79940),l=function(){function e(){(0,a.Z)(this,e)}return(0,s.Z)(e,[{key:"create",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.post("/books",t,{headers:{"Content-type":"multipart/form-data"}});case 3:return n=e.sent,e.abrupt("return",n.data.data);case 7:e.prev=7,e.t0=e["catch"](0),(0,u.S3)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getAll",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.get("books?page="+t);case 3:return n=e.sent,e.abrupt("return",n.data.data);case 7:e.prev=7,e.t0=e["catch"](0),(0,u.S3)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getById",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.get("/books/".concat(t));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e["catch"](0),(0,c.F)(e.t0,"BookService.getById");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteById",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.delete("/books/".concat(t));case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getBooksByType",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.get("/books/type/".concat(t));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getBooksByLevel",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,n){var o;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.get("/books/level/".concat(t,"?page=").concat(n));case 3:return o=e.sent,e.abrupt("return",o.data.data);case 7:e.prev=7,e.t0=e["catch"](0),(0,u.S3)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getBooksByName",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,n){var o;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.get("/books/name?page=".concat(n,"&name=").concat(t));case 3:return o=e.sent,e.abrupt("return",o.data.data);case 7:e.prev=7,e.t0=e["catch"](0),(0,u.S3)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getBooksByLanguage",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,n){var o;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.get("/books/language/".concat(t,"?page=").concat(n));case 3:return o=e.sent,e.abrupt("return",o.data.data);case 7:e.prev=7,e.t0=e["catch"](0),(0,u.S3)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getBooksBySection",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.get("/books/section/".concat(t));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getRecentAddedBooks",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.get("/books/recent-added-books");case 3:return t=e.sent,e.abrupt("return",t.data.data);case 7:return e.prev=7,e.t0=e["catch"](0),console.log(e.t0),e.abrupt("return","");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getMostReadableBooks",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.get("/books/most-readable-books");case 3:return t=e.sent,e.abrupt("return",t.data.data);case 7:return e.prev=7,e.t0=e["catch"](0),console.log(e.t0),e.abrupt("return","");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getRandomBook",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.get("/books/random-book");case 3:return t=e.sent,e.abrupt("return",t.data.data);case 7:return e.prev=7,e.t0=e["catch"](0),console.log(e.t0),e.abrupt("return","");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"latestBooks",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.get("/books/latest");case 3:return t=e.sent,e.abrupt("return",t.data.data);case 7:return e.prev=7,e.t0=e["catch"](0),console.log(e.t0),e.abrupt("return","");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"showBasicInfo",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.get("books/".concat(t));case 3:return n=e.sent,e.abrupt("return",n.data.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"update",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.post("/books/update",t,{headers:{"Content-type":"multipart/form-data"}});case 3:return n=e.sent,e.abrupt("return",n.data.data);case 7:e.prev=7,e.t0=e["catch"](0),(0,u.S3)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();t.Z=new l},26045:function(e,t,n){var r=n(50124),o=n(48534),a=n(13087),s=n(62833),i=(n(34338),n(24150)),u=n(66252),c=function(){function e(){(0,a.Z)(this,e)}return(0,s.Z)(e,[{key:"getThesisById",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.get("/theses/".concat(t));case 3:return n=e.sent,e.abrupt("return",n.data.data);case 7:e.prev=7,e.t0=e["catch"](0),(0,u.S3)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getBookThesis",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,n){var o;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.get("/theses/book/".concat(t,"/thesis/").concat(n));case 3:return o=e.sent,e.abrupt("return",o.data);case 7:e.prev=7,e.t0=e["catch"](0),(0,u.S3)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getThesesByBookId",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,n){var o,a,s=arguments;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=s.length>2&&void 0!==s[2]?s[2]:"",e.prev=1,e.next=4,i.hi.get("/theses/book/".concat(t,"/user/").concat(o,"?page=").concat(n));case 4:return a=e.sent,e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e["catch"](1),(0,u.S3)(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getThesisByUser",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,n){var o;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.get("/theses/user/".concat(t,"?page=").concat(n));case 3:return o=e.sent,e.abrupt("return",o.data);case 7:e.prev=7,e.t0=e["catch"](0),(0,u.S3)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getThesisByWeek",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.get("/theses/week/".concat(t));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e["catch"](0),(0,u.S3)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();t.Z=new c},79940:function(e,t,n){n.d(t,{F:function(){return o}});n(70560);var r=n(1120);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";throw console.log("[ERROR] ".concat(t," =>"),e.response.data),404===e.response.data.statusCode?r.Z.push({name:"NotFound"}):403===e.response.data.statusCode&&r.Z.push({name:"NotAuthorized"}),e}},53186:function(e,t,n){n.d(t,{Z:function(){return v}});n(76801),n(43843);var r=n(66252),o={class:"preview-images"},a=["onClick"],s=(0,r._)("span",null," x ",-1),i=[s],u=["src"],c=["src"];function l(e,t,n,s,l,d){return(0,r.wg)(),(0,r.iD)("div",o,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.previewUrls,(function(e,t){return(0,r.wg)(),(0,r.iD)("div",{class:"image-container",key:e.url},[(0,r._)("div",{class:"delete-image",onClick:function(e){return d.removeMedia(t)}},i,8,a),e.type.includes("image")?((0,r.wg)(),(0,r.iD)("img",{key:0,src:e.url},null,8,u)):((0,r.wg)(),(0,r.iD)("video",{key:1,src:e.url,autoplay:""},null,8,c))])})),128))])}var d=n(89584),h=(n(60228),n(47522),n(70560),n(62506),{name:"ImagePreviewer",props:{media:{type:[Array,FileList],default:function(){return[]}}},emits:["remove-media"],data:function(){return{previewUrls:[]}},methods:{previewMedia:function(){var e=this;this.previewUrls=[];var t=(0,d.Z)(this.media);t.forEach((function(t){var n=new FileReader;n.onload=function(){e.previewUrls.push({url:n.result,type:t.type})},n.readAsDataURL(t)}))},removeMedia:function(e){this.previewUrls.splice(e,1),this.$emit("remove-media",e)},clearMedia:function(){this.previewUrls=[]}},mounted:function(){this.previewMedia()},watch:{media:function(){this.previewMedia()}}}),p=n(83744);const m=(0,p.Z)(h,[["render",l]]);var v=m},36851:function(e,t,n){n.r(t),n.d(t,{default:function(){return ge}});n(28436);var r=n(66252),o=n(3577),a={class:"row"},s={class:"col-lg-12"},i={class:"card card-block card-stretch card-height blog blog-detail"},u={class:"card-body"},c={key:0,class:"position-absolute start-0"},l={class:"image-block text-center mt-3"},d=["src"],h={class:"blog-description mt-3 text-center"},p={class:"mb-3 pb-3 border-bottom text-center"},m={class:"blog-meta d-flex align-items-center mb-3 position-right-side flex-wrap"},v={class:"date me-4 d-flex align-items-center"},f=(0,r._)("i",{class:"material-symbols-outlined pe-2 md-18 text-primary"},"calendar_month",-1),b={class:"like me-4 d-flex align-items-center"},k=(0,r._)("i",{class:"material-symbols-outlined pe-2 md-18 text-primary"}," star ",-1),g={class:"comments me-4 d-flex align-items-center"},w=(0,r._)("i",{class:"material-symbols-outlined pe-2 md-18 text-primary"}," book ",-1),y={class:"comments me-4 d-flex align-items-center"},x=(0,r._)("i",{class:"material-symbols-outlined pe-2 md-18 text-primary"}," comment ",-1),_={class:"comments me-4 d-flex align-items-center"},Z=(0,r._)("i",{class:"material-symbols-outlined pe-2 md-18 text-primary"}," mode_comment ",-1),T={class:"text-center"},B={class:"col-lg-12"},C={class:"card card-block card-stretch card-height blog"},D=["disabled"],A={class:"col-lg-12"},M={class:"card card-block card-stretch card-height blog user-comment"},S=(0,r._)("div",{class:"card-header d-flex justify-content-between"},[(0,r._)("div",{class:"header-title"},[(0,r._)("h4",{class:"card-title"},"الأطروحات")])],-1),E={class:"card-body"},U={key:0,class:"row"},L={class:"card card-block card-stretch card-height blog"},W={class:"card-body"},$=(0,r._)("h5",{class:"modal-title",id:"modalsLabel"},"تعديل الأطروحة",-1),I=(0,r._)("span",{class:"material-symbols-outlined"},"close",-1),z=[I],R={key:0,class:"col-sm-12 text-center"},q=["src"],O={class:"col-lg-12"},j={class:"card card-block card-stretch card-height blog"},P=["disabled"],Y={key:1,class:"row"},F={key:0,class:"col-sm-12 text-center"},N=["src"],H={key:1,class:"col-lg-12"},K={class:"text-center d-flex align-items-center"},G=(0,r._)("span",{class:"material-symbols-outlined"}," comments_disabled ",-1),J={key:0,class:"ms-2"},Q={key:1,class:"ms-2"},V={key:0},X={class:"modal-title",id:"modalsLabel"},ee={href:"javascript:void(0);",class:"lh-1","data-bs-dismiss":"modal",ref:"closeBtn"},te=(0,r._)("span",{class:"material-symbols-outlined"},"close",-1),ne=[te];function re(e,t,I,te,re,oe){var ae,se,ie,ue,ce,le,de,he,pe,me,ve=(0,r.up)("router-link"),fe=(0,r.up)("Comment"),be=(0,r.up)("model-header"),ke=(0,r.up)("createThesis"),ge=(0,r.up)("model-body"),we=(0,r.up)("modal");return(0,r.wg)(),(0,r.iD)("main",null,[(0,r._)("div",a,[(0,r._)("div",s,[(0,r._)("div",i,[(0,r._)("div",u,[null!==(ae=re.book)&&void 0!==ae&&ae.book?((0,r.wg)(),(0,r.iD)("div",c,[(0,r._)("span",{role:"button",onClick:t[0]||(t[0]=function(e){var t;return oe.download(null===(t=re.book)||void 0===t||null===(t=t.book)||void 0===t?void 0:t.link)}),class:"material-symbols-outlined align-middle display-5 me-1s"}," download "),oe.isAdmin||oe.inBooksTeam||re.book_owner?((0,r.wg)(),(0,r.j4)(ve,{key:0,class:"material-symbols-outlined align-middle display-5 me-2",to:{name:"book.update",params:{book_id:null===(se=re.book)||void 0===se||null===(se=se.book)||void 0===se?void 0:se.id}}},{default:(0,r.w5)((function(){return[(0,r.Uk)(" edit ")]})),_:1},8,["to"])):(0,r.kq)("",!0),!re.loading&&(oe.canBeDeleted&&oe.inBooksTeam||oe.canBeDeleted&&re.book_owner)?((0,r.wg)(),(0,r.iD)("span",{key:1,role:"button",class:"material-symbols-outlined align-middle display-5 me-3",onClick:t[1]||(t[1]=function(e){var t;return oe.deleteBook(null===(t=re.book)||void 0===t||null===(t=t.book)||void 0===t?void 0:t.id)})}," delete ")):(0,r.kq)("",!0)])):(0,r.kq)("",!0),(0,r._)("div",l,[(0,r._)("img",{src:oe.resolve_img_url(null!==(ie=null===(ue=re.book)||void 0===ue||null===(ue=ue.book)||void 0===ue||null===(ue=ue.media)||void 0===ue?void 0:ue.path)&&void 0!==ie?ie:""),class:"img-fluid rounded w-25",alt:"blog-img"},null,8,d)]),(0,r._)("div",h,[(0,r._)("h2",p,(0,o.zw)(null===(ce=re.book)||void 0===ce||null===(ce=ce.book)||void 0===ce?void 0:ce.name),1),(0,r._)("div",m,[(0,r._)("div",v,[f,(0,r.Uk)("تاريخ الاضافة "+(0,o.zw)(oe.formattedDate),1)]),(0,r._)("div",b,[k,(0,r.Uk)(" "+(0,o.zw)(null===(le=re.book)||void 0===le?void 0:le.rate)+"% تقييم ",1)]),(0,r._)("div",g,[w,(0,r.Uk)(" عدد الصفحات: "+(0,o.zw)(null===(de=re.book)||void 0===de||null===(de=de.book)||void 0===de?void 0:de.end_page),1)]),(0,r._)("div",y,[x,(0,r.Uk)((0,o.zw)(null===(he=re.book)||void 0===he?void 0:he.theses_count)+" أطروحة ",1)]),(0,r._)("div",_,[Z,(0,r.Uk)((0,o.zw)(null===(pe=re.book)||void 0===pe?void 0:pe.comments_count)+" تعليق ",1)])]),(0,r._)("div",T,[(0,r.Uk)((0,o.zw)(re.shortBriefText)+" ",1),oe.isMore?((0,r.wg)(),(0,r.iD)("a",{key:0,role:"button",class:"load-btn",onClick:t[2]||(t[2]=function(){return oe.loadMoreBriefText&&oe.loadMoreBriefText.apply(oe,arguments)})},"...قراءة المزيد")):(0,r.kq)("",!0),oe.isLess?((0,r.wg)(),(0,r.iD)("a",{key:1,role:"button",class:"load-btn",onClick:t[3]||(t[3]=function(){return oe.loadLessBriefText&&oe.loadLessBriefText.apply(oe,arguments)})},"قراءة أقل")):(0,r.kq)("",!0)])])])])]),(0,r._)("div",B,[(0,r._)("div",C,[(0,r._)("button",{type:"submit",class:"btn btn-primary d-block w-100","data-bs-toggle":"modal","data-bs-target":"#modals",disabled:!(null!==(me=re.book)&&void 0!==me&&null!==(me=me.book)&&void 0!==me&&me.allow_comments&&re.eligibleToWriteThesis)}," كتابة أطروحة ",8,D)])]),(0,r._)("div",A,[(0,r._)("div",M,[S,(0,r._)("div",E,[re.theses.length?((0,r.wg)(),(0,r.iD)("div",U,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(re.theses,(function(e){var t;return(0,r.wg)(),(0,r.iD)("div",{class:"col-lg-12",key:e.id},[(0,r._)("div",L,[(0,r._)("div",W,[(0,r.Wm)(fe,{allowComment:null===(t=re.book)||void 0===t||null===(t=t.book)||void 0===t?void 0:t.allow_comments,comment:e,totalThesisPages:e.thesis&&e.thesis.end_page-e.thesis.start_page>0?e.thesis.end_page-e.thesis.start_page+1:0,onAddComment:oe.addComment,onEditComment:oe.editComment,onReactToComment:oe.reactToComment},null,8,["allowComment","comment","totalThesisPages","onAddComment","onEditComment","onReactToComment"])])]),(0,r.Wm)(we,{id:"editThesis-".concat("screenshot"===e.type.trim()?e.comment_id:e.id),ref_for:!0,ref:"editThesisRef",dialogClass:"modal-dialog-centered modal-dialog-scrollable",tabindex:"-1","aria-labelledby":"editThesis","aria-hidden":!1},{default:(0,r.w5)((function(){return[(0,r.Wm)(be,null,{default:(0,r.w5)((function(){return[$,(0,r._)("a",{href:"javascript:void(0);",class:"lh-1","data-bs-dismiss":"modal",ref_for:!0,ref:"editCloseBtn"},z,512)]})),_:1}),(0,r.Wm)(ge,null,{default:(0,r.w5)((function(){var t;return[(0,r.Wm)(ke,{book:null===(t=re.book)||void 0===t?void 0:t.book,thesisToEdit:e},null,8,["book","thesisToEdit"])]})),_:2},1024)]})),_:2},1032,["id"])])})),128)),re.loading?((0,r.wg)(),(0,r.iD)("div",R,[(0,r._)("img",{src:n(79885),alt:"loader",style:{height:"100px"}},null,8,q)])):(0,r.kq)("",!0),(0,r._)("div",O,[(0,r._)("div",j,[oe.hasMoreTheses?((0,r.wg)(),(0,r.iD)("button",{key:0,type:"button",class:"btn btn-primary d-block w-100",onClick:t[4]||(t[4]=function(){return oe.loadMoreTheses&&oe.loadMoreTheses.apply(oe,arguments)}),disabled:re.loading}," تحميل المزيد ",8,P)):(0,r.kq)("",!0)])])])):((0,r.wg)(),(0,r.iD)("div",Y,[re.loading?((0,r.wg)(),(0,r.iD)("div",F,[(0,r._)("img",{src:n(79885),alt:"loader",style:{height:"100px"}},null,8,N)])):((0,r.wg)(),(0,r.iD)("div",H,[(0,r._)("div",K,[G,e.$route.params.thesis_id?((0,r.wg)(),(0,r.iD)("h5",J," لم يتم العثور على هذه الأطروحة ")):((0,r.wg)(),(0,r.iD)("h5",Q,[(0,r.Uk)(" لا يوجد أطروحات "),e.$route.params.user_id?((0,r.wg)(),(0,r.iD)("span",V,"لهذا السفير")):(0,r.kq)("",!0)]))])]))]))])])])]),(0,r.Wm)(we,{id:"modals",ref:"modals",dialogClass:"modal-dialog-centered modal-dialog-scrollable",tabindex:"-1","aria-labelledby":"modalsLabel","aria-hidden":!1},{default:(0,r.w5)((function(){return[(0,r.Wm)(be,null,{default:(0,r.w5)((function(){var e;return[(0,r._)("h5",X,(0,o.zw)(null===(e=re.book)||void 0===e||null===(e=e.book)||void 0===e?void 0:e.name)+" || أطروحة جديدة ",1),(0,r._)("a",ee,ne,512)]})),_:1}),(0,r.Wm)(ge,null,{default:(0,r.w5)((function(){var e,t;return[(0,r.Wm)(ke,{book:null===(e=re.book)||void 0===e?void 0:e.book,lastThesis:null===(t=re.book)||void 0===t?void 0:t.last_thesis,onCloseModel:oe.closeModel,onAddThesis:oe.addThesis},null,8,["book","lastThesis","onCloseModel","onAddThesis"])]})),_:1})]})),_:1},512)])}var oe=n(89584),ae=n(50124),se=n(48534),ie=(n(89730),n(70560),n(91719),n(62506),n(73210)),ue=(n(19250),n(41251)),ce=n(34964),le=n(19057),de=n(26045),he=n(30381),pe=n.n(he),me=n(31025),ve=n(49579),fe={name:"BookDetails",components:{Comment:ie.Z,createThesis:ue.Z},provide:function(){return{deleteComment:this.deleteComment}},created:function(){var e=this;return(0,se.Z)((0,ae.Z)().mark((function t(){return(0,ae.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:(0,r.m0)((0,se.Z)((0,ae.Z)().mark((function t(){return(0,ae.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$route.params.book_id){t.next=3;break}return t.next=3,e.init();case 3:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)})))()},data:function(){return{theses:[],book:null,fullBriefText:"",shortBriefText:"",page:1,totalTheses:0,loading:!1,eligibleToWriteThesis:!0,book_owner:!1}},methods:{init:function(){var e=this;return(0,se.Z)((0,ae.Z)().mark((function t(){return(0,ae.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getBook(e.$route.params.book_id);case 2:return t.next=4,e.getTheses(e.page);case 4:window.addEventListener("popstate",e.popstateEventAction);case 5:case"end":return t.stop()}}),t)})))()},popstateEventAction:function(){var e=document.querySelector("body");e.removeAttribute("data-bs-overflow"),e.removeAttribute("data-bs-padding-right"),e.removeAttribute("style"),e.classList.remove("modal-open");for(var t=document.getElementsByClassName("modal-backdrop"),n=0;n<t.length;n++)t[n].remove();this.removePopstateEventAction()},removePopstateEventAction:function(){window.removeEventListener("popstate",this.popstateEventAction)},getBook:function(e){var t=this;return(0,se.Z)((0,ae.Z)().mark((function n(){var r,o,a;return(0,ae.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,ce.Z.getById(e);case 2:if(a=n.sent,t.book=a.data,t.fullBriefText=null===(r=t.book.book)||void 0===r?void 0:r.brief,t.shortBriefText=null===(o=t.fullBriefText)||void 0===o?void 0:o.slice(0,200),"free"!=a.data.book.type.type){n.next=15;break}if(a.data.book_owner!=t.user.id){n.next=14;break}return t.book_owner=!0,n.next=11,le.Z.eligibleToWriteThesis(t.user.id);case 11:t.eligibleToWriteThesis=n.sent,n.next=15;break;case 14:t.eligibleToWriteThesis=!1;case 15:case"end":return n.stop()}}),n)})))()},loadMoreBriefText:function(){this.shortBriefText=this.fullBriefText},loadLessBriefText:function(){var e;this.shortBriefText=null===(e=this.fullBriefText)||void 0===e?void 0:e.slice(0,200)},resolve_img_url:function(e){return e||n(21218)},getTheses:function(e){var t=this;return(0,se.Z)((0,ae.Z)().mark((function n(){var r,o,a;return(0,ae.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.loading&&t.book){n.next=2;break}return n.abrupt("return");case 2:if(t.loading=!0,n.prev=3,!t.$route.params.thesis_id){n.next=10;break}return n.next=7,de.Z.getBookThesis(t.$route.params.book_id,t.$route.params.thesis_id);case 7:r=n.sent,n.next=13;break;case 10:return n.next=12,de.Z.getThesesByBookId(t.$route.params.book_id,e,null!==(o=t.$route.params.user_id)&&void 0!==o?o:"");case 12:r=n.sent;case 13:200===r.statusCode?((a=t.theses).push.apply(a,(0,oe.Z)(r.data.theses)),t.totalTheses=r.data.total):me.Z.toggleToast("حدث خطأ أثناء تحميل البيانات, الرجاء المحاولة مرة أخرى","error"),n.next=19;break;case 16:n.prev=16,n.t0=n["catch"](3),me.Z.toggleToast("حدث خطأ أثناء تحميل البيانات, الرجاء المحاولة مرة أخرى","error");case 19:return n.prev=19,t.loading=!1,n.finish(19);case 22:case"end":return n.stop()}}),n,null,[[3,16,19,22]])})))()},loadMoreTheses:function(){var e=this;return(0,se.Z)((0,ae.Z)().mark((function t(){return(0,ae.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.page++,t.next=3,e.getTheses(e.page);case 3:case"end":return t.stop()}}),t)})))()},closeModel:function(){var e=this;return(0,se.Z)((0,ae.Z)().mark((function t(){return(0,ae.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.closeBtn.click();case 1:case"end":return t.stop()}}),t)})))()},addThesis:function(e){this.theses.unshift(e),this.book.theses_count++,this.book.comments_count=this.book.comments_count+e.replies.length+1,this.totalTheses++,this.book.book.userBooks=e.user.userBooks||e.user.user_books,this.book.last_thesis=e.thesis,this.book.book.userBooks.length>0&&"finished"===this.book.book.userBooks[0].status&&me.Z.toggleToast("تهانينا, لقد أنهيت الكتاب","success")},findComment:function(e,t){for(var n=0;n<e.length;n++){if(e[n].id===t)return e[n];if(e[n].replies.length>0){var r=this.findComment(e[n].replies,t);if(r)return r}}},addComment:function(e,t){if(!t)return this.theses.push(e),this.book.comments_count++,void this.totalTheses++;var n=this.findComment(this.theses,t);n.replies.push(e),this.book.comments_count++},deleteComment:function(e){for(var t=0;t<this.theses.length;t++){if(this.theses[t].id===e)return this.theses.splice(t,1),this.book.comments_count--,void this.totalTheses--;if(this.theses[t].replies.length>0)for(var n=0;n<this.theses[t].replies.length;n++)if(this.theses[t].replies[n].id===e)return this.theses[t].replies.splice(n,1),void this.book.comments_count--}},editComment:function(e){var t=this.findComment(this.theses,e.id);t.body=e.body,t.media=e.media},reactToComment:function(e,t){var n=this.findComment(this.theses,e);t?(n.reactions_count++,n.reacted_by_user=!0):(n.reactions_count--,n.reacted_by_user=!1)},download:function(e){var t=this.$swal.mixin({customClass:{confirmButton:"btn btn-primary btn-lg",cancelButton:"btn btn-outline-primary btn-lg ms-2"},buttonsStyling:!1});t.fire({title:"ملاحظة هامة",text:"في مشروعنا لن لا نقوم أبدًا بتصوير الكتب المطبوعة ولا نقوم بنسب هذه الكتب للمشروع أو محاولة إخفاء أسماء دور النشر وحقوقها . إنما كل ما نقوم به هو عملية البحث عن هذه الكتب في مواقع الانترنت و إحضار روابط الحصول عليها للاستفادة منها . علمًا أننا لا نقوم بعملية بيع للكتب أو الاستفادة المادية منها مطلقًا ولكننا نؤمن أن من حق دور النشر إيجاد وسائل لمنع تصوير كتبها ووضعها على مواقع الانترنت ولكن أن يتواجد الكتاب على الانترنت مجانًا سواء عن طريق موقع لديه أذن بالنشر ، أو عن طريق كاتب الكتاب أو غيرهم ، ثم لا نقوم بقراءة هذه الكتب ونمنع أنفسنا من العلم فهذا الأمر لن يساهم في عملية ايقاف الكتب الالكترونية إنما سوف يساهم فقط بمنع أنفسنا عن علم مطروح وتقييد أنفسنا بظروف تدفعنا للجهل والتوقف عن التعلم . علمًا أن المشروع يتعهد دومًا بحذف أي كتاب من المنهج إذا لم يناسب وجوده كاتب الكتب أو دار النشر الخاصة بالكتاب ، فبإمكان كل شخص إما قراءة الكتاب مطبوعًا أو الاستفادة من النسخ التي نجمعها من مواقع الكتب المنتشرة مع إخلاء مسؤوليتنا حول إن كانت هذه المواقع لديها أذن بالنشر والتوزيع من عدمه فنترك هذا الأمر لدور النشر . هذا ونسأل الله أن يصلح نوايانا ويجعلها خالصة لوجهه الكريم وتطبيقًا لأمره لنا بالقراءة لأجل التعلم والتفكر . والله أعلم .",icon:"warning",showCancelButton:!0,confirmButtonText:"تحميل",cancelButtonText:"إلغاء",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}).then((function(t){t.isConfirmed&&window.open(e,"_blank")}))},deleteBook:function(e){var t=this,n=this.$swal.mixin({customClass:{confirmButton:"btn btn-primary btn-lg",cancelButton:"btn btn-outline-primary btn-lg ms-2"},buttonsStyling:!1});n.fire({title:"هل انت متأكد؟",text:"نعم قم بحذف الكتاب",icon:"warning",showCancelButton:!0,confirmButtonText:"حذف",cancelButtonText:"تراجع",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}).then(function(){var n=(0,se.Z)((0,ae.Z)().mark((function n(r){return(0,ae.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!r.isConfirmed){n.next=4;break}return n.next=3,ce.Z.deleteById(e).then(function(){var e=(0,se.Z)((0,ae.Z)().mark((function e(n){return(0,ae.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:me.Z.toggleToast("تم الحذف ... سيتم تحويلك إلى صفحة الكتب","success"),setTimeout((function(){t.$router.push({name:"osboha.book"})}),3e3);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){me.Z.toggleToast("حصل خطأ - لم يتم الحذف!","danger"),console.log(e)}));case 3:n.sent;case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},computed:{formattedDate:function(){var e;return pe()(null===(e=this.book)||void 0===e||null===(e=e.book)||void 0===e?void 0:e.created_at).format("YYYY-MM-DD")},isMore:function(){var e,t;return(null===(e=this.shortBriefText)||void 0===e?void 0:e.length)<(null===(t=this.fullBriefText)||void 0===t?void 0:t.length)},isLess:function(){var e,t,n;return(null===(e=this.shortBriefText)||void 0===e?void 0:e.length)>=(null===(t=this.fullBriefText)||void 0===t?void 0:t.length)&&(null===(n=this.fullBriefText)||void 0===n?void 0:n.length)>200},user:function(){return this.$store.getters.getUser},inBooksTeam:function(){return ve.Z.hasRole(this.user,"book_quality_team")},isAdmin:function(){return ve.Z.hasRole(this.user,"admin")},hasMoreTheses:function(){return this.theses.length<this.totalTheses&&this.totalTheses>0&&this.theses.length>0},canBeDeleted:function(){return this.totalTheses<=0}}},be=n(83744);const ke=(0,be.Z)(fe,[["render",re]]);var ge=ke},27413:function(e,t,n){var r=n(44201),o=r("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[o]=!1,"/./"[e](t)}catch(r){}}return!1}},42124:function(e,t,n){var r=n(91245),o=TypeError;e.exports=function(e){if(r(e))throw new o("The method doesn't accept regular expressions");return e}},76801:function(e,t,n){var r=n(79989),o=n(84328).includes,a=n(3689),s=n(87370),i=a((function(){return!Array(1).includes()}));r({target:"Array",proto:!0,forced:i},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},91719:function(e,t,n){var r=n(79989),o=n(90690),a=n(6310),s=n(5649),i=n(98494),u=n(55565),c=1!==[].unshift(0),l=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}},d=c||!l();r({target:"Array",proto:!0,arity:1,forced:d},{unshift:function(e){var t=o(this),n=a(t),r=arguments.length;if(r){u(n+r);var c=n;while(c--){var l=c+r;c in t?t[l]=t[c]:i(t,l)}for(var d=0;d<r;d++)t[d]=arguments[d]}return s(t,n+r)}})},43843:function(e,t,n){var r=n(79989),o=n(68844),a=n(42124),s=n(74684),i=n(34327),u=n(27413),c=o("".indexOf);r({target:"String",proto:!0,forced:!u("includes")},{includes:function(e){return!!~c(i(s(this)),i(a(e)),arguments.length>1?arguments[1]:void 0)}})},89584:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(49227);function o(e){if(Array.isArray(e))return(0,r.Z)(e)}n(59749),n(86544),n(60228),n(84254),n(21694),n(76265),n(77049);function a(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var s=n(12780);n(21057);function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e){return o(e)||a(e)||(0,s.Z)(e)||i()}}}]);
//# sourceMappingURL=2384-legacy.402779a7.js.map