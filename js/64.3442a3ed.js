"use strict";(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[64],{96444:function(e,t,n){var s=n(66252),a=n(24150);class i{async getAllFriends(e){try{const t=await a.hi.get(`friends/user/${e}`);return t.data.data}catch(t){(0,s.S3)(t)}}async getFriendsRequests(){try{const e=await a.hi.get("/friends/un-accepted");return e.data.data}catch(e){(0,s.S3)(e)}}async create(e){try{return await a.hi.post("/friends/create",{friend_id:e})}catch(t){(0,s.S3)(t)}}async getFriendshipById(e){try{const t=await a.hi.post("/friends/show",{friendship_id:e});return t.data}catch(t){(0,s.S3)(t)}}async accept(e){try{const t=await a.hi.get(`/friends/accept/${e}`);return t.data}catch(t){(0,s.S3)(t)}}async acceptAll(){try{const e=await a.hi.get("/friends/accept-all");return e.data}catch(e){(0,s.S3)(e)}}async deleteAllUnAccepted(){try{const e=await a.hi.get("/friends/delete-all-unaccepted");return e.data}catch(e){(0,s.S3)(e)}}async delete(e,t){const n=new FormData;n.append("user_id",e),n.append("friend_id",t);try{const e=await a.hi.post("/friends/delete",n);return e.data}catch(i){(0,s.S3)(i)}}}t.Z=new i},80064:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var s=n(66252),a=n(3577),i=n(15584);const r={class:"row"},l={class:"col-sm-12"},c=(0,s._)("h4",{class:"card-title"},"طلبات الصداقة",-1),o={key:0,class:"request-request request-inline m-0 p-0"},d=(0,s._)("i",{role:"button",class:"material-symbols-outlined align-middle"}," done ",-1),u=(0,s._)("i",{role:"button",class:"material-symbols-outlined align-middle"}," delete ",-1),m={class:"flex-grow-1 ms-2"},p={class:"d-flex align-items-center mt-2 mt-md-0"},h=["onClick"],g=["onClick"],f={key:0,class:"d-block text-center mb-0 pb-0"},b={key:1,class:"col-sm-12"},_=(0,s._)("div",{class:"iq-card-body p-0"},[(0,s._)("div",{class:"image-block text-center"},[(0,s._)("img",{src:i,class:"img-fluid rounded w-50",alt:"blog-img"})]),(0,s._)("h4",{class:"text-center mt-3 mb-3"},"لا يوجد طلبات صداقة")],-1);function y(e,t,n,i,y,w){const q=(0,s.up)("BaseAvatar"),k=(0,s.up)("router-link"),C=(0,s.up)("iq-card");return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",l,[(0,s.Wm)(C,null,{headerTitle:(0,s.w5)((()=>[c])),body:(0,s.w5)((()=>[w.requestsLoaded.length>0?((0,s.wg)(),(0,s.iD)("ul",o,[(0,s._)("span",{role:"button",class:"btn btn-primary mb-3",style:{direction:"rtl !important"},onClick:t[0]||(t[0]=e=>w.acceptAll())},[d,(0,s.Uk)(" قبول الكل ")]),(0,s._)("span",{role:"button",class:"btn btn-danger ms-2 mb-3",style:{direction:"rtl !important"},onClick:t[1]||(t[1]=e=>w.deleteAllUnAccepted())},[u,(0,s.Uk)(" رفض الكل ")]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(w.requestsLoaded,((t,n)=>((0,s.wg)(),(0,s.iD)("li",{class:"d-flex align-items-center justify-content-between flex-wrap",key:n},[(0,s.Wm)(q,{profileImg:t.user.user_profile.profile_picture,profile_id:t.user.user_profile.id,title:t.user.name,gender:t.user.gender,avatarClass:"rounded-circle avatar-40",containerClass:"flex-shrink-0"},null,8,["profileImg","profile_id","title","gender"]),(0,s._)("div",m,[(0,s.Wm)(k,{to:{name:"user.profile",params:{user_id:t.user.id}}},{default:(0,s.w5)((()=>[(0,s._)("h6",null,(0,a.zw)(t.user.name),1),(0,s._)("small",null,(0,a.zw)(e.formatDateToWritten(t.created_at)),1)])),_:2},1032,["to"]),(0,s._)("div",p,[(0,s._)("span",{role:"button",class:"btn btn-primary ms-2 mb-3",style:{direction:"rtl !important"},onClick:e=>w.acceptrequest(t.id)}," قبول ",8,h),(0,s._)("span",{role:"button",class:"btn btn-secondary ms-2 mb-3",style:{direction:"rtl !important"},onClick:e=>w.deleterequest(t.user_id,t.friend_id)}," رفض ",8,g)])])])))),128)),y.friendRequest.length>y.length?((0,s.wg)(),(0,s.iD)("li",f,[(0,s._)("a",{class:"me-3 btn",role:"button",onClick:t[2]||(t[2]=e=>w.loadMore())},"عرض المزيد")])):(0,s.kq)("",!0)])):((0,s.wg)(),(0,s.iD)("div",b,[(0,s.Wm)(C,{class:"iq-card"},{default:(0,s.w5)((()=>[_])),_:1})]))])),_:1})])])}var w=n(43144),q=n(96444),k=n(8209),C={name:"FriendRequest",async created(){this.friendRequest=await q.Z.getFriendsRequests()},data(){return{friendRequest:[],length:10}},methods:(0,w.Z)((0,w.Z)({},k.Z),{},{acceptrequest(e){q.Z.accept(e).then((async e=>{k.Z.toggleToast("تم قبول الطلب","success"),this.friendRequest=await q.Z.getFriendsRequests()})).catch((e=>{console.log(e)}))},deleterequest(e,t){q.Z.delete(e,t).then((async e=>{k.Z.toggleToast("تم الحذف","success"),this.friendRequest=await q.Z.getFriendsRequests()})).catch((e=>{console.log(e)}))},loadMore(){this.length>this.friendRequest.length||(this.length=this.length+10)},acceptAll(){const e=this.$swal.mixin({customClass:{confirmButton:"btn btn-primary btn-lg",cancelButton:"btn btn-outline-primary btn-lg ms-2"},buttonsStyling:!1});e.fire({title:"هل أنت متأكد؟",text:"لا يمكنك التراجع عن هذا الاجراء",icon:"warning",showCancelButton:!0,confirmButtonText:"نعم، قم بالقبول",cancelButtonText:"تراجع  ",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}).then((e=>{e.isConfirmed&&q.Z.acceptAll().then((async e=>{k.Z.toggleToast("تم قبول جميع الطلبات","success"),this.friendRequest=await q.Z.getFriendsRequests()})).catch((e=>{console.log(e)}))}))},deleteAllUnAccepted(){const e=this.$swal.mixin({customClass:{confirmButton:"btn btn-primary btn-lg",cancelButton:"btn btn-outline-primary btn-lg ms-2"},buttonsStyling:!1});e.fire({title:"هل أنت متأكد؟",text:"لا يمكنك التراجع عن هذا الاجراء",icon:"warning",showCancelButton:!0,confirmButtonText:"نعم، قم بالحذف",cancelButtonText:"تراجع  ",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}).then((e=>{e.isConfirmed&&q.Z.deleteAllUnAccepted().then((async e=>{k.Z.toggleToast("تم حذف جميع الطلبات","success"),this.friendRequest=await q.Z.getFriendsRequests()})).catch((e=>{console.log(e)}))}))}}),computed:{requestsLoaded(){return this.friendRequest.slice(0,this.length)}}},Z=n(83744);const x=(0,Z.Z)(C,[["render",y]]);var R=x},15584:function(e,t,n){e.exports=n.p+"img/no-friend-req.36ea3495.png"}}]);
//# sourceMappingURL=64.3442a3ed.js.map