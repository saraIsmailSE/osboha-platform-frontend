{"version":3,"file":"js/8910.e251c8f5.js","mappings":"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","sources":["webpack://Osboha180/./src/views/OsbohaMain/Post/PostView.vue","webpack://Osboha180/./src/views/OsbohaMain/Post/PostView.vue?58be"],"sourcesContent":["<template>\n  <div class=\"row\">\n    <div class=\"col-lg-8 row m-0 p-0\">\n      <!-- ##### Display Posts ##### -->\n      <div\n        class=\"d-flex align-items-center justify-content-center\"\n        v-if=\"emptyMessage\"\n      >\n        <div class=\"me-2\">\n          <font-awesome-icon :icon=\"['fas', 'circle-exclamation']\" size=\"xl\" />\n        </div>\n        <div>{{ emptyMessage }}</div>\n      </div>\n      <div class=\"col-sm-12 text-center\" v-else-if=\"loading\">\n        <img\n          :src=\"require('@/assets/images/page-img/page-load-loader.gif')\"\n          alt=\"loader\"\n          style=\"height: 100px\"\n        />\n      </div>\n      <template v-else>\n        <Post :post=\"post\" />\n        <div class=\"col-sm-12\">\n          <div\n            class=\"card card-block card-stretch card-height blog user-comment\"\n          >\n            <div class=\"card-header d-flex justify-content-between\">\n              <div class=\"header-title\">\n                <h4 class=\"card-title\">التعليقات</h4>\n              </div>\n            </div>\n            <div class=\"card-body\" ref=\"commentsSectionBody\">\n              <div class=\"row\">\n                <!-- display comments -->\n                <LazyLoadedComments\n                  v-if=\"post\"\n                  :post=\"post\"\n                  :userId=\"\n                    $route.params.user_id\n                      ? parseInt($route.params.user_id)\n                      : null\n                  \"\n                  :loadOnCreate=\"true\"\n                  ref=\"lazyLoadedCommentsRef\"\n                />\n                <CreateComment\n                  ref=\"SinglePostCreateComment\"\n                  v-if=\"post?.allow_comments\"\n                  type=\"comment\"\n                  class=\"flex-grow-1\"\n                  :post_id=\"post.id\"\n                  @addComment=\"addComment\"\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </template>\n    </div>\n  </div>\n</template>\n<script>\nimport PostService from \"@/API/services/post.service\";\nimport Post from \"@/components/post/Post.vue\";\nimport CreateComment from \"@/components/comment/CreateComment.vue\";\nimport LazyLoadedComments from \"@/components/comment/LazyLoadedComments.vue\";\nimport helper from \"@/utilities/helper\";\nexport default {\n  name: \"PostView\",\n  components: {\n    Post,\n    CreateComment,\n    LazyLoadedComments,\n  },\n  provide() {\n    return {\n      focusComment: this.focusComment,\n      incrementCommentsCount: () => {\n        this.post.comments_count++;\n      },\n      decrementCommentsCount: () => {\n        this.post.comments_count--;\n      },\n      reactToPost: this.reactToPost,\n    };\n  },\n  data() {\n    return {\n      post: null,\n      loading: false,\n      emptyMessage: \"\",\n    };\n  },\n  async created() {\n    await this.getPost();\n  },\n  methods: {\n    async getPost() {\n      if (this.loading) return;\n\n      this.loading = true;\n      try {\n        const response = await PostService.getPostById(\n          this.$route.params.post_id\n        );\n        this.post = response.data;\n      } catch (error) {\n        helper.toggleToast(\n          \"حدث خطأ أثناء تحميل المنشور, الرجاء المحاولة مرة أخرى\",\n          \"error\"\n        );\n      } finally {\n        this.loading = false;\n      }\n    },\n    focusComment() {\n      if (this.post.allow_comments) {\n        this.$refs.commentsSectionBody.scrollTop =\n          this.$refs.commentsSectionBody.scrollHeight;\n        this.$refs.SinglePostCreateComment.focusInput();\n      } else {\n        helper.toggleToast(\"لا يمكنك التعليق على هذا المنشور الآن\", \"error\");\n      }\n    },\n    addComment(comment, comment_id) {\n      this.$refs.lazyLoadedCommentsRef.addComment(comment, comment_id);\n      if (!comment_id) {\n        this.$nextTick(() => {\n          //scroll to bottom of page\n          window.scrollTo(0, document.body.scrollHeight);\n        });\n      }\n    },\n    reactToPost(post_id, status) {\n      if (status) {\n        this.post.reactions_count++;\n        this.post.reacted_by_user = true;\n      } else {\n        this.post.reactions_count--;\n        this.post.reacted_by_user = false;\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","import { render } from \"./PostView.vue?vue&type=template&id=5ddb46cb\"\nimport script from \"./PostView.vue?vue&type=script&lang=js\"\nexport * from \"./PostView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","ref","_createElementBlock","_hoisted_1","_hoisted_2","$data","emptyMessage","_hoisted_3","_hoisted_4","_createVNode","_component_font_awesome_icon","icon","size","_toDisplayString","loading","_hoisted_5","src","require","alt","style","_Fragment","key","_component_Post","post","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_createBlock","_component_LazyLoadedComments","userId","_ctx","$route","params","user_id","parseInt","loadOnCreate","_$data$post","allow_comments","_component_CreateComment","type","post_id","id","onAddComment","$options","addComment","name","components","Post","CreateComment","LazyLoadedComments","provide","focusComment","this","incrementCommentsCount","comments_count","decrementCommentsCount","reactToPost","data","created","getPost","methods","response","PostService","getPostById","error","helper","toggleToast","$refs","commentsSectionBody","scrollTop","scrollHeight","SinglePostCreateComment","focusInput","comment","comment_id","lazyLoadedCommentsRef","$nextTick","window","scrollTo","document","body","status","reactions_count","reacted_by_user","__exports__","render"],"sourceRoot":""}