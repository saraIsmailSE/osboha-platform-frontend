"use strict";(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[7707],{805:function(t,a,e){var r=e(24150);class s{async getAllGroupTypes(){try{const t=await r.hi.get("/group-type");return t.data.data}catch(t){return t}}async create(t){try{const a=await r.hi.post("/group-type/create",{type:t});return a.data}catch(a){return a}}async getGroupTypeById(t){try{const a=await r.hi.post("/group-type/show",{id:t});return a.data}catch(a){return a}}async updateGroupTypeById(t,a){try{const e=await r.hi.post("/group-type/update",{id:t,type:a});return e.data}catch(e){return e}}async deleteGroupTypeById(t){try{const a=await r.hi.post("/group-type/delete",{id:t});return a.data}catch(a){return a}}}a.Z=new s},22658:function(t,a,e){var r=e(66252),s=e(24150),o=e(79940);class n{async createGroup(t){try{const a=await s.hi.post("/group/create",t,{headers:{"Content-type":"multipart/form-data"}});return a.data.data}catch(a){(0,r.S3)(a)}}async getAll(t,a){try{const e=await s.hi.get(`/group?page=${a}&name=${t}`);return await e.data}catch(e){return e}}async searchGroupByName(t){try{const a=await s.hi.get(`group/search-group-by-name/${t}`);return await a.data}catch(a){return a}}async getById(t){try{const a=await s.hi.get(`group/show/${t}`);return a.data.data}catch(a){return a}}async showBasicInfo(t){try{const a=await s.hi.get(`group/show-basic-info/${t}`);return a.data.data}catch(a){return a}}async getBooks(t){try{const a=await s.hi.get(`group/books/${t}`);return a.data.data}catch(a){(0,r.S3)(a)}}async getAllGroupExceptions(t){try{const a=await s.hi.get(`group/group-exceptions/${t}`);return a.data.data}catch(a){return a}}async exceptionsFilter(t,a){try{const e=await s.hi.get(`group/exceptions-filter/${t}/${a}`);return e.data.data}catch(e){return e}}async BasicMarksView(t,a){try{const e=await s.hi.get(`group/basic-mark-view/${t}/${a}`);return e.data.data}catch(e){return e}}async AllAchievements(t,a){try{const e=await s.hi.get(`group/all-achievements/${t}/${a}`);return e.data.data}catch(e){return e}}async AchievementAsPages(t,a){try{const e=await s.hi.get(`group/achievement-as-pages/${t}/${a}`);return e.data.data}catch(e){return e}}async searchForAmbassadorAchievement(t,a,e){try{const r=await s.hi.get(`group/search-for-ambassador-achievement/${t}/${a}/${e}`);return r.data.data}catch(r){return r}}async searchForAmbassador(t,a){try{const e=await s.hi.get(`group/search-for-ambassador/${t}/${a}`);return e.data.data}catch(e){return e}}async createLeaderRequest(t){try{const a=await s.hi.post("/group/create-leader-request",t,{headers:{"Content-type":"multipart/form-data"}});return a.data.data}catch(a){return a}}async lastLeaderRequest(t){try{const a=await s.hi.get(`group/last-leader-request/${t}`);return a.data.data}catch(a){return a}}async deleteById(t){try{return await s.hi.delete(`/group/delete/${t}`)}catch(a){return a}}async update(t){try{const a=await s.hi.post("/group/update",t,{headers:{"Content-type":"multipart/form-data"}});return a.data.data}catch(a){(0,r.S3)(a)}}async getGroupByType(t){try{const a=await s.hi.get(`/group/group-by-type/${t}`);return a.data.data}catch(a){return a}}async userGroups(t,a){try{const e=await s.hi.get(`/group/user-groups?page=${a}&name=${t}`);return e.data}catch(e){return e}}async statistics(t){try{const a=await s.hi.get(`group/statistics/${t}`);return a.data.data}catch(a){(0,o.F)(a,"statistics")}}async thesesAndScreensByWeek(t,a){try{const e=await s.hi.get(`group/theses-and-screens-by-week/${t}/${a}`);return e.data.data}catch(e){(0,r.S3)(e)}}async monthAchievement(t,a){try{const e=await s.hi.get(`group/month-achievement/${t}/${a}`);return e.data.data}catch(e){(0,r.S3)(e)}}async assignAdministrator(t){try{const a=await s.hi.post("/group/assign-administrator",t,{headers:{"Content-type":"multipart/form-data"}});return a.data.data}catch(a){(0,r.S3)(a)}}}a.Z=new n},79940:function(t,a,e){e.d(a,{F:function(){return s}});e(70560);var r=e(1120);function s(t,a=""){throw console.log(`[ERROR] ${a} =>`,t.response.data),404===t.response.data.statusCode?r.Z.push({name:"NotFound"}):403===t.response.data.statusCode&&r.Z.push({name:"NotAuthorized"}),t}},57707:function(t,a,e){e.r(a),e.d(a,{default:function(){return M}});e(86544);var r=e(66252),s=e(49963),o=e(3577),n=e(59797),i=e(79885);const c={class:"col-sm-12 mt-3"},u=(0,r._)("div",{class:"iq-card-header-toolbar d-flex text-center align-items-center mx-auto"},[(0,r._)("h1",{class:"text-center mt-3 mb-3"},"تعديل مجموعة")],-1),d=(0,r._)("div",{class:"iq-card-body p-4"},[(0,r._)("div",{class:"image-block text-center"},[(0,r._)("img",{class:"img-fluid rounded w-75",src:n,alt:"add-group"})])],-1),p={class:"col-12 bg-white pt-2"},l={class:"sign-in-from"},g={class:"form-group"},y=(0,r._)("label",{for:"groupName"},"اسم المجموعة",-1),h={key:0,style:{color:"red"}},m={class:"form-group"},w=(0,r._)("label",{for:"groupType"},"نوع المجموعة",-1),$=(0,r._)("option",{value:"0",selected:""},"اختر نوع المجموعة",-1),v=["value"],f={key:0,style:{color:"red"}},b={class:"form-group"},_=(0,r._)("label",{for:"groupDescription"},"وصف المجموعة",-1),k={key:0,style:{color:"red"}},F={key:0,class:"text-center my-2",style:{color:"red"}},x=(0,r._)("span",{class:"align-middle material-symbols-outlined"}," keyboard_return ",-1),q={key:1,class:"col-sm-12 text-center"},A=(0,r._)("p",{class:"text-center"},"جاري التعديل",-1),G=(0,r._)("img",{src:i,alt:"loader",style:{height:"100px"}},null,-1),B=[A,G],C={key:2,class:"d-inline-block w-100"},D=["disabled"];function S(t,a,e,n,i,A){const G=(0,r.up)("router-link"),S=(0,r.up)("iq-card");return(0,r.wg)(),(0,r.iD)("div",c,[(0,r.Wm)(S,{class:"iq-card"},{default:(0,r.w5)((()=>[u,d,(0,r._)("div",p,[(0,r._)("div",l,[(0,r._)("form",{class:"mt-2",onSubmit:a[3]||(a[3]=(0,s.iM)((t=>A.onSubmit()),["prevent"]))},[(0,r._)("div",g,[y,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=t=>n.v$.groupForm.name.$model=t),class:"form-control mb-0",id:"groupName",placeholder:" اسم المجموعة"},null,512),[[s.nr,n.v$.groupForm.name.$model]]),n.v$.groupForm.name.$error?((0,r.wg)(),(0,r.iD)("small",h," اسم المجموعة مطلوب")):(0,r.kq)("",!0)]),(0,r._)("div",m,[w,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":a[1]||(a[1]=t=>n.v$.groupForm.type_id.$model=t),class:"form-select","data-trigger":"",name:"choices-single-default",id:"choices-single-default"},[$,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.types,((t,a)=>((0,r.wg)(),(0,r.iD)("option",{key:a,value:t.id},(0,o.zw)(i.group_type[t.type]),9,v)))),128))],512),[[s.bM,n.v$.groupForm.type_id.$model]]),n.v$.groupForm.type_id.$error?((0,r.wg)(),(0,r.iD)("small",f,"نوع المجموعة مطلوب")):(0,r.kq)("",!0)]),(0,r._)("div",b,[_,(0,r.wy)((0,r._)("textarea",{type:"text","onUpdate:modelValue":a[2]||(a[2]=t=>n.v$.groupForm.description.$model=t),class:"form-control mb-0",id:"groupDescription",placeholder:"وصف المجموعة "},null,512),[[s.nr,n.v$.groupForm.description.$model]]),n.v$.groupForm.description.$error?((0,r.wg)(),(0,r.iD)("small",k,"وصف المجموعة مطلوب")):(0,r.kq)("",!0)]),i.message?((0,r.wg)(),(0,r.iD)("p",F,(0,o.zw)(i.message),1)):(0,r.kq)("",!0),(0,r.Wm)(G,{class:"mb-3 text-center d-block w-100",to:{name:"group.group-detail",params:{group_id:this.$route.params.group_id}}},{default:(0,r.w5)((()=>[(0,r.Uk)(" عرض المجموعة "),x])),_:1},8,["to"]),i.loading?((0,r.wg)(),(0,r.iD)("div",q,B)):((0,r.wg)(),(0,r.iD)("div",C,[(0,r._)("button",{type:"submit",class:"btn btn-primary float-end",disabled:i.loading}," تعديل ",8,D)]))],32)])])])),_:1})])}var Z=e(5705),T=e(10760),I=e(22658),N=e(805);const R=t=>t>0;var U={name:"Update Group",setup(){return{v$:(0,Z.ZP)()}},async created(){this.setGroup(),this.types=await N.Z.getAllGroupTypes()},data(){return{types:[],group_type:{followup:"فريق متابعة",supervising:"فريق رقابة",advising:"فريق توجيه",consultation:"فريق الاستشارة",Administration:"الإدارة العليا"},groupForm:{group_id:this.$route.params.group_id,name:"",type_id:0,description:""},message:"",loading:!1}},validations(){return{groupForm:{name:{required:T.C1},type_id:{required:T.C1,maxValue:R},description:{required:T.C1}}}},methods:{async setGroup(){const t=await I.Z.showBasicInfo(this.$route.params.group_id);t&&(this.groupForm.name=t.name,this.groupForm.type_id=t.type_id,this.groupForm.description=t.description)},async onSubmit(){if(this.v$.$touch(),!this.v$.groupForm.$invalid){this.loading=!0;try{await I.Z.update(this.groupForm),this.setGroup(),this.message="تم التعديل",setTimeout((()=>{this.message=""}),1800)}catch(t){this.message="حصل خطأ - لم يتم التعديل!",console.log(t)}finally{this.loading=!1}}}}},V=e(83744);const z=(0,V.Z)(U,[["render",S]]);var M=z},59797:function(t,a,e){t.exports=e.p+"img/request_amb.aa8e9207.png"}}]);
//# sourceMappingURL=7707.b89fc2e2.js.map