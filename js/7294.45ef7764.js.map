{"version":3,"file":"js/7294.45ef7764.js","mappings":"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","sources":["webpack://Osboha180/./src/API/services/marks.service.js","webpack://Osboha180/./src/views/OsbohaMain/Support/SupportView.vue","webpack://Osboha180/./src/views/OsbohaMain/Support/SupportView.vue?2b86"],"sourcesContent":["import { handleError } from \"vue\";\nimport { api } from \"../Intercepter\";\n\nclass Marks {\n  /**\n   * get user month Achievement.\n   *  @param  user_id , filter\n   * @return month Achievement\n   */\n  async userMonthAchievement(user_id, filter) {\n    try {\n      const response = await api.get(\n        `marks/user-month-achievement/${user_id}/${filter}`,\n      );\n      return response.data.data;\n    } catch (error) {\n      handleError(error);\n    }\n  }\n  /**\n   * get user week Achievement.\n   *  @param  user_id , filter\n   * @return week Achievement\n   */\n  async userWeekAchievement(user_id, filter) {\n    try {\n      const response = await api.get(\n        `marks/user-week-achievement/${user_id}/${filter}`,\n      );\n      return response.data.data;\n    } catch (error) {\n      handleError(error);\n    }\n  }\n  /**\n   * get user mark with theses => list only for group administrators\n   *  @param  user_id\n   * @return week Achievement\n   */\n  async ambassadorMark(user_id, week_id) {\n    try {\n      const response = await api.get(\n        `marks/ambassador-mark/${user_id}/${week_id}`,\n      );\n      return response.data.data;\n    } catch (error) {\n      handleError(error);\n    }\n  }\n\n  /**\n   * Accept support done by user (ambassador) and update mark\n   * @param  user_id\n   * @return {object} response\n   * @throws {object} error\n   */\n  async acceptSupport(user_id, week_id) {\n    try {\n      const response = await api.put(\n        `marks/accept-support/user/${user_id}/${week_id}`,\n      );\n      return response.data;\n    } catch (error) {\n      handleError(error);\n    }\n  }\n\n  /**\n   * Reject support done by user (ambassador) and update mark\n   * @param  user_id\n   * @return {object} response\n   * @throws {object} error\n   */\n  async rejectSupport(user_id, week_id) {\n    try {\n      const response = await api.put(\n        `marks/reject-support/user/${user_id}/${week_id}`,\n      );\n      return response.data;\n    } catch (error) {\n      handleError(error);\n    }\n  }\n\n  /**\n   * Set support mark for all active users\n   * @param  form contain reason\n   * @throws {object} error\n   */\n\n  async setSupportMarkForAll(reason) {\n    try {\n      const response = await api.post(`/marks/set-support-for-all`, reason, {\n        headers: { \"Content-type\": \"multipart/form-data\" },\n      });\n      return response.data.data;\n    } catch (error) {\n      handleError(error);\n    }\n  }\n\n  async topUsersByMonth() {\n    try {\n      const response = await api.get(`marks/top-users-by-month`);\n      return response.data.data;\n    } catch (error) {\n      handleError(error);\n    }\n  }\n  async topUsersByWeek() {\n    try {\n      const response = await api.get(`marks/top-users-by-week`);\n      return response.data.data;\n    } catch (error) {\n      handleError(error);\n    }\n  }\n}\n\nexport default new Marks();\n","<template>\n  <div class=\"row\">\n    <div class=\"col-lg-8 row m-0 p-0\">\n\n      <!-- ##### <AddPost> ##### -->\n      <div class=\"col-sm-12\" v-if=\"isAuthorized && !lastSupportPost\">\n        <AddPost @add-post=\"addPost\" type=\"support\" :timeline_id=\"1\" />\n      </div>\n      <div class=\"col-sm-12\" v-if=\"isAuthorized\">\n        <button class=\"btn btn-primary mb-3\" v-if=\"!showReason\" @click=\"showReason = true\">اعتماد العلامة للكل</button>\n        <button class=\"btn btn-danger mb-3\" v-if=\"showReason\" @click=\"showReason = false\">تراجع</button>\n        <form @submit.prevent=\"setSupportMarkForAll\" class=\"post-text ml-3 w-100 row\" v-if=\"showReason\">\n\n          <div class=\"form-group\">\n            <textarea rows=\"3\" placeholder=\"سبب الاعتماد\" class=\"rounded form-control mt-2 col-12\" id=\"reason\"\n              v-model=\"v$.setMarkForm.reason.$model\" name=\"bio\">\n                </textarea>\n            <small style=\"color: red\" v-if=\"v$.setMarkForm.reason.$error\">\n              قم بادخال سبب عدد حروفه بين 10 و 500\n            </small>\n          </div>\n          <div class=\"form-group\">\n            <button type=\"submit\" :disabled=\"message\" class=\"btn d-block btn-primary mt-1 mb-3 w-75 mx-auto\">\n              اعتماد\n            </button>\n          </div>\n\n          <div class=\"col-sm-12 text-center\" v-if=\"loader\">\n            <img src=\"@/assets/images/page-img/page-load-loader.gif\" alt=\"loader\" style=\"height: 100px\" />\n          </div>\n          <h4 class=\"text-center mt-3 mb-3\" v-if=\"message\">{{ message }}</h4>\n\n\n        </form>\n\n      </div>\n      <!-- ##### Display Posts ##### -->\n      <LazyLoadedPosts ref=\"lazyLoadedPostsRef\" type=\"support\" :displayEmpty=\"true\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport AddPost from \"@/components/post/add/AddPost.vue\";\nimport LazyLoadedPosts from \"@/components/post/LazyLoadedPosts.vue\";\nimport UserInfoService from \"@/Services/userInfoService\";\nimport PostService from \"@/API/services/post.service\";\nimport MarkService from \"@/API/services/marks.service\";\nimport useVuelidate from \"@vuelidate/core\";\nimport { required, minLength, maxLength } from \"@vuelidate/validators\";\n\n\nexport default {\n  name: \"Support\",\n  setup() {\n    return { v$: useVuelidate() };\n  },\n  components: {\n    AddPost,\n    LazyLoadedPosts,\n  },\n  data() {\n    return {\n      lastSupportPost: {},\n      showReason: false,\n      setMarkForm: {\n        reason: '',\n      },\n      loader: false,\n      message: null,\n    };\n  },\n  validations() {\n    return {\n      setMarkForm: {\n        reason: {\n          required,\n          maxLength: maxLength(500),\n          minLength: minLength(10),\n        },\n      },\n    };\n  },\n  computed: {\n    isAuthorized() {\n      const user = this.$store.getters.getUser;\n      return UserInfoService.hasRoles(user, [\"admin\", \"consultant\"]);\n    },\n  },\n  created() {\n    PostService.getLastSupportPost()\n      .then((response) => {\n        this.lastSupportPost = response.data;\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  },\n  methods: {\n    addPost(post) {\n      this.$refs.lazyLoadedPostsRef.addNewPost(post);\n    },\n    async setSupportMarkForAll() {\n      this.v$.$touch();\n      if (!this.v$.setMarkForm.$invalid) {\n        this.message = \"\";\n        this.loader = true;\n        try {\n          const response = await MarkService.setSupportMarkForAll(this.setMarkForm);\n          this.loader = false;\n          this.message = response;\n          this.v$.setMarkForm.$reset();\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","import { render } from \"./SupportView.vue?vue&type=template&id=b03c7a24\"\nimport script from \"./SupportView.vue?vue&type=script&lang=js\"\nexport * from \"./SupportView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["Marks","userMonthAchievement","user_id","filter","response","api","get","data","error","handleError","userWeekAchievement","ambassadorMark","week_id","acceptSupport","put","rejectSupport","setSupportMarkForAll","reason","post","headers","topUsersByMonth","topUsersByWeek","class","style","_createElementVNode","src","_imports_0","alt","_hoisted_10","_createElementBlock","_hoisted_1","_hoisted_2","$options","isAuthorized","$data","lastSupportPost","_hoisted_3","_createVNode","_component_AddPost","onAddPost","addPost","type","timeline_id","_hoisted_4","showReason","onClick","_cache","$event","onSubmit","_withModifiers","args","_hoisted_5","rows","placeholder","id","$setup","v$","setMarkForm","$model","name","$error","_hoisted_6","_hoisted_7","disabled","message","_hoisted_8","loader","_hoisted_9","_hoisted_11","_hoisted_12","_toDisplayString","_component_LazyLoadedPosts","ref","displayEmpty","setup","useVuelidate","components","AddPost","LazyLoadedPosts","validations","required","maxLength","minLength","computed","user","this","$store","getters","getUser","UserInfoService","hasRoles","created","PostService","getLastSupportPost","then","catch","console","log","methods","$refs","lazyLoadedPostsRef","addNewPost","$touch","$invalid","MarkService","$reset","__exports__","render"],"sourceRoot":""}