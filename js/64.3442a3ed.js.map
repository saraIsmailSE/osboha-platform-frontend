{"version":3,"file":"js/64.3442a3ed.js","mappings":"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","sources":["webpack://Osboha180/./src/API/services/friend.service.js","webpack://Osboha180/./src/views/User/Friends/Requests.vue","webpack://Osboha180/./src/views/User/Friends/Requests.vue?ca95"],"sourcesContent":["import { handleError } from \"vue\";\nimport { api } from \"../Intercepter\";\n\nclass FriendService {\n  /**\n   * list all friends for specific user.\n   * @param user id\n   */\n\n  async getAllFriends(user_id) {\n    try {\n      const friends = await api.get(`friends/user/${user_id}`);\n      return friends.data.data;\n    } catch (error) {\n      handleError(error);\n    }\n  }\n\n  /**\n   * get all friend requests for auth user.\n   */\n\n  async getFriendsRequests() {\n    try {\n      const requests = await api.get(`/friends/un-accepted`);\n      return requests.data.data;\n    } catch (error) {\n      handleError(error);\n    }\n  }\n\n  /**\n   * create Friendship between auth and another user.\n   *  @param friend id\n   */\n\n  async create(friend_id) {\n    try {\n      return await api.post(\"/friends/create\", { friend_id });\n    } catch (error) {\n      handleError(error);\n    }\n  }\n\n  async getFriendshipById(friendship_id) {\n    try {\n      const friendship = await api.post(\"/friends/show\", { friendship_id });\n      return friendship.data;\n    } catch (error) {\n      handleError(error);\n    }\n  }\n\n  /**\n   * accept Friendship.\n   *  @param  Friendship id\n   */\n\n  async accept(friendship_id) {\n    try {\n      const friendship = await api.get(`/friends/accept/${friendship_id}`);\n      return friendship.data;\n    } catch (error) {\n      handleError(error);\n    }\n  }\n  /**\n   * accept All.\n   */\n  async acceptAll() {\n    try {\n      const friends = await api.get(`/friends/accept-all`);\n      return friends.data;\n    } catch (error) {\n      handleError(error);\n    }\n  }\n\n  /**\ns   */\n  async deleteAllUnAccepted() {\n    try {\n      const friends = await api.get(`/friends/delete-all-unaccepted`);\n      return friends.data;\n    } catch (error) {\n      handleError(error);\n    }\n  }\n  /**\n   * delete Friendship between 2 users.\n   *  @param  user id, friend id\n   */\n\n  async delete(user_id, friend_id) {\n    const pivot = new FormData();\n    pivot.append(\"user_id\", user_id);\n    pivot.append(\"friend_id\", friend_id);\n    try {\n      const response = await api.post(`/friends/delete`, pivot);\n      return response.data;\n    } catch (error) {\n      handleError(error);\n    }\n  }\n}\n\nexport default new FriendService();\n","<template>\r\n  <div class=\"row\">\r\n    <div class=\"col-sm-12\">\r\n      <iq-card>\r\n        <template v-slot:headerTitle>\r\n          <h4 class=\"card-title\">طلبات الصداقة</h4>\r\n        </template>\r\n        <template v-slot:body>\r\n          <ul class=\"request-request request-inline m-0 p-0\" v-if=\"requestsLoaded.length > 0\">\r\n            <span role=\"button\" class=\"btn btn-primary mb-3\" style=\"direction: rtl !important\" @click=\"acceptAll()\">\r\n              <i role=\"button\" class=\"material-symbols-outlined align-middle\">\r\n                done\r\n              </i>\r\n              قبول الكل\r\n            </span>\r\n            <span role=\"button\" class=\"btn btn-danger ms-2 mb-3\" style=\"direction: rtl !important\"\r\n              @click=\"deleteAllUnAccepted()\">\r\n              <i role=\"button\" class=\"material-symbols-outlined align-middle\">\r\n                delete\r\n              </i>\r\n              رفض الكل\r\n            </span>\r\n\r\n            <li class=\"d-flex align-items-center justify-content-between flex-wrap\"\r\n              v-for=\"(request, index1) in requestsLoaded\" :key=\"index1\">\r\n              <BaseAvatar :profileImg=\"request.user.user_profile.profile_picture\"\r\n                :profile_id=\"request.user.user_profile.id\" :title=\"request.user.name\" :gender=\"request.user.gender\"\r\n                avatarClass=\"rounded-circle avatar-40\" containerClass=\"flex-shrink-0\" />\r\n              <div class=\"flex-grow-1 ms-2\">\r\n                <router-link :to=\"{\r\n                  name: 'user.profile',\r\n                  params: { user_id: request.user.id },\r\n                }\">\r\n                  <h6>{{ request.user.name }}</h6>\r\n                  <small>{{ formatDateToWritten(request.created_at) }}</small>\r\n                </router-link>\r\n                <div class=\"d-flex align-items-center mt-2 mt-md-0\">\r\n                  <span role=\"button\" class=\"btn btn-primary ms-2 mb-3\" style=\"direction: rtl !important\"\r\n                    @click=\"acceptrequest(request.id)\">\r\n                    قبول\r\n                  </span>\r\n                  <span role=\"button\" class=\"btn btn-secondary ms-2 mb-3\" style=\"direction: rtl !important\"\r\n                    @click=\"deleterequest(request.user_id, request.friend_id)\">\r\n                    رفض\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </li>\r\n            <li class=\"d-block text-center mb-0 pb-0\" v-if=\"friendRequest.length > length\">\r\n              <a class=\"me-3 btn\" role=\"button\" @click=\"loadMore()\">عرض المزيد</a>\r\n            </li>\r\n          </ul>\r\n          <div class=\"col-sm-12\" v-else>\r\n            <iq-card class=\"iq-card\">\r\n              <div class=\"iq-card-body p-0\">\r\n                <div class=\"image-block text-center\">\r\n                  <img src=\"@/assets/images/main/no-friend-req.png\" class=\"img-fluid rounded w-50\" alt=\"blog-img\" />\r\n                </div>\r\n                <h4 class=\"text-center mt-3 mb-3\">لا يوجد طلبات صداقة</h4>\r\n              </div>\r\n            </iq-card>\r\n          </div>\r\n        </template>\r\n      </iq-card>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport FriendServices from \"@/API/services/friend.service\";\r\nimport helper from \"@/utilities/helper\";\r\n\r\nexport default {\r\n  name: \"FriendRequest\",\r\n  async created() {\r\n    this.friendRequest = await FriendServices.getFriendsRequests();\r\n  },\r\n  data() {\r\n    return {\r\n      friendRequest: [],\r\n      length: 10,\r\n    };\r\n  },\r\n  methods: {\r\n    ...helper,\r\n    /**\r\n     * acceot friend request.\r\n     *  @param  request id\r\n     */\r\n    acceptrequest(id) {\r\n      FriendServices.accept(id)\r\n        .then(async (response) => {\r\n          helper.toggleToast(\r\n            \"تم قبول الطلب\",\r\n            \"success\"\r\n          );\r\n          this.friendRequest = await FriendServices.getFriendsRequests();\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n    },\r\n    /**\r\n     * delete friend request.\r\n     *  @param  user id, friend id\r\n     */\r\n    deleterequest(user_id, friend_id) {\r\n      FriendServices.delete(user_id, friend_id)\r\n        .then(async (response) => {\r\n          helper.toggleToast(\r\n            \"تم الحذف\",\r\n            \"success\"\r\n          );\r\n          this.friendRequest = await FriendServices.getFriendsRequests();\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n    },\r\n\r\n    /**\r\n     * load more request.\r\n     */\r\n    loadMore() {\r\n      if (this.length > this.friendRequest.length) return;\r\n      this.length = this.length + 10;\r\n    },\r\n    /**\r\n     * accept All unaccepted request for auth user.\r\n     */\r\n    acceptAll() {\r\n      const swalWithBootstrapButtons = this.$swal.mixin({\r\n        customClass: {\r\n          confirmButton: \"btn btn-primary btn-lg\",\r\n          cancelButton: \"btn btn-outline-primary btn-lg ms-2\",\r\n        },\r\n        buttonsStyling: false,\r\n      });\r\n\r\n      swalWithBootstrapButtons\r\n        .fire({\r\n          title: \"هل أنت متأكد؟\",\r\n          text: \"لا يمكنك التراجع عن هذا الاجراء\",\r\n          icon: \"warning\",\r\n          showCancelButton: true,\r\n          confirmButtonText: \"نعم، قم بالقبول\",\r\n          cancelButtonText: \"تراجع  \",\r\n          showClass: {\r\n            popup: \"animate__animated animate__zoomIn\",\r\n          },\r\n          hideClass: {\r\n            popup: \"animate__animated animate__zoomOut\",\r\n          },\r\n        })\r\n        .then((willDelete) => {\r\n          if (willDelete.isConfirmed) {\r\n            FriendServices.acceptAll()\r\n              .then(async (response) => {\r\n                helper.toggleToast(\r\n                  \"تم قبول جميع الطلبات\",\r\n                  \"success\"\r\n                );\r\n                this.friendRequest = await FriendServices.getFriendsRequests();\r\n              })\r\n              .catch((error) => {\r\n                console.log(error);\r\n              });\r\n          }\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Delete All unaccepted request for auth user.\r\n     */\r\n    deleteAllUnAccepted() {\r\n      const swalWithBootstrapButtons = this.$swal.mixin({\r\n        customClass: {\r\n          confirmButton: \"btn btn-primary btn-lg\",\r\n          cancelButton: \"btn btn-outline-primary btn-lg ms-2\",\r\n        },\r\n        buttonsStyling: false,\r\n      });\r\n\r\n      swalWithBootstrapButtons\r\n        .fire({\r\n          title: \"هل أنت متأكد؟\",\r\n          text: \"لا يمكنك التراجع عن هذا الاجراء\",\r\n          icon: \"warning\",\r\n          showCancelButton: true,\r\n          confirmButtonText: \"نعم، قم بالحذف\",\r\n          cancelButtonText: \"تراجع  \",\r\n          showClass: {\r\n            popup: \"animate__animated animate__zoomIn\",\r\n          },\r\n          hideClass: {\r\n            popup: \"animate__animated animate__zoomOut\",\r\n          },\r\n        })\r\n        .then((willDelete) => {\r\n          if (willDelete.isConfirmed) {\r\n            FriendServices.deleteAllUnAccepted()\r\n              .then(async (response) => {\r\n                helper.toggleToast(\r\n                  \"تم حذف جميع الطلبات\",\r\n                  \"success\"\r\n                );\r\n                this.friendRequest = await FriendServices.getFriendsRequests();\r\n              })\r\n              .catch((error) => {\r\n                console.log(error);\r\n              });\r\n          }\r\n        });\r\n    },\r\n\r\n  },\r\n  computed: {\r\n    requestsLoaded() {\r\n      return this.friendRequest.slice(0, this.length);\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./Requests.vue?vue&type=template&id=a6f5ed18\"\nimport script from \"./Requests.vue?vue&type=script&lang=js\"\nexport * from \"./Requests.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["FriendService","getAllFriends","user_id","friends","api","get","data","error","handleError","getFriendsRequests","requests","create","friend_id","post","getFriendshipById","friendship_id","friendship","accept","acceptAll","deleteAllUnAccepted","delete","pivot","FormData","append","response","class","_createElementVNode","role","src","_imports_0","alt","_createElementBlock","_hoisted_1","_hoisted_2","_createVNode","_component_iq_card","headerTitle","_withCtx","_hoisted_3","body","$options","requestsLoaded","length","_hoisted_4","style","onClick","_cache","$event","_hoisted_5","_hoisted_6","_Fragment","_renderList","request","index1","key","_component_BaseAvatar","profileImg","user","user_profile","profile_picture","profile_id","id","title","name","gender","avatarClass","containerClass","_hoisted_7","_component_router_link","to","_toDisplayString","_ctx","formatDateToWritten","created_at","_hoisted_8","acceptrequest","_hoisted_9","deleterequest","_hoisted_10","$data","friendRequest","_hoisted_11","loadMore","_hoisted_12","_hoisted_13","created","this","FriendServices","methods","_objectSpread","helper","then","async","toggleToast","catch","console","log","swalWithBootstrapButtons","$swal","mixin","customClass","confirmButton","cancelButton","buttonsStyling","fire","text","icon","showCancelButton","confirmButtonText","cancelButtonText","showClass","popup","hideClass","willDelete","isConfirmed","computed","slice","__exports__","render"],"sourceRoot":""}