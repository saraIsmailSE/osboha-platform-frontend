{"version":3,"file":"js/6492-legacy.2eaa7753.js","mappings":"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","sources":["webpack://Osboha180/./src/API/services/user-books.service.js","webpack://Osboha180/./src/components/book/theses/create.vue","webpack://Osboha180/./src/components/book/theses/create.vue?9e30"],"sourcesContent":["import { handleError } from \"vue\";\nimport { api } from \"../Intercepter\";\n\nclass UserBooks {\n  //Finished\n  async getUserBooks(user_id) {\n    try {\n      const books = await api.get(`user-books/show/${user_id}`);\n      return books.data.data;\n    } catch (error) {\n      return error;\n    }\n  }\n\n  //All Free\n  async getAllFree(page, user_id) {\n    try {\n      const books = await api.get(`user-books/free-books/${user_id}/${page}`);\n      return books.data.data;\n    } catch (error) {\n      return error;\n    }\n  }\n\n  /**\n   * Check rules for free book.\n   *\n   * @param user_id\n   * @return jsonResponse[eligible_to_write_thesis boolean]\n   */\n  async eligibleToWriteThesis(user_id) {\n    try {\n      const response = await api.get(\n        `user-books/eligible-to-write-thesis/${user_id}`\n      );\n      return response.data.data;\n    } catch (error) {\n      return error;\n    }\n  }\n\n  //All Later\n  async laterBooks(user_id) {\n    try {\n      const books = await api.get(`user-books/later-books/${user_id}`);\n      return books.data.data;\n    } catch (error) {\n      return error;\n    }\n  }\n  //delete for later book\n  async deleteForLeater(id) {\n    try {\n      const books = await api.get(`user-books/delete-for-later-book/${id}`);\n      return books.data.data;\n    } catch (error) {\n      return error;\n    }\n  }\n\n  async saveBookForLater(bookId) {\n    try {\n      const book = await api.patch(`/user-books/${bookId}/save-for-later`);\n      return book.data;\n    } catch (error) {\n      handleError(error);\n    }\n  }\n}\n\nexport default new UserBooks();\n","<template>\r\n  <form @submit.prevent=\"submit\">\r\n    <div class=\"d-flex align-items-center w-100 row\">\r\n      <!-- نوع الأطروحة -->\r\n      <div class=\"row\">\r\n        <div class=\"form-group\">\r\n          <h5 class=\"form-label\">نوع الأطروحة</h5>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <select class=\"form-select w-100\" name=\"type_of_thesis\" id=\"type_of_thesis\"\r\n            v-model=\"v$.thesisForm.typeOfThesis.$model\" v-on:change=\"\r\n              changeTypeOfThesis(\r\n                $event.target.options[$event.target.options.selectedIndex]\r\n                  .value,\r\n              )\r\n              \">\r\n            <option value=\"\">اختر نوع الأطروحة</option>\r\n            <option value=\"read\">قراءة</option>\r\n            <option value=\"readAndWrite\">كتابة أطروحة</option>\r\n            <option value=\"screenshots\" :disabled=\"screenshotsDisabled\">\r\n              اقتباسات\r\n              <span v-if=\"screenshotsDisabled\">\r\n                -\r\n                <small> (مغلق اليوم) </small>\r\n              </span>\r\n            </option>\r\n            <option value=\"screenshotsAndWrite\" :disabled=\"screenshotsDisabled\">\r\n              كتابة واقتباسات\r\n              <span v-if=\"screenshotsDisabled\">\r\n                -\r\n                <small> (مغلق اليوم) </small>\r\n              </span>\r\n            </option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n      <!-- الصفحات -->\r\n      <div class=\"row mt-2\" v-if=\"showPages\">\r\n        <div class=\"form-group\">\r\n          <h5 class=\"form-label\" :class=\"{ 'text-primary': pages.length === 0 && !startOver }\">\r\n            {{\r\n              pages.length === 0 && !startOver ? \"لقد أنهيت الكتاب\" : \"الصفحات\"\r\n            }}\r\n          </h5>\r\n        </div>\r\n      </div>\r\n      <div class=\"row\" v-if=\"showPages\">\r\n        <button class=\"btn btn-primary me-2 d-flex align-content-center justify-content-center\"\r\n          @click.prevent=\"startBookOver\" v-if=\"pages.length === 0 && !startOver\">\r\n          <span class=\"material-symbols-outlined md-18\"> refresh </span>\r\n          إعادة قراءة الكتاب\r\n        </button>\r\n\r\n        <template v-else>\r\n          <small style=\"color: red\" v-if=\"numberOfPages < 3\">* الحد الأدنى 3 صفحات</small>\r\n\r\n          <div class=\"form-group col-6\">\r\n            <select class=\"form-select\" data-trigger name=\"start_page\" id=\"start_page\"\r\n              v-model=\"v$.thesisForm.start_page.$model\">\r\n              <option value=\"\">صفحة البداية</option>\r\n              <option v-for=\"page in pages\" :value=\"page\" :key=\"page\">\r\n                {{ page }}\r\n              </option>\r\n            </select>\r\n\r\n            <div class=\"help-block\" v-if=\"v$.thesisForm.start_page.$error\">\r\n              <small style=\"color: red\" v-if=\"v$.thesisForm.start_page.required.$invalid\">الرجاء اختيار صفحة\r\n                البداية</small>\r\n              <small style=\"color: red\" v-if=\"!v$.thesisForm.start_page.required.$invalid &&\r\n                v$.thesisForm.start_page.between.$invalid\r\n                \">البداية يجب ان تكون اقل من النهاية</small>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-group col-6\">\r\n            <select class=\"form-select\" data-trigger name=\"end_page\" id=\"end_page\"\r\n              v-model=\"v$.thesisForm.end_page.$model\">\r\n              <option value=\"\">صفحة النهاية</option>\r\n              <option v-for=\"page in bookPagesEnd\" :value=\"page\" :key=\"page\">\r\n                {{ page }}\r\n              </option>\r\n            </select>\r\n            <div class=\"help-block\" v-if=\"v$.thesisForm.end_page.$error\">\r\n              <small style=\"color: red\" v-if=\"v$.thesisForm.end_page.required.$invalid\">الرجاء اختيار صفحة النهاية</small>\r\n              <small style=\"color: red\" v-if=\"!v$.thesisForm.end_page.required.$invalid &&\r\n                v$.thesisForm.end_page.between.$invalid\r\n                \">النهاية يجب ان تكون اكبر من البداية</small>\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </div>\r\n      <div class=\"form-group\" v-if=\"thesis\">\r\n        <label class=\"form-label\" for=\"thesisBody\">الأطروحة</label>\r\n        <textarea rows=\"5\" placeholder=\"... اكتب أطروحتك\" class=\"rounded form-control\" id=\"thesisBody\" name=\"thesisBody\"\r\n          v-model.trim=\"v$.thesisForm.body.$model\" style=\"direction: rtl\"></textarea>\r\n        <p style=\"direction: rtl\">\r\n          <span> {{ v$.thesisForm.body.$model.length }}/400 حرف</span>\r\n          <span> - </span>\r\n          <span style=\"color: red\" class=\"text-center\" v-if=\"v$.thesisForm.body.$model.length < 400\">أطروحة غير شاملة\r\n            <span class=\"material-symbols-outlined font-small\">error</span>\r\n          </span>\r\n          <span style=\"color: green\" v-else>أطروحة شاملة\r\n            <span class=\"material-symbols-outlined font-small\">check_circle</span>\r\n          </span>\r\n        </p>\r\n        <div class=\"help-block\" v-if=\"v$.thesisForm.body.$error\">\r\n          <small style=\"color: red\" v-if=\"v$.thesisForm.body.requiredIf.$invalid\">الرجاء ادخال الأطروحة</small>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"form-group\" v-if=\"screenshots\">\r\n        <label class=\"form-label\" for=\"customFile\"> اضافة اقتباس</label>\r\n        <input class=\"form-control\" type=\"file\" id=\"customFile\" multiple\r\n          accept=\"image/jpeg, image/png, image/jpg, image/gif, image/svg\" ref=\"screenShots\" @change=\"previewImages\" />\r\n        <div class=\"help-block\" v-if=\"v$.thesisForm.screenShots.$error\">\r\n          <small style=\"color: red\" v-if=\"v$.thesisForm.screenShots.requiredIf.$invalid\">الرجاء ادخال اقتباس واحد على\r\n            الاقل</small>\r\n        </div>\r\n        <div class=\"help-block\" v-if=\"filesLimitError\">\r\n          <small style=\"color: red\">{{ filesLimitError }}</small>\r\n        </div>\r\n        <ImagePreviewer v-if=\"thesisForm.screenShots.length\" :media=\"thesisForm.screenShots\" @remove-media=\"removeImage\"\r\n          ref=\"imagePreviewer\" />\r\n        <small  class=\"text-center mt-2 text-danger\"> ⚠️ إن الاقتباسات المصورة لا يتم الاحتفاظ بها على المنصة. لأجل ذلك نحثك\r\n          على كتابة الأطروحة أو التلخيص لتحفظ أفكارك التي انتفعت بها من الكتاب.</small>\r\n\r\n      </div>\r\n      <hr />\r\n      <!--Success and error messages-->\r\n\r\n      <small class=\"text-danger text-center\" v-if=\"errorMessage\">\r\n        {{ errorMessage }}\r\n      </small>\r\n      <small class=\"text-danger text-center\" v-if=\"mediaNoteText && thesisToEdit\">\r\n        {{ mediaNoteText }}\r\n      </small>\r\n      <div class=\"col-sm-12 text-center\" v-if=\"loader\">\r\n        <img :src=\"require('@/assets/images/page-img/page-load-loader.gif')\" alt=\"loader\" style=\"height: 100px\" />\r\n      </div>\r\n      <button type=\"submit\" class=\"btn btn-primary d-block mt-3\" v-if=\"!loader\" :disabled=\"v$.thesisForm.$invalid\">\r\n        إضافة\r\n      </button>\r\n    </div>\r\n  </form>\r\n</template>\r\n<script>\r\nimport useVuelidate from \"@vuelidate/core\";\r\nimport { required, requiredIf, maxLength } from \"@vuelidate/validators\";\r\nimport commentService from \"@/API/services/comment.service\";\r\nimport ImagePreviewer from \"@/components/media/ImagePreviewer.vue\";\r\nimport helper from \"@/utilities/helper\";\r\n\r\nexport default {\r\n  name: \"CreateThesis\",\r\n  components: {\r\n    ImagePreviewer,\r\n  },\r\n  props: {\r\n    book: {\r\n      type: Object,\r\n      default: null,\r\n    },\r\n    lastThesis: {\r\n      type: Object,\r\n      default: null,\r\n    },\r\n    thesisToEdit: {\r\n      type: Object,\r\n      default: null,\r\n    },\r\n  },\r\n  setup() {\r\n    return {\r\n      v$: useVuelidate(),\r\n    };\r\n  },\r\n  data() {\r\n    return {\r\n      thesis: false,\r\n      screenshots: false,\r\n      showPages: false,\r\n      loader: false,\r\n      startOver: false,\r\n      thesisForm: {\r\n        typeOfThesis: \"\",\r\n        start_page: \"\",\r\n        end_page: \"\",\r\n        body: \"\",\r\n        screenShots: [],\r\n        type: \"thesis\",\r\n        book_id: null,\r\n        u_comment_id: null,\r\n      },\r\n      mediaNoteText: \"\",\r\n      errorMessage: \"\",\r\n      filesLimitError: \"\",\r\n      screenshotsDisabled: false,\r\n      currentTime: new Date(),\r\n      timer: null,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.timer = setInterval(() => {\r\n      this.currentTime = new Date();\r\n    }, 1000);\r\n\r\n    //this.informUserAboutClosingScreenShots();\r\n  },\r\n  beforeUnmount() {\r\n    clearInterval(this.timer);\r\n  },\r\n  computed: {\r\n    numberOfPages() {\r\n      return this.thesisForm.end_page - this.thesisForm.start_page + 1;\r\n    },\r\n\r\n    successMessage() {\r\n      return this.thesisToEdit\r\n        ? \"تم تعديل الأطروحة بنجاح\"\r\n        : \"تم إضافة الأطروحة بنجاح\";\r\n    },\r\n    pages() {\r\n      let allPages = [];\r\n      let start = null;\r\n\r\n      //if user has a book in progress, start pages from the last thesis end page and add 1 to it\r\n      if (\r\n        this.book.userBooks.length &&\r\n        this.book.userBooks[0].status === \"in progress\"\r\n      ) {\r\n        start = this.lastThesis\r\n          ? this.lastThesis?.end_page + 1\r\n          : this.book.start_page;\r\n      }\r\n      //if user has no book/ or the book is in the favorites shelf, so this is the first thesis, start pages from the book start page\r\n      else if (\r\n        (!this.book.userBooks.length && !this.lastThesis) ||\r\n        (this.book.userBooks.length &&\r\n          this.book.userBooks[0].status === \"later\")\r\n      ) {\r\n        start = this.book.start_page;\r\n      }\r\n\r\n      //if user is editting the thesis, start pages from the book start page\r\n      if (this.thesisToEdit) {\r\n        start = this.book.start_page;\r\n      }\r\n\r\n      //if start null, it means the user has finished the book\r\n\r\n      //if start over button is not clicked, return empty array\r\n      if (start === null && !this.startOver) {\r\n        return [];\r\n      }\r\n\r\n      //if start over button is clicked, start pages from the book start page\r\n      if (start === null && this.startOver) {\r\n        start = this.book.start_page;\r\n      }\r\n      //add all pages to the array from the start page to the book end page\r\n      for (let i = start; i <= this.book.end_page; i++) {\r\n        allPages.push(i);\r\n      }\r\n      return allPages;\r\n    },\r\n    bookPagesEnd() {\r\n      return this.pages.filter((page) => page > this.thesisForm.start_page);\r\n    },\r\n    isTimeValid() {\r\n      //disable screenshots on saturday after 09:00 pm Asia/Riyadh\r\n      const convertedDate = helper.convertTZ(this.currentTime, \"Asia/Riyadh\");\r\n      const day = convertedDate.getDay();\r\n      const hour = convertedDate.getHours();\r\n      const minutes = convertedDate.getMinutes();\r\n\r\n      if (\r\n        day === 6 &&\r\n        hour >= 21\r\n        // &&\r\n        // (hour < 14 || (hour === 14 && minutes <= 59))\r\n      ) {\r\n        return true;\r\n      }\r\n      return false;\r\n    },\r\n  },\r\n  watch: {\r\n    book() {\r\n      this.thesisForm.book_id = this.book.id;\r\n    },\r\n    // currentTime() {\r\n    //   if (this.isTimeValid) {\r\n    //     this.screenshotsDisabled = true;\r\n    //   } else {\r\n    //     this.screenshotsDisabled = false;\r\n    //   }\r\n    // },\r\n    // screenshotsDisabled() {\r\n    //   if (this.screenshotsDisabled) {\r\n    //     this.screenshots = false;\r\n    //     this.thesisForm.screenShots = [];\r\n    //     this.informUserAboutClosingScreenShots();\r\n    //   }\r\n    // },\r\n  },\r\n  created() {\r\n    if (this.thesisToEdit) {\r\n      this.thesisForm.u_comment_id = parseInt(this.thesisToEdit.id);\r\n      this.thesisForm.body = this.thesisToEdit.body\r\n        ? this.thesisToEdit.body\r\n        : \"\";\r\n      this.thesisForm.start_page = this.thesisToEdit.thesis.start_page;\r\n      this.thesisForm.end_page = this.thesisToEdit.thesis.end_page;\r\n      this.thesisForm.screenShots.old = this.thesisToEdit.media ?? [];\r\n      this.showPages = true;\r\n\r\n      if (\r\n        (!this.thesisToEdit.body &&\r\n          this.checkThesisHasMedia(this.thesisToEdit) === 0) ||\r\n        (!this.thesisToEdit.body &&\r\n          this.checkThesisHasMedia(this.thesisToEdit) > 0)\r\n      ) {\r\n        this.thesisForm.typeOfThesis = \"read\";\r\n      } else if (\r\n        (this.thesisToEdit.body &&\r\n          this.checkThesisHasMedia(this.thesisToEdit) === 0) ||\r\n        (this.thesisToEdit.body &&\r\n          this.checkThesisHasMedia(this.thesisToEdit) > 0)\r\n      ) {\r\n        this.thesisForm.typeOfThesis = \"readAndWrite\";\r\n      }\r\n\r\n      this.changeTypeOfThesis(this.thesisForm.typeOfThesis);\r\n\r\n      const mediaCount = this.checkThesisHasMedia(this.thesisToEdit);\r\n      this.mediaNoteText =\r\n        mediaCount > 0\r\n          ? `ملاحظة: سيتم حذف الصور الموجودين بعد تعديل الأطروحة وعددهم: ${mediaCount}`\r\n          : \"\";\r\n    } else {\r\n      this.thesisForm.book_id = this.book?.id;\r\n    }\r\n  },\r\n  methods: {\r\n    showAddThesis() {\r\n      this.thesis = true;\r\n      this.screenshots = false;\r\n    },\r\n    showAddScreenshots() {\r\n      this.screenshots = true;\r\n      this.thesis = false;\r\n    },\r\n    noThesisAndScreenshots() {\r\n      this.thesis = false;\r\n      this.screenshots = false;\r\n    },\r\n    thesisAndScreenshots() {\r\n      this.thesis = true;\r\n      this.screenshots = true;\r\n    },\r\n    changeTypeOfThesis(type) {\r\n      this.showPages = true;\r\n      if (type == \"read\") {\r\n        this.noThesisAndScreenshots();\r\n      } else if (type == \"readAndWrite\") {\r\n        this.showAddThesis();\r\n      } else if (type == \"screenshots\") {\r\n        this.showAddScreenshots();\r\n      } else if (type == \"screenshotsAndWrite\") {\r\n        this.thesisAndScreenshots();\r\n      } else {\r\n        this.showPages = false;\r\n        this.noThesisAndScreenshots();\r\n      }\r\n    },\r\n    previewImages(event) {\r\n      const { files } = event.target;\r\n\r\n      if (files.length > 5) {\r\n        this.filesLimitError = \"لا يمكنك رفع أكثر من 5 اقتباسات\";\r\n        return;\r\n      }\r\n      this.filesLimitError = \"\";\r\n      this.thesisForm.screenShots = files;\r\n    },\r\n    removeImage(index) {\r\n      const files = [...this.thesisForm.screenShots];\r\n      files.splice(index, 1);\r\n      this.thesisForm.screenShots = files;\r\n\r\n      if (this.thesisForm.screenShots.length == 0) {\r\n        this.$refs.screenShots.value = null;\r\n      }\r\n    },\r\n    async submit() {\r\n      this.v$.$touch();\r\n      if (!this.v$.thesisForm.$invalid && this.numberOfPages >= 3) {\r\n        this.loader = true;\r\n        try {\r\n          this.updateThesisForm();\r\n\r\n          let response;\r\n\r\n          if (this.thesisToEdit) {\r\n            response = await commentService.update(this.thesisForm);\r\n          } else {\r\n            response = await commentService.create(this.thesisForm);\r\n          }\r\n\r\n          if (response.statusCode !== 200) {\r\n            throw response.data;\r\n          }\r\n\r\n          helper.toggleToast(this.successMessage, \"success\");\r\n\r\n          if (!this.thesisToEdit) {\r\n            this.$emit(\"addThesis\", response.data);\r\n            //reset form\r\n            this.thesisForm = {\r\n              ...this.thesisForm,\r\n              typeOfThesis: \"\",\r\n              start_page: \"\",\r\n              end_page: \"\",\r\n              body: \"\",\r\n              screenShots: [],\r\n            };\r\n\r\n            this.v$.thesisForm.$reset();\r\n            this.changeTypeOfThesis(\"\");\r\n\r\n            //timer to close the modal\r\n            setTimeout(() => {\r\n              this.$emit(\"closeModel\");\r\n            }, 2000);\r\n          } else {\r\n            setTimeout(() => {\r\n              location.reload();\r\n            }, 1800);\r\n          }\r\n        } catch (error) {\r\n          helper.toggleErrorToast();\r\n          console.log(error);\r\n        } finally {\r\n          this.loader = false;\r\n        }\r\n      } else {\r\n        this.errorMessage = \"الرجاء ادخال جميع البيانات المطلوبة\";\r\n      }\r\n    },\r\n    updateThesisForm() {\r\n      if (this.thesisForm.typeOfThesis == \"read\") {\r\n        this.thesisForm.body = null;\r\n        this.thesisForm.screenShots = [];\r\n      } else if (this.thesisForm.typeOfThesis == \"readAndWrite\") {\r\n        this.thesisForm.screenShots = [];\r\n      } else if (this.thesisForm.typeOfThesis == \"screenshots\") {\r\n        this.thesisForm.body = null;\r\n      }\r\n    },\r\n    startBookOver() {\r\n      this.startOver = true;\r\n    },\r\n    checkThesisHasMedia(thesis) {\r\n      let media = 0;\r\n\r\n      if (thesis.media) {\r\n        media++;\r\n      }\r\n\r\n      if (thesis.replies?.length) {\r\n        thesis.replies.forEach((item) => {\r\n          if (item.type === \"screenshot\" && item.media) {\r\n            media++;\r\n          }\r\n        });\r\n      }\r\n\r\n      return media;\r\n    },\r\n\r\n    informUserAboutClosingScreenShots() {\r\n      if (this.isTimeValid) {\r\n        if (!this.$cookies.get(\"show-closing-screenshots-alert\")) {\r\n          const swal = this.$swal.mixin({\r\n            customClass: {\r\n              confirmButton: \"btn btn-primary btn-lg\",\r\n            },\r\n            buttonsStyling: false,\r\n          });\r\n\r\n          let html =\r\n            \"<p class='text-center'>بسبب كثرة القراء الذين يدخلون تصويت القراءة الآن</p>\";\r\n          html +=\r\n            \"<p class='text-center'>لا يتحمل السيرفر <b class='text-danger'>تحميل الصور</b></p>\";\r\n          html +=\r\n            \"<p class='text-center'>فضلا ادخل أطروحتك أو اقتباساتك بشكل <b>مكتوب</b></p>\";\r\n          html +=\r\n            \"<p class='text-center'>يتاح رفع الصور <span class='text-primary'><b>من الأحد إلى الساعة التاسعة من يوم السبت</b></span> أسبوعياً</p>\";\r\n\r\n          swal\r\n            .fire({\r\n              title: \"لا يمكنك وضع اقتباسات مؤقتًا\",\r\n              html,\r\n              showCancelButton: false,\r\n              confirmButtonText: \"حسنًا\",\r\n              icon: \"warning\",\r\n              showClass: {\r\n                popup: \"animate__animated animate__zoomIn\",\r\n              },\r\n              hideClass: {\r\n                popup: \"animate__animated animate__zoomOut\",\r\n              },\r\n            })\r\n            .then((result) => {\r\n              if (result.isConfirmed) {\r\n                this.$cookies.set(\"show-closing-screenshots-alert\", true, \"1d\");\r\n              }\r\n            });\r\n        }\r\n      }\r\n    },\r\n  },\r\n  validations() {\r\n    return {\r\n      thesisForm: {\r\n        typeOfThesis: {\r\n          required,\r\n        },\r\n        start_page: {\r\n          required,\r\n          between: (value) =>\r\n            parseInt(value) < parseInt(this.thesisForm.end_page),\r\n        },\r\n        end_page: {\r\n          required,\r\n          between: (value) =>\r\n            parseInt(value) > parseInt(this.thesisForm.start_page),\r\n        },\r\n        body: {\r\n          requiredIf: requiredIf(\r\n            () =>\r\n              this.thesisForm.typeOfThesis == \"readAndWrite\" ||\r\n              this.thesisForm.typeOfThesis == \"screenshotsAndWrite\",\r\n          ),\r\n        },\r\n        screenShots: {\r\n          requiredIf: requiredIf(\r\n            () =>\r\n              this.thesisForm.typeOfThesis == \"screenshots\" ||\r\n              this.thesisForm.typeOfThesis == \"screenshotsAndWrite\",\r\n          ),\r\n        },\r\n      },\r\n    };\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.font-small {\r\n  font-size: 0.8rem;\r\n}\r\n\r\n.text-danger {\r\n  color: #c50714 !important;\r\n}\r\n</style>\r\n","import { render } from \"./create.vue?vue&type=template&id=60e63b48&scoped=true\"\nimport script from \"./create.vue?vue&type=script&lang=js\"\nexport * from \"./create.vue?vue&type=script&lang=js\"\n\nimport \"./create.vue?vue&type=style&index=0&id=60e63b48&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-60e63b48\"]])\n\nexport default __exports__"],"names":["UserBooks","_classCallCheck","_createClass","key","value","_getUserBooks","_asyncToGenerator","_regeneratorRuntime","mark","_callee","user_id","books","wrap","_context","prev","next","api","get","concat","sent","abrupt","data","t0","stop","getUserBooks","_x","apply","arguments","_getAllFree","_callee2","page","_context2","getAllFree","_x2","_x3","_eligibleToWriteThesis","_callee3","response","_context3","eligibleToWriteThesis","_x4","_laterBooks","_callee4","_context4","laterBooks","_x5","_deleteForLeater","_callee5","id","_context5","deleteForLeater","_x6","_saveBookForLater","_callee6","bookId","book","_context6","patch","handleError","saveBookForLater","_x7","class","_createElementVNode","style","for","_createElementBlock","onSubmit","_cache","_withModifiers","$options","submit","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","name","$setup","v$","thesisForm","typeOfThesis","$model","$event","onChange","changeTypeOfThesis","target","options","selectedIndex","_hoisted_5","_hoisted_6","_hoisted_7","disabled","$data","screenshotsDisabled","_hoisted_9","_hoisted_10","_hoisted_12","_hoisted_13","showPages","_hoisted_14","_hoisted_15","_normalizeClass","pages","length","startOver","_hoisted_16","_Fragment","numberOfPages","_hoisted_18","_hoisted_19","start_page","_hoisted_20","_renderList","_hoisted_21","$error","_hoisted_22","required","$invalid","_hoisted_23","between","_hoisted_24","_hoisted_25","end_page","_hoisted_26","bookPagesEnd","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","onClick","startBookOver","_hoisted_17","thesis","_hoisted_31","_hoisted_32","rows","placeholder","body","_hoisted_33","_toDisplayString","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","requiredIf","_hoisted_40","screenshots","_hoisted_41","_hoisted_42","type","multiple","accept","ref","previewImages","screenShots","_hoisted_43","_hoisted_44","filesLimitError","_hoisted_45","_hoisted_46","_createBlock","_component_ImagePreviewer","media","onRemoveMedia","removeImage","_hoisted_47","_hoisted_48","errorMessage","_hoisted_49","mediaNoteText","$props","thesisToEdit","_hoisted_50","loader","_hoisted_51","src","require","alt","_hoisted_53","components","ImagePreviewer","props","Object","default","lastThesis","setup","useVuelidate","book_id","u_comment_id","currentTime","Date","timer","mounted","_this","this","setInterval","beforeUnmount","clearInterval","computed","successMessage","_this$lastThesis","allPages","start","userBooks","status","i","push","_this2","filter","isTimeValid","convertedDate","helper","convertTZ","day","getDay","hour","getHours","getMinutes","watch","created","_this$thesisToEdit$me","parseInt","old","checkThesisHasMedia","mediaCount","_this$book","methods","showAddThesis","showAddScreenshots","noThesisAndScreenshots","thesisAndScreenshots","event","files","index","_toConsumableArray","splice","$refs","_this3","$touch","updateThesisForm","commentService","update","create","statusCode","toggleToast","setTimeout","location","reload","$emit","_objectSpread","$reset","toggleErrorToast","console","log","finish","_thesis$replies","replies","forEach","item","informUserAboutClosingScreenShots","_this4","$cookies","swal","$swal","mixin","customClass","confirmButton","buttonsStyling","html","fire","title","showCancelButton","confirmButtonText","icon","showClass","popup","hideClass","then","result","isConfirmed","set","validations","_this5","__exports__","render"],"sourceRoot":""}