"use strict";(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[4499],{34964:function(t,e,o){var a=o(24150),s=o(66252),i=o(79940);class n{async create(t){try{const e=await a.hi.post("/books",t,{headers:{"Content-type":"multipart/form-data"}});return e.data.data}catch(e){(0,s.S3)(e)}}async getAll(t){try{const e=await a.hi.get("books?page="+t);return e.data.data}catch(e){(0,s.S3)(e)}}async getById(t){try{const e=await a.hi.get(`/books/${t}`);return e.data}catch(e){(0,i.F)(e,"BookService.getById")}}async deleteById(t){try{return await a.hi.delete(`/books/${t}`)}catch(e){return e}}async getBooksByType(t){try{const e=await a.hi.get(`/books/type/${t}`);return e.data}catch(e){return e}}async getBooksByLevel(t,e){try{const o=await a.hi.get(`/books/level/${t}?page=${e}`);return o.data.data}catch(o){(0,s.S3)(o)}}async getBooksByName(t,e){try{const o=await a.hi.get(`/books/name?page=${e}&name=${t}`);return o.data.data}catch(o){(0,s.S3)(o)}}async getBooksByLanguage(t,e){try{const o=await a.hi.get(`/books/language/${t}?page=${e}`);return o.data.data}catch(o){(0,s.S3)(o)}}async getBooksBySection(t){try{const e=await a.hi.get(`/books/section/${t}`);return e.data}catch(e){return e}}async getRecentAddedBooks(){try{const t=await a.hi.get("/books/recent-added-books");return t.data.data}catch(t){return console.log(t),""}}async getMostReadableBooks(){try{const t=await a.hi.get("/books/most-readable-books");return t.data.data}catch(t){return console.log(t),""}}async getRandomBook(){try{const t=await a.hi.get("/books/random-book");return t.data.data}catch(t){return console.log(t),""}}async latestBooks(){try{const t=await a.hi.get("/books/latest");return t.data.data}catch(t){return console.log(t),""}}async showBasicInfo(t){try{const e=await a.hi.get(`books/${t}`);return e.data.data}catch(e){return e}}async update(t){try{const e=await a.hi.post("/books/update",t,{headers:{"Content-type":"multipart/form-data"}});return e.data.data}catch(e){(0,s.S3)(e)}}}e.Z=new n},27522:function(t,e,o){o(76265);var a=o(66252),s=o(24150);class i{async create(t){const e=new FormData;if(e.append("type",t.type),t.post_id&&e.append("post_id",t.post_id),t.book_id&&e.append("book_id",t.book_id),t.comment_id&&e.append("comment_id",t.comment_id),t.body&&e.append("body",t.body),t.screenShots&&t.screenShots.length>0)for(let a=0;a<t.screenShots.length;a++)e.append("screenShots[]",t.screenShots[a]);t.start_page&&e.append("start_page",t.start_page),t.end_page&&e.append("end_page",t.end_page),t.image&&e.append("image",t.image);try{const t=await s.hi.post("/comments",e,{headers:{"Content-type":"multipart/form-data"}});return t.data}catch(o){(0,a.S3)(o)}}async getPostComments(t,e,o=""){try{const a=await s.hi.get(`/comments/post/${t}/${o}?page=${e}`);return a.data}catch(i){(0,a.S3)(i)}}async getPostCommentsUsers(t){try{const e=await s.hi.get(`/comments/post/${t}/users`);return e.data}catch(e){(0,a.S3)(e)}}async update(t){const e=new FormData;if(e.append("u_comment_id",t.u_comment_id),t.body&&e.append("body",t.body),t.screenShots&&t.screenShots.length>0)for(let a=0;a<t.screenShots.length;a++)e.append("screenShots[]",t.screenShots[a]);t.start_page&&e.append("start_page",t.start_page),t.end_page&&e.append("end_page",t.end_page),t.image&&e.append("image",t.image);for(const a of e.entries())console.log(`${a[0]}, ${a[1]}`);try{const t=await s.hi.post("/comments/update",e,{"Content-type":"multipart/form-data"});return t.data}catch(o){(0,a.S3)(o)}}async delete(t){try{return await s.hi.delete(`/comments/${t}`)}catch(e){(0,a.S3)(e)}}}e.Z=new i},79940:function(t,e,o){o.d(e,{F:function(){return s}});o(70560);var a=o(1120);function s(t,e=""){throw console.log(`[ERROR] ${e} =>`,t.response.data),404===t.response.data.statusCode?a.Z.push({name:"NotFound"}):403===t.response.data.statusCode&&a.Z.push({name:"NotAuthorized"}),t}},82908:function(t,e,o){o.d(e,{Z:function(){return W}});o(76265);var a=o(66252),s=o(3577),i=o(49963);const n=t=>((0,a.dD)("data-v-5cee3cfd"),t=t(),(0,a.Cn)(),t),r={class:"d-grid gap-3 d-grid-template-1fr-19"},c={class:"card mb-0"},l={class:"position-absolute top-0 end-0 p-2 rounded-start",style:{"background-color":"#278036",opacity:"50%"}},d={class:"text-white"},u={class:"position-absolute start-0 mt-2"},h={class:"card-body text-center"},p=["src"],m={class:"group-info pt-3 pb-3"},g={class:"group-details d-inline-block pb-3"},k={class:"d-flex align-items-center justify-content-between list-inline m-0 p-0"},b={class:"pe-3 ps-3"},y=n((()=>(0,a._)("p",{class:"mb-0"},"المستوى",-1))),v={class:"pe-3 ps-3"},f=n((()=>(0,a._)("p",{class:"mb-0"},"الفئة",-1))),_={class:"pe-3 ps-3"},w=n((()=>(0,a._)("p",{class:"mb-0"},"الصفحات",-1))),B={key:0,class:"row"},C={key:0,class:"row d-flex justify-content-center"},S={class:"col-12"},I={key:0},A={key:1},$={key:1,class:"row d-flex justify-content-center"},D={class:"col-12"},Z={key:1,class:"row"},x={class:"col-6"},F=["data-bs-target","disabled"],U={class:"col-6"},R=["id"],T={href:"javascript:void(0);",class:"lh-1","data-bs-dismiss":"modal",ref:"closeBtn"},L=n((()=>(0,a._)("span",{class:"material-symbols-outlined"},"close",-1))),M=[L];function N(t,e,o,n,L,N){var P,z,E;const j=(0,a.up)("router-link"),q=(0,a.up)("model-header"),O=(0,a.up)("createThesis"),W=(0,a.up)("model-body"),H=(0,a.up)("modal");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",r,[(0,a._)("div",c,[(0,a._)("div",l,[(0,a._)("h6",d,(0,s.zw)(N.bookTypeLanguage),1)]),(0,a._)("div",u,[o.isProfile?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",{key:0,class:(0,s.C_)(["material-symbols-outlined me-2 align-middle",[N.isSaved?"later-book-on":"later-book-off"]]),role:"button",onClick:e[0]||(e[0]=(0,i.iM)(((...t)=>N.markBookForLater&&N.markBookForLater(...t)),["prevent"]))}," favorite ",2)),(0,a._)("span",{role:"button",onClick:e[1]||(e[1]=t=>N.download(o.cardInfo.link)),class:"material-symbols-outlined download-book align-middle me-3"}," download ")]),(0,a._)("div",h,[(0,a._)("img",{src:N.resolve_img_url(null!==(P=null===(z=o.cardInfo.media)||void 0===z?void 0:z.path)&&void 0!==P?P:""),class:"img-fluid rounded w-75 mt-4",alt:"blog-img"},null,8,p),(0,a._)("div",m,[(0,a._)("h4",null,[(0,a.Wm)(j,{to:{name:"book.book-details",params:{book_id:this.cardInfo.id}},"data-toggle":"tooltip","data-placement":"top",title:o.cardInfo.name,class:(0,s.C_)(["truncated",N.directionClass])},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(o.cardInfo.name),1)])),_:1},8,["to","title","class"])]),(0,a._)("p",{class:(0,s.C_)(["truncated",N.directionClass])},(0,s.zw)(o.cardInfo.writer),3)]),(0,a._)("div",g,[(0,a._)("ul",k,[(0,a._)("li",b,[y,(0,a._)("h6",null,(0,s.zw)(o.cardInfo.level.arabic_level),1)]),(0,a._)("li",v,[f,(0,a._)("h6",null,(0,s.zw)(null===(E=o.cardInfo.section)||void 0===E?void 0:E.section),1)]),(0,a._)("li",_,[w,(0,a._)("h6",null,(0,s.zw)(o.cardInfo.end_page),1)])])]),o.isProfile?((0,a.wg)(),(0,a.iD)("div",B,[o.isAmbassador?((0,a.wg)(),(0,a.iD)("div",C,[(0,a._)("div",S,[(0,a._)("button",{type:"submit",class:"btn btn-primary d-block w-100",onClick:e[2]||(e[2]=t=>N.thesesDetails())},[(0,a.Uk)(" عرض "),N.myProfile?((0,a.wg)(),(0,a.iD)("span",I," أطروحاتي ")):((0,a.wg)(),(0,a.iD)("span",A," أطروحات السفير "))])])])):((0,a.wg)(),(0,a.iD)("div",$,[(0,a._)("div",D,[(0,a._)("button",{type:"submit",class:"btn btn-primary d-block w-100",onClick:e[3]||(e[3]=t=>N.bookDetails())}," صفحة الكتاب ")])]))])):((0,a.wg)(),(0,a.iD)("div",Z,[(0,a._)("div",x,[(0,a._)("button",{type:"submit",class:"btn btn-primary d-block w-100","data-bs-toggle":"modal","data-bs-target":`#modal-${o.cardInfo.id}`,disabled:!o.cardInfo.allow_comments}," كتابة أطروحة ",8,F)]),(0,a._)("div",U,[(0,a._)("button",{type:"submit",class:"btn btn-primary d-block w-100",onClick:e[4]||(e[4]=t=>N.bookDetails())}," عرض الأطروحات ")])]))])])]),(0,a.Wm)(H,{class:"modal fade",id:`modal-${o.cardInfo.id}`,dialogClass:"modal-fullscreen-sm-down",tabindex:"-1",title:"Create Thesis","aria-labelledby":`modalsLabel-${o.cardInfo.id}`,"aria-hidden":!0},{default:(0,a.w5)((()=>[(0,a.Wm)(q,null,{default:(0,a.w5)((()=>[(0,a._)("h5",{class:"modal-title",id:`modalsLabel-${o.cardInfo.id}`},(0,s.zw)(o.cardInfo.name)+" || أطروحة جديدة ",9,R),(0,a._)("a",T,M,512)])),_:1}),(0,a.Wm)(W,null,{default:(0,a.w5)((()=>[(0,a.Wm)(O,{book:o.cardInfo,lastThesis:o.cardInfo.last_thesis,onCloseModel:N.closeModel,onAddThesis:N.addThesis},null,8,["book","lastThesis","onCloseModel","onAddThesis"])])),_:1})])),_:1},8,["id","aria-labelledby"])],64)}o(70560),o(32320);var P=o(41251),z=o(19057),E=o(8209),j={name:"BookCard",components:{createThesis:P.Z},props:{cardInfo:{type:Object},isProfile:{type:Boolean,default:!1},isAmbassador:{type:Boolean,default:!0}},created(){window.addEventListener("popstate",this.popstateEventAction)},emits:["updateUserBook"],methods:{popstateEventAction(){const t=document.querySelector("body");t.removeAttribute("data-bs-overflow"),t.removeAttribute("data-bs-padding-right"),t.removeAttribute("style"),t.classList.remove("modal-open");const e=document.getElementsByClassName("modal-backdrop");for(let o=0;o<e.length;o++)e[o].remove();this.removePopstateEventAction()},removePopstateEventAction(){window.removeEventListener("popstate",this.popstateEventAction)},resolve_img_url:function(t){return t||o(21218)},bookDetails(){this.$router.push({name:"book.book-details",params:{book_id:this.cardInfo.id}})},thesesDetails(){this.$router.push({name:"book.user-theses",params:{book_id:this.cardInfo.id,user_id:this.$route.params.user_id}})},closeModel(){this.$refs.closeBtn.click()},addThesis(t){setTimeout((()=>{this.closeModel(),this.bookDetails()}),1800)},async markBookForLater(){try{const t=await z.Z.saveBookForLater(this.cardInfo.id);E.Z.handleSuccessSwal(t.message,1800),this.$emit("updateUserBook",this.cardInfo.id,t.data?{id:t.data.id,status:t.data.status,counter:t.data.counter}:null)}catch(t){console.log("[save book error]",t),E.Z.toggleToast("حدث خطأ ما أثناء حفظ الكتاب, يرجى المحاولة مرة أخرى","error")}},download(t){const e=this.$swal.mixin({customClass:{confirmButton:"btn btn-primary btn-lg",cancelButton:"btn btn-outline-primary btn-lg ms-2"},buttonsStyling:!1});e.fire({title:"ملاحظة هامة",text:"في مشروعنا لن لا نقوم أبدًا بتصوير الكتب المطبوعة ولا نقوم بنسب هذه الكتب للمشروع أو محاولة إخفاء أسماء دور النشر وحقوقها . إنما كل ما نقوم به هو عملية البحث عن هذه الكتب في مواقع الانترنت و إحضار روابط الحصول عليها للاستفادة منها . علمًا أننا لا نقوم بعملية بيع للكتب أو الاستفادة المادية منها مطلقًا ولكننا نؤمن أن من حق دور النشر إيجاد وسائل لمنع تصوير كتبها ووضعها على مواقع الانترنت ولكن أن يتواجد الكتاب على الانترنت مجانًا سواء عن طريق موقع لديه أذن بالنشر ، أو عن طريق كاتب الكتاب أو غيرهم ، ثم لا نقوم بقراءة هذه الكتب ونمنع أنفسنا من العلم فهذا الأمر لن يساهم في عملية ايقاف الكتب الالكترونية إنما سوف يساهم فقط بمنع أنفسنا عن علم مطروح وتقييد أنفسنا بظروف تدفعنا للجهل والتوقف عن التعلم . علمًا أن المشروع يتعهد دومًا بحذف أي كتاب من المنهج إذا لم يناسب وجوده كاتب الكتب أو دار النشر الخاصة بالكتاب ، فبإمكان كل شخص إما قراءة الكتاب مطبوعًا أو الاستفادة من النسخ التي نجمعها من مواقع الكتب المنتشرة مع إخلاء مسؤوليتنا حول إن كانت هذه المواقع لديها أذن بالنشر والتوزيع من عدمه فنترك هذا الأمر لدور النشر . هذا ونسأل الله أن يصلح نوايانا ويجعلها خالصة لوجهه الكريم وتطبيقًا لأمره لنا بالقراءة لأجل التعلم والتفكر . والله أعلم .",icon:"warning",showCancelButton:!0,confirmButtonText:"تحميل",cancelButtonText:"إلغاء",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}).then((e=>{e.isConfirmed&&window.open(t,"_blank")}))}},computed:{bookTypeLanguage(){let t="كتاب ";const e=this.cardInfo.type.type.toLowerCase();"normal"==e?t+="منهجي":"ramadan"==e||"tafseer"==e?t+="رمضاني":"kids"==e?t+="أطفال":"young"==e&&(t+="يافعين"),t+=" - ";const o=this.cardInfo.language.language.toLowerCase();return"arabic"==o?t+="عربي":"english"==o&&(t+="إنجليزي"),t},isSaved(){var t;return!!this.cardInfo.userBooks&&"later"===(null===(t=this.cardInfo.userBooks[0])||void 0===t?void 0:t.status)},myProfile(){return this.isProfile&&this.isAmbassador&&parseInt(this.$store.getters.getUser.id)===parseInt(this.$route.params.user_id)},directionClass(){return"arabic"==this.cardInfo.language.language.toLowerCase()?"right-direction":"left-direction"}}},q=o(83744);const O=(0,q.Z)(j,[["render",N],["__scopeId","data-v-5cee3cfd"]]);var W=O},53186:function(t,e,o){o.d(e,{Z:function(){return m}});o(76801),o(43843);var a=o(66252);const s={class:"preview-images"},i=["onClick"],n=(0,a._)("span",null," x ",-1),r=[n],c=["src"],l=["src"];function d(t,e,o,n,d,u){return(0,a.wg)(),(0,a.iD)("div",s,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.previewUrls,((t,e)=>((0,a.wg)(),(0,a.iD)("div",{class:"image-container",key:t.url},[(0,a._)("div",{class:"delete-image",onClick:t=>u.removeMedia(e)},r,8,i),t.type.includes("image")?((0,a.wg)(),(0,a.iD)("img",{key:0,src:t.url},null,8,c)):((0,a.wg)(),(0,a.iD)("video",{key:1,src:t.url,autoplay:""},null,8,l))])))),128))])}o(76265),o(70560);var u={name:"ImagePreviewer",props:{media:{type:[Array,FileList],default:()=>[]}},emits:["remove-media"],data(){return{previewUrls:[]}},methods:{previewMedia(){this.previewUrls=[];const t=[...this.media];t.forEach((t=>{const e=new FileReader;e.onload=()=>{this.previewUrls.push({url:e.result,type:t.type})},e.readAsDataURL(t)}))},removeMedia(t){this.previewUrls.splice(t,1),this.$emit("remove-media",t)},clearMedia(){this.previewUrls=[]}},mounted(){this.previewMedia()},watch:{media(){this.previewMedia()}}},h=o(83744);const p=(0,h.Z)(u,[["render",d]]);var m=p},42103:function(t,e,o){o.r(e),o.d(e,{default:function(){return q}});var a=o(66252),s=o(3577);const i=t=>((0,a.dD)("data-v-43e1245c"),t=t(),(0,a.Cn)(),t),n=i((()=>(0,a._)("hr",null,null,-1))),r={key:0,class:"alert alert-danger"},c={key:1,class:"col-sm-12 text-center"},l=["src"],d={class:"d-grid gap-3 d-grid-template-1fr-19"},u={class:"text-center mt-3"},h={class:"pagination w-100"};function p(t,e,i,p,m,g){const k=(0,a.up)("BooksFilter"),b=(0,a.up)("BookCard"),y=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("main",null,[(0,a.Wm)(k,{sections:m.sections,toggleActiveFilter:g.toggleActiveFilter,searchBookByName:g.searchBookByName,filterBooks:g.filterBooks},null,8,["sections","toggleActiveFilter","searchBookByName","filterBooks"]),n,m.empty?((0,a.wg)(),(0,a.iD)("div",r,(0,s.zw)(m.empty),1)):(0,a.kq)("",!0),m.loading&&m.books.length<=0?((0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("img",{src:o(79885),alt:"loader",style:{height:"100px"}},null,8,l)])):((0,a.wg)(),(0,a.iD)(a.HY,{key:2},[(0,a._)("div",d,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(m.books,(t=>((0,a.wg)(),(0,a.j4)(b,{key:t.id,cardInfo:t,onUpdateUserBook:g.updateUserBook},null,8,["cardInfo","onUpdateUserBook"])))),128))]),(0,a._)("div",u,[(0,a._)("ul",h,[1!=i.page?((0,a.wg)(),(0,a.j4)(y,{key:0,class:"page-item page-link",to:{name:"osboha.book",query:{page:i.page-1}},rel:"prev"},{default:(0,a.w5)((()=>[(0,a.Uk)(" السابق ")])),_:1},8,["to"])):(0,a.kq)("",!0),(0,a._)("li",{class:(0,s.C_)(["page-item page-link",g.checkActive(i.page)])},[(0,a.Wm)(y,{class:"page-item page-link",to:{name:"osboha.book",query:{page:i.page}}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(i.page),1)])),_:1},8,["to"])],2),g.hasNextPage?((0,a.wg)(),(0,a.j4)(y,{key:1,class:"page-item page-link",to:{name:"osboha.book",query:{page:i.page+1}},rel:"next"},{default:(0,a.w5)((()=>[(0,a.Uk)(" التالي ")])),_:1},8,["to"])):(0,a.kq)("",!0)])])],64))])}var m=o(43144),g=(o(64043),o(61514),o(70560),o(82908)),k=o(49963);const b=t=>((0,a.dD)("data-v-2ac3f541"),t=t(),(0,a.Cn)(),t),y={class:"container"},v={class:"row mb-3"},f={class:"container"},_={class:"row d-flex justify-content-center mt-5"},w={class:"col-12"},B={class:"card"},C=b((()=>(0,a._)("div",{class:"card-title"},[(0,a._)("h3",{class:"font-weight-bold text-center"},"البحث عن الكتب")],-1))),S=b((()=>(0,a._)("hr",null,null,-1))),I={class:"container row d-inline text-center m-auto"},A=["onClick"],$={class:"mt-3 inputs"},D=b((()=>(0,a._)("i",{class:"material-symbols-outlined"}," search ",-1))),Z={class:"row mb-3"},x={class:"col-4"},F={class:"col-4"},U={class:"col-4"};function R(t,e,o,i,n,r){return(0,a.wg)(),(0,a.iD)("div",y,[(0,a._)("div",v,[(0,a._)("div",f,[(0,a._)("div",_,[(0,a._)("div",w,[(0,a._)("div",B,[C,S,(0,a._)("div",I,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.sections,(t=>((0,a.wg)(),(0,a.iD)("span",{class:"col-lg-1 col-md-1 col-sm-2 text-center",key:t.section_id,onClick:e=>r.filterResults(t.section_id)},[(0,a._)("span",{class:(0,s.C_)(["btn button-60 mr-2 mt-1",r.checkActive(t.active)])},(0,s.zw)(t.section),3)],8,A)))),128))]),(0,a._)("div",$,[D,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",placeholder:" ... ابحث عن كتاب","onUpdate:modelValue":e[0]||(e[0]=t=>n.searchModel=t),onKeyup:e[1]||(e[1]=t=>o.searchBookByName(n.searchModel))},null,544),[[k.nr,n.searchModel,void 0,{trim:!0}]])])])])])])]),(0,a._)("div",Z,[(0,a._)("div",x,[(0,a._)("button",{class:"button-53",role:"button",style:{"background-color":"#77d792"},onClick:e[2]||(e[2]=t=>r.filterResults(r.recentAddedBooks))}," مضاف حديثًا ")]),(0,a._)("div",F,[(0,a._)("button",{class:"button-53",role:"button",style:{"background-color":"#0a6681"},onClick:e[3]||(e[3]=t=>r.filterResults(r.mostReadableBooks))}," الأكثر قراءة ")]),(0,a._)("div",U,[(0,a._)("button",{class:"button-53 animated-btn",role:"button",style:{"background-color":"#f9c93e",color:"black"},onClick:e[4]||(e[4]=t=>r.filterResults(r.randomBook))}," اختر لي كتاباً ")])])])}var T={name:"Books Filter",components:{},props:{sections:{type:Object},toggleActiveFilter:{type:Function},searchBookByName:{type:Function},filterBooks:{type:Function}},data(){return{searchModel:""}},methods:{checkActive(t){return t?"active":""},filterResults(t){this.searchModel="",this.filterBooks(t)}},computed:{recentAddedBooks(){return this.sections.length+1},mostReadableBooks(){return this.recentAddedBooks+1},randomBook(){return this.mostReadableBooks+1}}},L=o(83744);const M=(0,L.Z)(T,[["render",R],["__scopeId","data-v-2ac3f541"]]);var N=M,P=o(34964),z=o(8209),E={name:"Book",components:{BookCard:g.Z,BooksFilter:N},created(){(0,a.m0)((()=>{this.search?this.searchBookByName(this.search):this.selectedSection>0&&this.selectedSection<this.sections.length?this.filterBooks(this.selectedSection):this.selectedSection<this.sections.length&&this.getBooks(this.page)}))},props:["page"],data(){return{books:[],totalBooks:0,current:1,booksPerPage:9,search:"",empty:"",selectedSection:0,lastSelectedSection:0,loading:!1,sections:[{section_id:0,section:"الكل",active:!0},{section_id:1,section:"بسيط",level:"simple",active:!1},{section_id:2,section:"متوسط",level:"intermediate",active:!1},{section_id:3,section:"عميق",level:"advanced",active:!1},{section_id:4,section:"عربي",lang:"arabic",active:!1},{section_id:5,section:"إنجليزي",lang:"english",active:!1}],timer:null}},methods:{async getBooks(t){this.empty="",this.loading=!0;try{const e=await P.Z.getAll(t);this.books=e.books,this.totalBooks=e.total,this.current=this.page}catch(e){z.Z.toggleToast("حدث خطأ ما, يرجى المحاولة مرة أخرى","error")}finally{this.loading=!1}},async filterBooks(t){this.empty="",this.toggleActiveFilter(t);let e=null;t<this.sections.length?(this.lastSelectedSection!=t&&this.$router.push({name:"osboha.book",query:{page:1}}),0===Number(t)?this.getBooks(this.page):t>0&&t<4?e=await P.Z.getBooksByLevel(this.sections[t].level,this.page):t>=4&&(e=await P.Z.getBooksByLanguage(this.sections[t].lang,this.page)),this.lastSelectedSection=t):(this.$router.push({name:"osboha.book",query:{page:1}}),t==this.recentAddedBooks?e=await P.Z.getRecentAddedBooks():t==this.mostReadableBooks?e=await P.Z.getMostReadableBooks():t==this.randomBook&&(e=await P.Z.getRandomBook())),e&&t<=this.sections.length?(this.books=e.books,this.totalBooks=e.total,this.current=this.page):e&&t>this.sections.length?(this.books=e.length>1?e:[e],this.totalBooks=e.length,this.current=this.page):(this.empty="لا يوجد كتب!",this.books=[])},async searchBookByName(t){this.empty="",this.timer&&(clearTimeout(this.timer),this.timer=null),t?(this.search=t,this.timer=setTimeout((async()=>{this.loading=!0;try{const t=await P.Z.getBooksByName(this.search,this.page);(null===t||void 0===t?void 0:t.total)>0?(this.books=t.books,this.totalBooks=t.total,this.current=this.page):(this.empty="لا يوجد كتاب بهذا الاسم",this.books=[])}catch(t){z.Z.toggleToast("حدث خطأ ما, يرجى المحاولة مرة أخرى","error")}finally{this.loading=!1}}),500)):this.search=""},checkActive(t){let e="";return this.current==t?e="active":e+=" done",e},toggleActiveFilter(t){this.sections=this.sections.map((e=>Number(e.section_id)===Number(t)?(0,m.Z)((0,m.Z)({},e),{},{active:!0}):(0,m.Z)((0,m.Z)({},e),{},{active:!1}))),this.selectedSection=t},updateUserBook(t,e){this.books=this.books.map((o=>Number(o.id)===Number(t)?(0,m.Z)((0,m.Z)({},o),{},{userBooks:e?[e]:[]}):o))}},computed:{hasNextPage(){return this.page<this.totalPages},totalPages(){return Math.ceil(this.totalBooks/this.booksPerPage)},recentAddedBooks(){return this.sections.length+1},mostReadableBooks(){return this.recentAddedBooks+1},randomBook(){return this.mostReadableBooks+1}}};const j=(0,L.Z)(E,[["render",p],["__scopeId","data-v-43e1245c"]]);var q=j},27413:function(t,e,o){var a=o(44201),s=a("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(o){try{return e[s]=!1,"/./"[t](e)}catch(a){}}return!1}},42124:function(t,e,o){var a=o(91245),s=TypeError;t.exports=function(t){if(a(t))throw new s("The method doesn't accept regular expressions");return t}},76801:function(t,e,o){var a=o(79989),s=o(84328).includes,i=o(3689),n=o(87370),r=i((function(){return!Array(1).includes()}));a({target:"Array",proto:!0,forced:r},{includes:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),n("includes")},43843:function(t,e,o){var a=o(79989),s=o(68844),i=o(42124),n=o(74684),r=o(34327),c=o(27413),l=s("".indexOf);a({target:"String",proto:!0,forced:!c("includes")},{includes:function(t){return!!~l(r(n(this)),r(i(t)),arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=4499.8453c356.js.map