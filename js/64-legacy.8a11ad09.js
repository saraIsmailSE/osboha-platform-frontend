"use strict";(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[64],{96444:function(e,t,n){var r=n(50124),a=n(48534),s=n(13087),i=n(62833),c=n(66252),u=n(24150),o=function(){function e(){(0,s.Z)(this,e)}return(0,i.Z)(e,[{key:"getAllFriends",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.hi.get("friends/user/".concat(t));case 3:return n=e.sent,e.abrupt("return",n.data.data);case 7:e.prev=7,e.t0=e["catch"](0),(0,c.S3)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getFriendsRequests",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.hi.get("/friends/un-accepted");case 3:return t=e.sent,e.abrupt("return",t.data.data);case 7:e.prev=7,e.t0=e["catch"](0),(0,c.S3)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"create",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.hi.post("/friends/create",{friend_id:t});case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e["catch"](0),(0,c.S3)(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getFriendshipById",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.hi.post("/friends/show",{friendship_id:t});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e["catch"](0),(0,c.S3)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"accept",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.hi.get("/friends/accept/".concat(t));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e["catch"](0),(0,c.S3)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"acceptAll",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.hi.get("/friends/accept-all");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e["catch"](0),(0,c.S3)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"deleteAllUnAccepted",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.hi.get("/friends/delete-all-unaccepted");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e["catch"](0),(0,c.S3)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"delete",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a,s;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new FormData,a.append("user_id",t),a.append("friend_id",n),e.prev=3,e.next=6,u.hi.post("/friends/delete",a);case 6:return s=e.sent,e.abrupt("return",s.data);case 10:e.prev=10,e.t0=e["catch"](3),(0,c.S3)(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));function t(t,n){return e.apply(this,arguments)}return t}()}]),e}();t.Z=new o},80064:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var r=n(66252),a=n(3577),s=n(15584),i={class:"row"},c={class:"col-sm-12"},u=(0,r._)("h4",{class:"card-title"},"طلبات الصداقة",-1),o={key:0,class:"request-request request-inline m-0 p-0"},l=(0,r._)("i",{role:"button",class:"material-symbols-outlined align-middle"}," done ",-1),p=(0,r._)("i",{role:"button",class:"material-symbols-outlined align-middle"}," delete ",-1),d={class:"flex-grow-1 ms-2"},f={class:"d-flex align-items-center mt-2 mt-md-0"},h=["onClick"],m=["onClick"],v={key:0,class:"d-block text-center mb-0 pb-0"},w={key:1,class:"col-sm-12"},g=(0,r._)("div",{class:"iq-card-body p-0"},[(0,r._)("div",{class:"image-block text-center"},[(0,r._)("img",{src:s,class:"img-fluid rounded w-50",alt:"blog-img"})]),(0,r._)("h4",{class:"text-center mt-3 mb-3"},"لا يوجد طلبات صداقة")],-1);function Z(e,t,n,s,Z,b){var _=(0,r.up)("BaseAvatar"),k=(0,r.up)("router-link"),x=(0,r.up)("iq-card");return(0,r.wg)(),(0,r.iD)("div",i,[(0,r._)("div",c,[(0,r.Wm)(x,null,{headerTitle:(0,r.w5)((function(){return[u]})),body:(0,r.w5)((function(){return[b.requestsLoaded.length>0?((0,r.wg)(),(0,r.iD)("ul",o,[(0,r._)("span",{role:"button",class:"btn btn-primary mb-3",style:{direction:"rtl !important"},onClick:t[0]||(t[0]=function(e){return b.acceptAll()})},[l,(0,r.Uk)(" قبول الكل ")]),(0,r._)("span",{role:"button",class:"btn btn-danger ms-2 mb-3",style:{direction:"rtl !important"},onClick:t[1]||(t[1]=function(e){return b.deleteAllUnAccepted()})},[p,(0,r.Uk)(" رفض الكل ")]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(b.requestsLoaded,(function(t,n){return(0,r.wg)(),(0,r.iD)("li",{class:"d-flex align-items-center justify-content-between flex-wrap",key:n},[(0,r.Wm)(_,{profileImg:t.user.user_profile.profile_picture,profile_id:t.user.user_profile.id,title:t.user.name,gender:t.user.gender,avatarClass:"rounded-circle avatar-40",containerClass:"flex-shrink-0"},null,8,["profileImg","profile_id","title","gender"]),(0,r._)("div",d,[(0,r.Wm)(k,{to:{name:"user.profile",params:{user_id:t.user.id}}},{default:(0,r.w5)((function(){return[(0,r._)("h6",null,(0,a.zw)(t.user.name),1),(0,r._)("small",null,(0,a.zw)(e.formatDateToWritten(t.created_at)),1)]})),_:2},1032,["to"]),(0,r._)("div",f,[(0,r._)("span",{role:"button",class:"btn btn-primary ms-2 mb-3",style:{direction:"rtl !important"},onClick:function(e){return b.acceptrequest(t.id)}}," قبول ",8,h),(0,r._)("span",{role:"button",class:"btn btn-secondary ms-2 mb-3",style:{direction:"rtl !important"},onClick:function(e){return b.deleterequest(t.user_id,t.friend_id)}}," رفض ",8,m)])])])})),128)),Z.friendRequest.length>Z.length?((0,r.wg)(),(0,r.iD)("li",v,[(0,r._)("a",{class:"me-3 btn",role:"button",onClick:t[2]||(t[2]=function(e){return b.loadMore()})},"عرض المزيد")])):(0,r.kq)("",!0)])):((0,r.wg)(),(0,r.iD)("div",w,[(0,r.Wm)(x,{class:"iq-card"},{default:(0,r.w5)((function(){return[g]})),_:1})]))]})),_:1})])])}var b=n(95082),_=n(50124),k=n(48534),x=(n(89730),n(96444)),y=n(31025),q={name:"FriendRequest",created:function(){var e=this;return(0,k.Z)((0,_.Z)().mark((function t(){return(0,_.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,x.Z.getFriendsRequests();case 2:e.friendRequest=t.sent;case 3:case"end":return t.stop()}}),t)})))()},data:function(){return{friendRequest:[],length:10}},methods:(0,b.Z)((0,b.Z)({},y.Z),{},{acceptrequest:function(e){var t=this;x.Z.accept(e).then(function(){var e=(0,k.Z)((0,_.Z)().mark((function e(n){return(0,_.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return y.Z.toggleToast("تم قبول الطلب","success"),e.next=3,x.Z.getFriendsRequests();case 3:t.friendRequest=e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},deleterequest:function(e,t){var n=this;x.Z.delete(e,t).then(function(){var e=(0,k.Z)((0,_.Z)().mark((function e(t){return(0,_.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return y.Z.toggleToast("تم الحذف","success"),e.next=3,x.Z.getFriendsRequests();case 3:n.friendRequest=e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},loadMore:function(){this.length>this.friendRequest.length||(this.length=this.length+10)},acceptAll:function(){var e=this,t=this.$swal.mixin({customClass:{confirmButton:"btn btn-primary btn-lg",cancelButton:"btn btn-outline-primary btn-lg ms-2"},buttonsStyling:!1});t.fire({title:"هل أنت متأكد؟",text:"لا يمكنك التراجع عن هذا الاجراء",icon:"warning",showCancelButton:!0,confirmButtonText:"نعم، قم بالقبول",cancelButtonText:"تراجع  ",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}).then((function(t){t.isConfirmed&&x.Z.acceptAll().then(function(){var t=(0,k.Z)((0,_.Z)().mark((function t(n){return(0,_.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return y.Z.toggleToast("تم قبول جميع الطلبات","success"),t.next=3,x.Z.getFriendsRequests();case 3:e.friendRequest=t.sent;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}))},deleteAllUnAccepted:function(){var e=this,t=this.$swal.mixin({customClass:{confirmButton:"btn btn-primary btn-lg",cancelButton:"btn btn-outline-primary btn-lg ms-2"},buttonsStyling:!1});t.fire({title:"هل أنت متأكد؟",text:"لا يمكنك التراجع عن هذا الاجراء",icon:"warning",showCancelButton:!0,confirmButtonText:"نعم، قم بالحذف",cancelButtonText:"تراجع  ",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}).then((function(t){t.isConfirmed&&x.Z.deleteAllUnAccepted().then(function(){var t=(0,k.Z)((0,_.Z)().mark((function t(n){return(0,_.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return y.Z.toggleToast("تم حذف جميع الطلبات","success"),t.next=3,x.Z.getFriendsRequests();case 3:e.friendRequest=t.sent;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}))}}),computed:{requestsLoaded:function(){return this.friendRequest.slice(0,this.length)}}},C=n(83744);const R=(0,C.Z)(q,[["render",Z]]);var A=R},15584:function(e,t,n){e.exports=n.p+"img/no-friend-req.36ea3495.png"}}]);
//# sourceMappingURL=64-legacy.8a11ad09.js.map