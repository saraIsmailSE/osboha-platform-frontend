"use strict";(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[9591],{89591:function(e,o,l){l.r(o),l.d(o,{default:function(){return Le}});var r=l(66252),t=l(49963),i=l(3577),n=l(8584),s=l(79885),a={class:"col-sm-12 mt-3"},u=(0,r._)("div",{class:"iq-card-header-toolbar d-flex text-center align-items-center mx-auto"},[(0,r._)("h1",{class:"text-center mt-3 mb-3"},"اضافة كتاب")],-1),d=(0,r._)("div",{class:"iq-card-body p-4"},[(0,r._)("div",{class:"image-block text-center mt-3"},[(0,r._)("img",{class:"img-fluid rounded w-75",src:n,alt:"add-group"})])],-1),c={class:"col-12 bg-white pt-2"},m={class:"sign-in-from"},k=(0,r._)("small",{style:{color:"red"}}," * الحقل مطلوب",-1),b={class:"form-group"},f=(0,r._)("label",{for:"bookName"},"* اسم الكتاب",-1),p={key:0,style:{color:"red"}},g={class:"form-group"},_={for:"bookDescription"},h={key:0},v={key:0,style:{color:"red"}},y={class:"form-group"},$={for:"bookAuther"},w={key:0},F={key:0,style:{color:"red"}},q={class:"form-group"},x={for:"bookPublisher"},D={key:0},U={key:0,style:{color:"red"}},V={class:"form-group"},C={for:"bookLink"},Z={key:0},A={key:0,style:{color:"red"}},B={class:"form-group"},T=(0,r._)("label",{for:"bookStartPage"},"* صفحة البداية",-1),L={key:0,style:{color:"red"}},M={class:"form-group"},P=(0,r._)("label",{for:"bookEndPage"},"* صفحة النهاية",-1),S={key:0,style:{color:"red"}},z={class:"form-group"},K={for:"bookType"},O={key:0},R=(0,r._)("option",{value:"0",selected:""},"اختر نوع الكتاب",-1),H=["value"],I=(0,r._)("option",{value:"0",selected:""},"كتاب حر",-1),E=[I],N={key:2,style:{color:"red"}},Y={class:"form-group"},j={for:"bookLevel"},G={key:0},W=(0,r._)("option",{value:"0",selected:""},"اختر مستوى الكتاب",-1),J=["value"],Q={key:0,style:{color:"red"}},X={class:"form-group col-12"},ee={key:0},oe=(0,r._)("option",{value:"0",selected:""},"اختر قسم الكتاب",-1),le=["value"],re={key:0,style:{color:"red"}},te={class:"form-group col-12"},ie={key:0},ne=(0,r._)("option",{value:"0",selected:""},"اختر لغة الكتاب",-1),se=["value"],ae={key:0,style:{color:"red"}},ue={class:"form-group col-12"},de=(0,r._)("h4",null,"صورة الكتاب",-1),ce={key:0,class:"text-center my-2",style:{color:"red"}},me=(0,r._)("span",{class:"align-middle material-symbols-outlined"}," keyboard_return ",-1),ke={key:2,class:"col-sm-12 text-center"},be=(0,r._)("p",{class:"text-center"},"جاري الاضافة",-1),fe=(0,r._)("img",{src:s,alt:"loader",style:{height:"100px"}},null,-1),pe=[be,fe],ge={key:3,class:"d-inline-block w-100"},_e=["disabled"];function he(e,o,l,n,s,I){var be=(0,r.up)("router-link"),fe=(0,r.up)("iq-card");return(0,r.wg)(),(0,r.iD)("div",a,[(0,r.Wm)(fe,{class:"iq-card"},{default:(0,r.w5)((function(){return[u,d,(0,r._)("div",c,[(0,r._)("div",m,[(0,r._)("form",{class:"mt-2",onSubmit:o[13]||(o[13]=(0,t.iM)((function(e){return I.onSubmit()}),["prevent"]))},[k,(0,r._)("div",b,[f,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=function(e){return n.v$.bookForm.name.$model=e}),class:"form-control mb-0",id:"bookName",placeholder:" اسم الكتاب"},null,512),[[t.nr,n.v$.bookForm.name.$model]]),n.v$.bookForm.name.$error?((0,r.wg)(),(0,r.iD)("small",p," اسم الكتاب مطلوب")):(0,r.kq)("",!0)]),(0,r._)("div",g,[(0,r._)("label",_,[I.shouldfFill?((0,r.wg)(),(0,r.iD)("span",h,"*")):(0,r.kq)("",!0),(0,r.Uk)(" وصف الكتاب")]),(0,r.wy)((0,r._)("textarea",{type:"text","onUpdate:modelValue":o[1]||(o[1]=function(e){return n.v$.bookForm.brief.$model=e}),class:"form-control mb-0",id:"bookDescription",placeholder:"وصف الكتاب ",style:(0,i.j5)([{"padding-right":"1rem !important"},{direction:"rtl","max-height":"120px",resize:"none",overflow:"auto"}]),rows:1,ref:"bodyRef"},null,512),[[t.nr,n.v$.bookForm.brief.$model]]),n.v$.bookForm.brief.$error?((0,r.wg)(),(0,r.iD)("small",v,"وصف الكتاب مطلوب")):(0,r.kq)("",!0)]),(0,r._)("div",y,[(0,r._)("label",$,[I.shouldfFill?((0,r.wg)(),(0,r.iD)("span",w,"*")):(0,r.kq)("",!0),(0,r.Uk)(" الكاتب")]),(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=function(e){return n.v$.bookForm.writer.$model=e}),class:"form-control mb-0",id:"bookAuther",placeholder:"اسم الكاتب "},null,512),[[t.nr,n.v$.bookForm.writer.$model]]),n.v$.bookForm.writer.$error?((0,r.wg)(),(0,r.iD)("small",F,"اسم الكاتب مطلوب")):(0,r.kq)("",!0)]),(0,r._)("div",q,[(0,r._)("label",x,[I.shouldfFill?((0,r.wg)(),(0,r.iD)("span",D,"*")):(0,r.kq)("",!0),(0,r.Uk)(" دار النشر")]),(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=function(e){return n.v$.bookForm.publisher.$model=e}),class:"form-control mb-0",id:"bookPublisher",placeholder:"دار النشر "},null,512),[[t.nr,n.v$.bookForm.publisher.$model]]),n.v$.bookForm.publisher.$error?((0,r.wg)(),(0,r.iD)("small",U,"دار النشر مطلوبة")):(0,r.kq)("",!0)]),(0,r._)("div",V,[(0,r._)("label",C,[I.shouldfFill?((0,r.wg)(),(0,r.iD)("span",Z,"*")):(0,r.kq)("",!0),(0,r.Uk)(" رابط الكتاب")]),(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=function(e){return n.v$.bookForm.link.$model=e}),class:"form-control mb-0",id:"bookLink",placeholder:"رابط الكتاب "},null,512),[[t.nr,n.v$.bookForm.link.$model]]),n.v$.bookForm.link.$error?((0,r.wg)(),(0,r.iD)("small",A,"رابط الكتاب مطلوب")):(0,r.kq)("",!0)]),(0,r._)("div",B,[T,(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":o[5]||(o[5]=function(e){return n.v$.bookForm.start_page.$model=e}),class:"form-control mb-0",id:"bookStartPage",placeholder:"صفحة البداية "},null,512),[[t.nr,n.v$.bookForm.start_page.$model]]),n.v$.bookForm.start_page.$error?((0,r.wg)(),(0,r.iD)("small",L,"صفحة البداية مطلوبة")):(0,r.kq)("",!0)]),(0,r._)("div",M,[P,(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":o[6]||(o[6]=function(e){return n.v$.bookForm.end_page.$model=e}),class:"form-control mb-0",id:"bookEndPage",placeholder:"صفحة النهاية "},null,512),[[t.nr,n.v$.bookForm.end_page.$model]]),n.v$.bookForm.end_page.$error?((0,r.wg)(),(0,r.iD)("small",S,"صفحة النهاية مطلوبة")):(0,r.kq)("",!0)]),(0,r._)("div",z,[(0,r._)("label",K,[I.shouldfFill?((0,r.wg)(),(0,r.iD)("span",O,"*")):(0,r.kq)("",!0),(0,r.Uk)(" نوع الكتاب")]),I.shouldfFill?(0,r.wy)(((0,r.wg)(),(0,r.iD)("select",{key:0,"onUpdate:modelValue":o[7]||(o[7]=function(e){return n.v$.bookForm.type_id.$model=e}),class:"form-select","data-trigger":"",name:"choices-single-default",id:"choices-single-default"},[R,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.types,(function(e,o){return(0,r.wg)(),(0,r.iD)("option",{key:o,value:e.id},(0,i.zw)(s.BOOK_Types[e.type]),9,H)})),128))],512)),[[t.bM,n.v$.bookForm.type_id.$model]]):(0,r.wy)(((0,r.wg)(),(0,r.iD)("select",{key:1,"onUpdate:modelValue":o[8]||(o[8]=function(e){return n.v$.bookForm.type_id.$model=e}),class:"form-select","data-trigger":"",name:"choices-single-default",id:"choices-single-default",disabled:""},E,512)),[[t.bM,n.v$.bookForm.type_id.$model]]),n.v$.bookForm.type_id.$error?((0,r.wg)(),(0,r.iD)("small",N,"نوع الكتاب مطلوب")):(0,r.kq)("",!0)]),(0,r._)("div",Y,[(0,r._)("label",j,[I.shouldfFill?((0,r.wg)(),(0,r.iD)("span",G,"*")):(0,r.kq)("",!0),(0,r.Uk)(" مستوى الكتاب")]),(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":o[9]||(o[9]=function(e){return n.v$.bookForm.level_id.$model=e}),class:"form-select","data-trigger":"",name:"choices-single-default",id:"choices-single-default"},[W,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.bookLevels,(function(e,o){return(0,r.wg)(),(0,r.iD)("option",{key:o,value:e.id},(0,i.zw)(e.arabic_level),9,J)})),128))],512),[[t.bM,n.v$.bookForm.level_id.$model]]),n.v$.bookForm.level_id.$error?((0,r.wg)(),(0,r.iD)("small",Q,"مستوى الكتاب مطلوب")):(0,r.kq)("",!0)]),(0,r._)("div",X,[(0,r._)("h4",null,[(0,r.Uk)(" قسم الكتاب "),I.shouldfFill?((0,r.wg)(),(0,r.iD)("span",ee,"*")):(0,r.kq)("",!0)]),(0,r.wy)((0,r._)("select",{class:"form-select mt-2","data-trigger":"",name:"section",id:"section","onUpdate:modelValue":o[10]||(o[10]=function(e){return n.v$.bookForm.section_id.$model=e})},[oe,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.sections,(function(e){return(0,r.wg)(),(0,r.iD)("option",{key:e.id,value:e.id},(0,i.zw)(e.section),9,le)})),128))],512),[[t.bM,n.v$.bookForm.section_id.$model]]),n.v$.bookForm.section_id.$error?((0,r.wg)(),(0,r.iD)("small",re,"قسم الكتاب مطلوب")):(0,r.kq)("",!0)]),(0,r._)("div",te,[(0,r._)("h4",null,[(0,r.Uk)(" لغة الكتاب "),I.shouldfFill?((0,r.wg)(),(0,r.iD)("span",ie,"*")):(0,r.kq)("",!0)]),(0,r.wy)((0,r._)("select",{class:"form-select mt-2","data-trigger":"",name:"section",id:"section","onUpdate:modelValue":o[11]||(o[11]=function(e){return n.v$.bookForm.language_id.$model=e})},[ne,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.languages,(function(e){return(0,r.wg)(),(0,r.iD)("option",{key:e.id,value:e.id},(0,i.zw)(s.LANUAGES[e.language]),9,se)})),128))],512),[[t.bM,n.v$.bookForm.language_id.$model]]),n.v$.bookForm.language_id.$error?((0,r.wg)(),(0,r.iD)("small",ae,"لغة الكتاب مطلوبة")):(0,r.kq)("",!0)]),(0,r._)("div",ue,[de,(0,r._)("input",{class:"form-control mt-2",type:"file",name:"book_media",id:"book_media",ref:"book_media",accept:"image/*",onChange:o[12]||(o[12]=function(){return I.uploadFile&&I.uploadFile.apply(I,arguments)})},null,544)]),s.message?((0,r.wg)(),(0,r.iD)("p",ce,(0,i.zw)(s.message),1)):(0,r.kq)("",!0),s.book_id?((0,r.wg)(),(0,r.j4)(be,{key:1,class:"mb-3 text-center d-block w-100",to:{name:"book.book-details",params:{book_id:s.book_id}}},{default:(0,r.w5)((function(){return[(0,r.Uk)(" عرض الكتاب "),me]})),_:1},8,["to"])):(0,r.kq)("",!0),s.loading?((0,r.wg)(),(0,r.iD)("div",ke,pe)):((0,r.wg)(),(0,r.iD)("div",ge,[(0,r._)("button",{type:"submit",class:"btn btn-primary float-end",disabled:s.loading}," اضافة ",8,_e)]))],32)])])]})),_:1})])}var ve=l(50124),ye=l(48534),$e=(l(70560),l(5705)),we=l(10760),Fe=l(34964),qe=l(45347),xe=l(65913),De=l(94140),Ue=l(92176),Ve=l(60351),Ce=l(49579),Ze=function(e){return e>0},Ae={name:"Create Book",setup:function(){return{v$:(0,$e.ZP)()}},created:function(){var e=this;return(0,ye.Z)((0,ve.Z)().mark((function o(){return(0,ve.Z)().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,De.Z.getAll();case 2:return e.bookLevels=o.sent,o.next=5,Ue.Z.getAll();case 5:return e.sections=o.sent,e.sections=e.sections.data,o.next=9,xe.Z.getAll();case 9:return e.languages=o.sent,o.next=12,qe.Z.getAllBookTypes();case 12:e.types=o.sent;case 13:case"end":return o.stop()}}),o)})))()},watch:{bookBrief:function(){var e=this;this.$refs.bodyRef.style.height="auto",this.$nextTick((function(){e.$refs.bodyRef.style.height=e.$refs.bodyRef.scrollHeight+"px"}))}},computed:{shouldfFill:function(){return this.isAdmin||this.inBooksTeam},bookBrief:function(){return this.bookForm.brief},user:function(){return this.$store.getters.getUser},inBooksTeam:function(){return Ce.Z.hasRole(this.user,"book_quality_team")},isAdmin:function(){return Ce.Z.hasRole(this.user,"admin")}},data:function(){return{types:[],bookLevels:[],sections:[],languages:[],LANUAGES:Ve.jx,BOOK_Types:Ve.Wx,bookForm:{book_media:null,name:"",writer:"",publisher:"",brief:"",link:"",start_page:0,end_page:0,section_id:0,level_id:0,type_id:0,language_id:0,is_free:0},message:"",loading:!1,currentMedia:null,book_id:0}},validations:function(){return{bookForm:{name:{required:we.C1},writer:{required:(0,we.CF)((function(){return!!this.shouldfFill}))},publisher:{required:(0,we.CF)((function(){return!!this.shouldfFill}))},brief:{required:(0,we.CF)((function(){return!!this.shouldfFill}))},link:{required:(0,we.CF)((function(){return!!this.shouldfFill}))},start_page:{required:we.C1,maxValue:Ze},end_page:{required:we.C1,maxValue:Ze},type_id:{required:(0,we.CF)((function(){return!!this.shouldfFill})),maxValue:this.selectItem},level_id:{required:(0,we.CF)((function(){return!!this.shouldfFill})),maxValue:this.selectItem},language_id:{required:(0,we.CF)((function(){return!!this.shouldfFill})),maxValue:this.selectItem},section_id:{required:(0,we.CF)((function(){return!!this.shouldfFill})),maxValue:this.selectItem}}}},methods:{selectItem:function(e){return!this.isAdmin&&!this.inBooksTeam||e>0},uploadFile:function(e){this.bookForm.book_media=e.target.files[0]},onSubmit:function(){var e=this;return(0,ye.Z)((0,ve.Z)().mark((function o(){var l;return(0,ve.Z)().wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(e.v$.$touch(),e.v$.bookForm.$invalid){o.next=19;break}return e.loading=!0,o.prev=3,o.next=6,Fe.Z.create(e.bookForm);case 6:l=o.sent,e.book_id=l.id,e.message=" تم لاضافة - سيتم تحويلك لصفحة الكتاب",setTimeout((function(){e.$router.push({name:"book.book-details",params:{book_id:e.book_id}})}),3e3),o.next=16;break;case 12:o.prev=12,o.t0=o["catch"](3),e.message="حصل خطأ - لم يتم الاضافة!",console.log(o.t0);case 16:return o.prev=16,e.loading=!1,o.finish(16);case 19:case"end":return o.stop()}}),o,null,[[3,12,16,19]])})))()}}},Be=l(83744);const Te=(0,Be.Z)(Ae,[["render",he]]);var Le=Te}}]);
//# sourceMappingURL=9591-legacy.1c3b2cf9.js.map