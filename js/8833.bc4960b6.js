(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[8833],{20425:function(t){!function(e,a){t.exports=a()}(0,(function(){var t="__v-click-outside",e="undefined"!=typeof window,a="undefined"!=typeof navigator,r=e&&("ontouchstart"in window||a&&navigator.msMaxTouchPoints>0)?["touchstart"]:["click"],n=function(t){var e=t.event,a=t.handler;(0,t.middleware)(e)&&a(e)},s=function(e,a){var s=function(t){var e="function"==typeof t;if(!e&&"object"!=typeof t)throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:e?t:t.handler,middleware:t.middleware||function(t){return t},events:t.events||r,isActive:!(!1===t.isActive),detectIframe:!(!1===t.detectIframe),capture:Boolean(t.capture)}}(a.value),i=s.handler,o=s.middleware,c=s.detectIframe,d=s.capture;if(s.isActive){if(e[t]=s.events.map((function(t){return{event:t,srcTarget:document.documentElement,handler:function(t){return function(t){var e=t.el,a=t.event,r=t.handler,s=t.middleware,i=a.path||a.composedPath&&a.composedPath();(i?i.indexOf(e)<0:!e.contains(a.target))&&n({event:a,handler:r,middleware:s})}({el:e,event:t,handler:i,middleware:o})},capture:d}})),c){var u={event:"blur",srcTarget:window,handler:function(t){return function(t){var e=t.el,a=t.event,r=t.handler,s=t.middleware;setTimeout((function(){var t=document.activeElement;t&&"IFRAME"===t.tagName&&!e.contains(t)&&n({event:a,handler:r,middleware:s})}),0)}({el:e,event:t,handler:i,middleware:o})},capture:d};e[t]=[].concat(e[t],[u])}e[t].forEach((function(a){var r=a.event,n=a.srcTarget,s=a.handler;return setTimeout((function(){e[t]&&n.addEventListener(r,s,d)}),0)}))}},i=function(e){(e[t]||[]).forEach((function(t){return t.srcTarget.removeEventListener(t.event,t.handler,t.capture)})),delete e[t]},o=e?{beforeMount:s,updated:function(t,e){var a=e.value,r=e.oldValue;JSON.stringify(a)!==JSON.stringify(r)&&(i(t),s(t,{value:a}))},unmounted:i}:{};return{install:function(t){t.directive("click-outside",o)},directive:o}}))},96444:function(t,e,a){"use strict";var r=a(66252),n=a(24150);class s{async getAllFriends(t){try{const e=await n.hi.get(`friends/user/${t}`);return e.data.data}catch(e){(0,r.S3)(e)}}async getFriendsRequests(){try{const t=await n.hi.get("/friends/un-accepted");return t.data.data}catch(t){(0,r.S3)(t)}}async create(t){try{return await n.hi.post("/friends/create",{friend_id:t})}catch(e){(0,r.S3)(e)}}async getFriendshipById(t){try{const e=await n.hi.post("/friends/show",{friendship_id:t});return e.data}catch(e){(0,r.S3)(e)}}async accept(t){try{const e=await n.hi.get(`/friends/accept/${t}`);return e.data}catch(e){(0,r.S3)(e)}}async acceptAll(){try{const t=await n.hi.get("/friends/accept-all");return t.data}catch(t){(0,r.S3)(t)}}async deleteAllUnAccepted(){try{const t=await n.hi.get("/friends/delete-all-unaccepted");return t.data}catch(t){(0,r.S3)(t)}}async delete(t,e){const a=new FormData;a.append("user_id",t),a.append("friend_id",e);try{const t=await n.hi.post("/friends/delete",a);return t.data}catch(s){(0,r.S3)(s)}}}e.Z=new s},22658:function(t,e,a){"use strict";var r=a(66252),n=a(24150),s=a(79940);class i{async createGroup(t){try{const e=await n.hi.post("/group/create",t,{headers:{"Content-type":"multipart/form-data"}});return e.data.data}catch(e){(0,r.S3)(e)}}async getAll(t,e){try{const a=await n.hi.get(`/group?page=${e}&name=${t}`);return await a.data}catch(a){return a}}async searchGroupByName(t){try{const e=await n.hi.get(`group/search-group-by-name/${t}`);return await e.data}catch(e){return e}}async getById(t){try{const e=await n.hi.get(`group/show/${t}`);return e.data.data}catch(e){return e}}async showBasicInfo(t){try{const e=await n.hi.get(`group/show-basic-info/${t}`);return e.data.data}catch(e){return e}}async getBooks(t){try{const e=await n.hi.get(`group/books/${t}`);return e.data.data}catch(e){(0,r.S3)(e)}}async getAllGroupExceptions(t){try{const e=await n.hi.get(`group/group-exceptions/${t}`);return e.data.data}catch(e){return e}}async exceptionsFilter(t,e){try{const a=await n.hi.get(`group/exceptions-filter/${t}/${e}`);return a.data.data}catch(a){return a}}async BasicMarksView(t,e){try{const a=await n.hi.get(`group/basic-mark-view/${t}/${e}`);return a.data.data}catch(a){return a}}async AllAchievements(t,e){try{const a=await n.hi.get(`group/all-achievements/${t}/${e}`);return a.data.data}catch(a){return a}}async AchievementAsPages(t,e){try{const a=await n.hi.get(`group/achievement-as-pages/${t}/${e}`);return a.data.data}catch(a){return a}}async searchForAmbassadorAchievement(t,e,a){try{const r=await n.hi.get(`group/search-for-ambassador-achievement/${t}/${e}/${a}`);return r.data.data}catch(r){return r}}async searchForAmbassador(t,e){try{const a=await n.hi.get(`group/search-for-ambassador/${t}/${e}`);return a.data.data}catch(a){return a}}async createLeaderRequest(t){try{const e=await n.hi.post("/group/create-leader-request",t,{headers:{"Content-type":"multipart/form-data"}});return e.data.data}catch(e){return e}}async lastLeaderRequest(t){try{const e=await n.hi.get(`group/last-leader-request/${t}`);return e.data.data}catch(e){return e}}async deleteById(t){try{return await n.hi.delete(`/group/delete/${t}`)}catch(e){return e}}async update(t){try{const e=await n.hi.post("/group/update",t,{headers:{"Content-type":"multipart/form-data"}});return e.data.data}catch(e){(0,r.S3)(e)}}async getGroupByType(t){try{const e=await n.hi.get(`/group/group-by-type/${t}`);return e.data.data}catch(e){return e}}async userGroups(t,e){try{const a=await n.hi.get(`/group/user-groups?page=${e}&name=${t}`);return a.data}catch(a){return a}}async statistics(t){try{const e=await n.hi.get(`group/statistics/${t}`);return e.data.data}catch(e){(0,s.F)(e,"statistics")}}async thesesAndScreensByWeek(t,e){try{const a=await n.hi.get(`group/theses-and-screens-by-week/${t}/${e}`);return a.data.data}catch(a){(0,r.S3)(a)}}async monthAchievement(t,e){try{const a=await n.hi.get(`group/month-achievement/${t}/${e}`);return a.data.data}catch(a){(0,r.S3)(a)}}async assignAdministrator(t){try{const e=await n.hi.post("/group/assign-administrator",t,{headers:{"Content-type":"multipart/form-data"}});return e.data.data}catch(e){(0,r.S3)(e)}}}e.Z=new i},94918:function(t,e,a){"use strict";var r=a(66252),n=a(79940),s=a(24150);class i{constructor(){this.prefix="user-group"}async usersByGroupId(t){try{const e=await s.hi.get(`${this.prefix}/users/${t}`);return e.data.data}catch(e){return e}}async AddMember(t){try{const e=await s.hi.post(`${this.prefix}/add-member`,t,{headers:{"Content-type":"multipart/form-data"}});return e.data.data}catch(e){(0,n.F)(e,"UserGroupService.AddMember")}}async delete(t){try{return await s.hi.delete(`${this.prefix}/delete/${t}`)}catch(e){(0,r.S3)(e)}}async withdrawnMember(t){const e=new FormData;e.append("user_group_id",t);try{return await s.hi.post(`${this.prefix}/withdrawn`,e,{headers:{"Content-type":"multipart/form-data"}})}catch(a){(0,r.S3)(a)}}}e.Z=new i},60351:function(t,e,a){"use strict";a.d(e,{So:function(){return r},Wx:function(){return s},b5:function(){return o},gg:function(){return i},jx:function(){return n}});const r={ambassador:"سفير",leader:"قائد",supervisor:"مراقب",advisor:"موجه",consultant:"مستشار",admin:"ادارة",book_quality_team:"جودة الكتب"},n={arabic:"اللغة العربية",english:"اللغة الانجليزية"},s={normal:"منهج",ramadan:"رمضان",young:"يافعين",kids:"أطفال",tafseer:"تفسير",free:"كتاب حر"},i={January:"يناير",February:"فبراير",March:"مارس",April:"ابريل",May:"مايو",June:"يونيو",July:"يوليو",August:"أغسطس",September:"سبتمبر",October:"أكتوبر",November:"نوفمبر",December:"ديسمبر"},o={"01":"يناير","02":"فبراير","03":"مارس","04":"ابريل","05":"مايو","06":"يونيو","07":"يوليو","08":"أغسطس","09":"سبتمبر",10:"أكتوبر",11:"نوفمبر",12:"ديسمبر"}},79940:function(t,e,a){"use strict";a.d(e,{F:function(){return n}});a(70560);var r=a(1120);function n(t,e=""){throw console.log(`[ERROR] ${e} =>`,t.response.data),404===t.response.data.statusCode?r.Z.push({name:"NotFound"}):403===t.response.data.statusCode&&r.Z.push({name:"NotAuthorized"}),t}},98833:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return F}});a(76265);var r=a(66252),n=a(3577),s=a(76560);const i={class:"row"},o=(0,r._)("h4",{class:"card-title"},"قائمة الأعضاء",-1),c={key:0,class:"request-list list-inline m-0 p-0"},d=(0,r._)("br",null,null,-1),u={class:"rounded-pill badge lh-1 bg-primary px-2"},l={key:0,class:"d-flex justify-content-end flex-grow-1 ms-3"},h=["onClick"],p=["onClick"],m=(0,r._)("span",{class:"material-symbols-outlined me-2 md-18"}," delete ",-1),g=["onClick"],y=(0,r._)("span",{class:"material-symbols-outlined me-2 md-18"}," directions_run ",-1),f={key:0,class:"d-block text-center mb-0 pb-0"},w={key:1,class:"col-sm-12"},v=(0,r._)("div",{class:"iq-card-body p-0"},[(0,r._)("div",{class:"image-block text-center"},[(0,r._)("img",{src:s,class:"img-fluid rounded w-50",alt:"blog-img"})]),(0,r._)("h4",{class:"text-center mt-3 mb-3"},"لا يوجد أعضاء")],-1);function b(t,e,a,s,b,_){const $=(0,r.up)("BaseAvatar"),k=(0,r.up)("router-link"),A=(0,r.up)("iq-card");return(0,r.wg)(),(0,r.iD)("div",i,[(0,r.Wm)(A,null,{headerTitle:(0,r.w5)((()=>[o])),body:(0,r.w5)((()=>{var a,s;return[(null===(a=_.usersLoaded)||void 0===a?void 0:a.length)>0?((0,r.wg)(),(0,r.iD)("ul",c,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(_.usersLoaded,((a,s)=>((0,r.wg)(),(0,r.iD)("li",{class:"d-flex align-items-center justify-content-between flex-wrap",key:s},[(0,r.Wm)($,{profileImg:a.user_profile.profile_picture,profile_id:a.user_profile.id,title:null===a||void 0===a?void 0:a.name,gender:null===a||void 0===a?void 0:a.gender,avatarClass:"rounded-circle avatar-40",containerClass:"flex-shrink-0"},null,8,["profileImg","profile_id","title","gender"]),(0,r._)("div",{class:"flex-grow-1 ms-3",onClick:e[0]||(e[0]=(...t)=>_.hideList&&_.hideList(...t))},[(0,r.Wm)(k,{to:{name:"user.profile",params:{user_id:a.id}}},{default:(0,r.w5)((()=>[(0,r._)("h5",null,(0,n.zw)(a.name),1)])),_:2},1032,["to"]),(0,r._)("small",null,(0,n.zw)(t.formatDateToWritten(a.pivot.updated_at)),1),d,(0,r._)("span",u,(0,n.zw)(b.ARABIC_ROLES[a.pivot.user_type]),1)]),_.advisorAndAbove&&"ambassador"==a.pivot.user_type||_.isAdmin?((0,r.wg)(),(0,r.iD)("div",l,[(0,r._)("span",{role:"button",onClick:t=>_.showList(s),class:"material-symbols-outlined"}," more_horiz ",8,h),(0,r._)("div",{class:(0,n.C_)("dropdown-menu dropdown-menu-right "+(b.controlList[s]?"show":"")),"aria-labelledby":"dropdownMenuButton"},[(0,r._)("a",{role:"button",class:"dropdown-item d-flex align-items-center",onClick:t=>_.deleteMember(a.pivot.id)},[m,(0,r.Uk)(" حذف [مكرر] ")],8,p),(0,r._)("a",{role:"button",class:"dropdown-item d-flex align-items-center",onClick:t=>_.withdrawnMember(a.pivot.id)},[y,(0,r.Uk)(" منسحب ")],8,g)],2)])):(0,r.kq)("",!0)])))),128)),(null===(s=b.users)||void 0===s?void 0:s.length)>b.length?((0,r.wg)(),(0,r.iD)("li",f,[(0,r._)("a",{class:"me-3 btn",role:"button",onClick:e[1]||(e[1]=t=>_.loadMore())},"عرض المزيد")])):(0,r.kq)("",!0)])):((0,r.wg)(),(0,r.iD)("div",w,[(0,r.Wm)(A,{class:"iq-card"},{default:(0,r.w5)((()=>[v])),_:1})]))]})),_:1})])}var _=a(43144),$=a(96444),k=a(94918),A=a(20425),x=a.n(A),C=a(22658),B=a(60351),S=a(8209),L=a(49579),Z={name:"GroupMembers",directives:{clickOutside:x().directive},created(){this.getUsers()},data(){return{controlList:[],users:[],length:10,ambassador_name:"",ARABIC_ROLES:B.So,currentIndex:-1}},methods:(0,_.Z)((0,_.Z)({},S.Z),{},{async getUsers(){const t=await k.Z.usersByGroupId(this.$route.params.group_id);this.users=t.users},showList(t){this.controlList.fill(!1),this.controlList[t]=!0},hideList(){this.controlList.fill(!1)},async createFriendship(t){console.log(t);await $.Z.create(t)},async deleteMember(t){const e=this.$swal.mixin({customClass:{confirmButton:"btn btn-primary btn-lg",cancelButton:"btn btn-outline-primary btn-lg ms-2"},buttonsStyling:!1});e.fire({title:"هل أنت متأكد؟",text:"لا يمكنك التراجع عن هذا الاجراء",icon:"warning",showCancelButton:!0,confirmButtonText:"نعم، قم بالحذف",cancelButtonText:"تراجع  ",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}).then((async e=>{if(e.isConfirmed){await k.Z.delete(t).then((async t=>{this.getUsers(),this.hideList(),S.Z.toggleToast("تم الحذف","success")})).catch((t=>{S.Z.toggleToast("حصل خطأ - لم يتم الحذف!","danger"),console.log(t)}))}}))},withdrawnMember(t){const e=this.$swal.mixin({customClass:{confirmButton:"btn btn-primary btn-lg",cancelButton:"btn btn-outline-primary btn-lg ms-2"},buttonsStyling:!1});e.fire({title:"هل أنت متأكد؟",text:"لا يمكنك التراجع عن هذا الاجراء",icon:"warning",showCancelButton:!0,confirmButtonText:"نعم، قم بسحب السفير",cancelButtonText:"تراجع  ",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}).then((async e=>{if(e.isConfirmed){await k.Z.withdrawnMember(t).then((async t=>{this.getUsers(),this.hideList(),S.Z.toggleToast("تم سحب السفير","success")})).catch((t=>{S.Z.toggleToast("حصل خطأ - لم يتم سحب السفير!","danger"),console.log(t)}))}}))},loadMore(){var t;this.length>(null===(t=this.users)||void 0===t?void 0:t.length)||(this.length=this.length+10)},async searchForAmbassador(){const t=await C.Z.searchForAmbassador(this.ambassador_name,this.$route.params.group_id);this.users=t.users}}),computed:{usersLoaded(){var t;return null===(t=this.users)||void 0===t?void 0:t.slice(0,this.length)},user(){return this.$store.getters.getUser},isAdmin(){return L.Z.hasRole(this.user,"admin")},advisorAndAbove(){return L.Z.hasRoles(this.user,["admin","consultant","advisor"])}}},M=a(83744);const T=(0,M.Z)(Z,[["render",b]]);var F=T},76560:function(t,e,a){"use strict";t.exports=a.p+"img/no-friends.2bab3c44.png"}}]);
//# sourceMappingURL=8833.bc4960b6.js.map