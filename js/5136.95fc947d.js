"use strict";(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[5136],{22658:function(t,a,e){var r=e(66252),s=e(24150),n=e(79940);class o{async createGroup(t){try{const a=await s.hi.post("/group/create",t,{headers:{"Content-type":"multipart/form-data"}});return a.data.data}catch(a){(0,r.S3)(a)}}async getAll(t,a){try{const e=await s.hi.get(`/group?page=${a}&name=${t}`);return await e.data}catch(e){return e}}async searchGroupByName(t){try{const a=await s.hi.get(`group/search-group-by-name/${t}`);return await a.data}catch(a){return a}}async getById(t){try{const a=await s.hi.get(`group/show/${t}`);return a.data.data}catch(a){return a}}async showBasicInfo(t){try{const a=await s.hi.get(`group/show-basic-info/${t}`);return a.data.data}catch(a){return a}}async getBooks(t){try{const a=await s.hi.get(`group/books/${t}`);return a.data.data}catch(a){(0,r.S3)(a)}}async getAllGroupExceptions(t){try{const a=await s.hi.get(`group/group-exceptions/${t}`);return a.data.data}catch(a){return a}}async exceptionsFilter(t,a){try{const e=await s.hi.get(`group/exceptions-filter/${t}/${a}`);return e.data.data}catch(e){return e}}async BasicMarksView(t,a){try{const e=await s.hi.get(`group/basic-mark-view/${t}/${a}`);return e.data.data}catch(e){return e}}async AllAchievements(t,a){try{const e=await s.hi.get(`group/all-achievements/${t}/${a}`);return e.data.data}catch(e){return e}}async AchievementAsPages(t,a){try{const e=await s.hi.get(`group/achievement-as-pages/${t}/${a}`);return e.data.data}catch(e){return e}}async searchForAmbassadorAchievement(t,a,e){try{const r=await s.hi.get(`group/search-for-ambassador-achievement/${t}/${a}/${e}`);return r.data.data}catch(r){return r}}async searchForAmbassador(t,a){try{const e=await s.hi.get(`group/search-for-ambassador/${t}/${a}`);return e.data.data}catch(e){return e}}async createLeaderRequest(t){try{const a=await s.hi.post("/group/create-leader-request",t,{headers:{"Content-type":"multipart/form-data"}});return a.data.data}catch(a){return a}}async lastLeaderRequest(t){try{const a=await s.hi.get(`group/last-leader-request/${t}`);return a.data.data}catch(a){return a}}async deleteById(t){try{return await s.hi.delete(`/group/delete/${t}`)}catch(a){return a}}async update(t){try{const a=await s.hi.post("/group/update",t,{headers:{"Content-type":"multipart/form-data"}});return a.data.data}catch(a){(0,r.S3)(a)}}async getGroupByType(t){try{const a=await s.hi.get(`/group/group-by-type/${t}`);return a.data.data}catch(a){return a}}async userGroups(t,a){try{const e=await s.hi.get(`/group/user-groups?page=${a}&name=${t}`);return e.data}catch(e){return e}}async statistics(t){try{const a=await s.hi.get(`group/statistics/${t}`);return a.data.data}catch(a){(0,n.F)(a,"statistics")}}async thesesAndScreensByWeek(t,a){try{const e=await s.hi.get(`group/theses-and-screens-by-week/${t}/${a}`);return e.data.data}catch(e){(0,r.S3)(e)}}async monthAchievement(t,a){try{const e=await s.hi.get(`group/month-achievement/${t}/${a}`);return e.data.data}catch(e){(0,r.S3)(e)}}async assignAdministrator(t){try{const a=await s.hi.post("/group/assign-administrator",t,{headers:{"Content-type":"multipart/form-data"}});return a.data.data}catch(a){(0,r.S3)(a)}}}a.Z=new o},60351:function(t,a,e){e.d(a,{So:function(){return r},Wx:function(){return n},b5:function(){return i},gg:function(){return o},jx:function(){return s}});const r={ambassador:"سفير",leader:"قائد",supervisor:"مراقب",advisor:"موجه",consultant:"مستشار",admin:"ادارة",book_quality_team:"جودة الكتب"},s={arabic:"اللغة العربية",english:"اللغة الانجليزية"},n={normal:"منهج",ramadan:"رمضان",young:"يافعين",kids:"أطفال",tafseer:"تفسير",free:"كتاب حر"},o={January:"يناير",February:"فبراير",March:"مارس",April:"ابريل",May:"مايو",June:"يونيو",July:"يوليو",August:"أغسطس",September:"سبتمبر",October:"أكتوبر",November:"نوفمبر",December:"ديسمبر"},i={"01":"يناير","02":"فبراير","03":"مارس","04":"ابريل","05":"مايو","06":"يونيو","07":"يوليو","08":"أغسطس","09":"سبتمبر",10:"أكتوبر",11:"نوفمبر",12:"ديسمبر"}},79940:function(t,a,e){e.d(a,{F:function(){return s}});e(70560);var r=e(1120);function s(t,a=""){throw console.log(`[ERROR] ${a} =>`,t.response.data),404===t.response.data.statusCode?r.Z.push({name:"NotFound"}):403===t.response.data.statusCode&&r.Z.push({name:"NotAuthorized"}),t}},65136:function(t,a,e){e.r(a),e.d(a,{default:function(){return E}});var r=e(66252),s=e(49963),n=e(3577);const o=t=>((0,r.dD)("data-v-604fa57c"),t=t(),(0,r.Cn)(),t),i={class:"d-grid gap-3 d-grid-template-1fr-19",ref:"listContainer"},c={class:"mt-3 inputs mb-3"},u=o((()=>(0,r._)("i",{class:"material-symbols-outlined"}," search ",-1))),d={key:0},p=o((()=>(0,r._)("span",{class:"material-symbols-outlined align-middle"}," info ",-1)));function l(t,a,e,o,l,g){const h=(0,r.up)("card");return(0,r.wg)(),(0,r.iD)("div",i,[(0,r._)("div",c,[u,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",placeholder:" ... ابحث عن مجموعة","onUpdate:modelValue":a[0]||(a[0]=t=>l.searchModel=t),onKeyup:a[1]||(a[1]=t=>g.loadGroups())},null,544),[[s.nr,l.searchModel,void 0,{trim:!0}]])]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.groups,(t=>((0,r.wg)(),(0,r.j4)(h,{group:t,key:t.id},null,8,["group"])))),128)),l.emptyMessage?((0,r.wg)(),(0,r.iD)("div",d,[(0,r._)("h4",null,[(0,r.Uk)((0,n.zw)(l.emptyMessage)+" ",1),p])])):(0,r.kq)("",!0)],512)}e(76265);var g=e(90002),h=e(21218);const y={class:"d-grid gap-3 d-grid-template-1fr-19"},m={class:"card mb-0"},w=(0,r._)("div",{class:"top-bg-image"},[(0,r._)("img",{src:g,class:"img-fluid w-100",alt:"group-bg"})],-1),f={key:0,class:"card-body text-center"},b=(0,r._)("div",{class:"group-icon"},[(0,r._)("img",{src:h,alt:"profile-img",class:"rounded-circle img-fluid avatar-120"})],-1),v={class:"group-info pt-3 pb-3"},_={class:"group-details d-inline-block pb-3"},$={class:"d-flex align-items-center justify-content-between list-inline m-0 p-0"},k={class:"pe-3 ps-3"},A=(0,r._)("p",{class:"mb-0"},"عدد الأعضاء",-1),M={class:"pe-3 ps-3"},C=(0,r._)("p",{class:"mb-0"},"دورك في المجموعة",-1),S={class:"rounded-pill badge bg-primary px-2"};function R(t,a,e,s,o,i){const c=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",y,[(0,r._)("div",m,[w,e.group.group?((0,r.wg)(),(0,r.iD)("div",f,[b,(0,r._)("div",v,[(0,r._)("h4",null,(0,n.zw)(e.group.group.name),1),(0,r._)("p",null,(0,n.zw)(o.group_type[e.group.group.type.type]),1)]),(0,r._)("div",_,[(0,r._)("ul",$,[(0,r._)("li",k,[A,(0,r._)("h6",null,(0,n.zw)(e.group.group.users.length),1)]),(0,r._)("li",M,[C,(0,r._)("h6",S,(0,n.zw)(o.ARABIC_ROLES[e.group.user_type]),1)])])]),(0,r.Wm)(c,{class:"btn btn-primary d-block w-100",to:{name:"group.group-detail",params:{group_id:e.group.group.id}}},{default:(0,r.w5)((()=>[(0,r.Uk)(" عرض ")])),_:1},8,["to"])])):(0,r.kq)("",!0)])])}var x=e(60351),B={name:"GroupCard",props:{group:{type:[Object],required:!0}},data(){return{group_type:{followup:"فريق متابعة",supervising:"فريق رقابة",advising:"فريق توجيه",consultation:"فريق الاستشارة",Administration:"الإدارة العليا"},ARABIC_ROLES:x.So}}},q=e(83744);const G=(0,q.Z)(B,[["render",R]]);var O=G,T=e(22658),L=e(8209),Z=e(9669),D=e.n(Z),F={components:{card:O},name:"Group",async mounted(){this.loadGroups(),window.addEventListener("scroll",this.handleScroll)},beforeUnmount(){window.removeEventListener("scroll",this.handleScroll),this.cancelToken.cancel()},data(){return{groups:[],searchModel:"",page:1,totalPages:1,loading:!1,pendingRequest:!1,hasMore:!0,emptyMessage:"",cancelToken:D().CancelToken.source()}},methods:{async loadGroups(){if(!this.pendingRequest){""==this.searchModel&&0==this.groups.length&&(this.page=1),""!=this.searchModel&&(this.page=1,this.groups=[]),this.pendingRequest=!0,this.loading=!0,this.emptyMessage="";try{var t,a;let e;if(e=await T.Z.userGroups(this.searchModel,this.page,this.cancelToken),200!==e.statusCode)return void L.Z.toggleToast("حدث خطأ أثناء تحميل المجموعات, حاول مرة أخرى","error");if(200===e.statusCode&&!e.data)return this.emptyMessage="لا يوجد مجموعات",void(this.hasMore=!1);this.groups=[...this.groups,...e.data.groups.data],this.totalPages=null!==(t=null===(a=e.data)||void 0===a?void 0:a.last_page)&&void 0!==t?t:1,this.page++}catch(e){console.log(e),L.Z.toggleToast("حدث خطأ أثناء تحميل المجموعات, حاول مرة أخرى","error")}finally{this.loading=!1,this.pendingRequest=!1}}},isAtBottomOfPage(){const t=this.$refs.listContainer.getBoundingClientRect(),a=t.bottom,e=window.innerHeight;return a>=e},handleScroll(){this.hasMoreToLoad&&this.isAtBottomOfPage()&&this.loadGroups()}},computed:{hasMoreToLoad(){return this.page<=this.totalPages&&this.hasMore}}};const z=(0,q.Z)(F,[["render",l],["__scopeId","data-v-604fa57c"]]);var E=z},21218:function(t,a,e){t.exports=e.p+"img/200x200-book.5a0360f9.png"},90002:function(t,a,e){t.exports=e.p+"img/book-banner-2.d7cc109e.png"}}]);
//# sourceMappingURL=5136.95fc947d.js.map