"use strict";(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[890],{34964:function(t,e,a){var o=a(24150),s=a(66252),r=a(79940);class i{async create(t){try{const e=await o.hi.post("/books",t,{headers:{"Content-type":"multipart/form-data"}});return e.data.data}catch(e){(0,s.S3)(e)}}async getAll(t){try{const e=await o.hi.get("books?page="+t);return e.data.data}catch(e){(0,s.S3)(e)}}async getById(t){try{const e=await o.hi.get(`/books/${t}`);return e.data}catch(e){(0,r.F)(e,"BookService.getById")}}async deleteById(t){try{return await o.hi.delete(`/books/${t}`)}catch(e){return e}}async getBooksByType(t){try{const e=await o.hi.get(`/books/type/${t}`);return e.data}catch(e){return e}}async getBooksByLevel(t,e){try{const a=await o.hi.get(`/books/level/${t}?page=${e}`);return a.data.data}catch(a){(0,s.S3)(a)}}async getBooksByName(t,e){try{const a=await o.hi.get(`/books/name?page=${e}&name=${t}`);return a.data.data}catch(a){(0,s.S3)(a)}}async getBooksByLanguage(t,e){try{const a=await o.hi.get(`/books/language/${t}?page=${e}`);return a.data.data}catch(a){(0,s.S3)(a)}}async getBooksBySection(t){try{const e=await o.hi.get(`/books/section/${t}`);return e.data}catch(e){return e}}async getRecentAddedBooks(){try{const t=await o.hi.get("/books/recent-added-books");return t.data.data}catch(t){return console.log(t),""}}async getMostReadableBooks(){try{const t=await o.hi.get("/books/most-readable-books");return t.data.data}catch(t){return console.log(t),""}}async getRandomBook(){try{const t=await o.hi.get("/books/random-book");return t.data.data}catch(t){return console.log(t),""}}async latestBooks(){try{const t=await o.hi.get("/books/latest");return t.data.data}catch(t){return console.log(t),""}}async showBasicInfo(t){try{const e=await o.hi.get(`books/${t}`);return e.data.data}catch(e){return e}}async update(t){try{const e=await o.hi.post("/books/update",t,{headers:{"Content-type":"multipart/form-data"}});return e.data.data}catch(e){(0,s.S3)(e)}}}e.Z=new i},79940:function(t,e,a){a.d(e,{F:function(){return s}});a(70560);var o=a(1120);function s(t,e=""){throw console.log(`[ERROR] ${e} =>`,t.response.data),404===t.response.data.statusCode?o.Z.push({name:"NotFound"}):403===t.response.data.statusCode&&o.Z.push({name:"NotAuthorized"}),t}},40890:function(t,e,a){a.r(e),a.d(e,{default:function(){return M}});a(76265);var o=a(66252),s=a(3577);const r={class:"row"},i={key:0,class:"col-lg-12"},n={class:"card card-block card-stretch card-height blog blog-detail"},l={class:"card-body"},d={class:"position-absolute start-0"},c={class:"image-block text-center mt-3"},u=["src"],h={class:"blog-description mt-3 text-center"},k={class:"mb-3 pb-3 border-bottom text-center"},b={class:"blog-meta d-flex align-items-center mb-3 position-right-side flex-wrap"},g={class:"date me-4 d-flex align-items-center"},m=(0,o._)("i",{class:"material-symbols-outlined pe-2 md-18 text-primary"},"calendar_month",-1),y={class:"comments me-4 d-flex align-items-center"},f=(0,o._)("i",{class:"material-symbols-outlined pe-2 md-18 text-primary"}," book ",-1),v={class:"text-center"},p={class:"col-lg-12 mt-3"},B={class:"card card-block card-stretch card-height blog"};function w(t,e,a,w,x,_){var T;const $=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("main",null,[(0,o._)("div",r,[x.book?((0,o.wg)(),(0,o.iD)("div",i,[(0,o._)("div",n,[(0,o._)("div",l,[(0,o._)("div",d,[(0,o._)("span",{role:"button",onClick:e[0]||(e[0]=e=>t.download(x.book.link)),class:"material-symbols-outlined align-middle display-5 me-1s"}," download "),_.isAdmin||_.inBooksTeam||t.book_owner?((0,o.wg)(),(0,o.j4)($,{key:0,class:"material-symbols-outlined align-middle display-5 me-3",to:{name:"book.update",params:{book_id:x.book.id}}},{default:(0,o.w5)((()=>[(0,o.Uk)(" edit ")])),_:1},8,["to"])):(0,o.kq)("",!0)]),(0,o._)("div",c,[(0,o._)("img",{src:_.resolve_img_url(null!==(T=x.book.media.path)&&void 0!==T?T:""),class:"img-fluid rounded w-25",alt:"blog-img"},null,8,u)]),(0,o._)("div",h,[(0,o._)("h2",k,(0,s.zw)(x.book.name),1),(0,o._)("div",b,[(0,o._)("div",g,[m,(0,o.Uk)("تاريخ الاضافة "+(0,s.zw)(_.formattedDate),1)]),(0,o._)("div",y,[f,(0,o.Uk)(" عدد الصفحات: "+(0,s.zw)(x.book.end_page),1)])]),(0,o._)("div",v,[(0,o.Uk)((0,s.zw)(x.shortBriefText)+" ",1),_.isMore?((0,o.wg)(),(0,o.iD)("a",{key:0,class:"load-btn",onClick:e[1]||(e[1]=(...t)=>_.loadMoreBriefText&&_.loadMoreBriefText(...t))},"...قراءة المزيد")):(0,o.kq)("",!0),_.isLess?((0,o.wg)(),(0,o.iD)("a",{key:1,class:"load-btn",onClick:e[2]||(e[2]=(...t)=>_.loadLessBriefText&&_.loadLessBriefText(...t))},"قراءة أقل")):(0,o.kq)("",!0)]),(0,o._)("div",p,[(0,o._)("div",B,[(0,o.Wm)($,{to:{name:"book.book-details",params:{book_id:x.book.id}},class:"btn btn-primary d-block w-100",disabled:!x.book.allow_comments},{default:(0,o.w5)((()=>[(0,o.Uk)(" عرض الأطروحات ")])),_:1},8,["to","disabled"])])])])])])])):(0,o.kq)("",!0)])])}var x=a(34964),_=a(30381),T=a.n(_),$=a(49579),C={name:"Latest Book",async created(){var t;this.book=await x.Z.latestBooks(),this.fullBriefText=this.book.brief,this.shortBriefText=null===(t=this.fullBriefText)||void 0===t?void 0:t.slice(0,200)},data(){return{book:null,fullBriefText:"",shortBriefText:""}},methods:{loadMoreBriefText(){this.shortBriefText=this.fullBriefText},loadLessBriefText(){var t;this.shortBriefText=null===(t=this.fullBriefText)||void 0===t?void 0:t.slice(0,200)},resolve_img_url:function(t){return t||a(21218)}},computed:{formattedDate(){var t;return T()(null===(t=this.book)||void 0===t?void 0:t.created_at).format("YYYY-MM-DD")},isMore(){var t,e;return(null===(t=this.shortBriefText)||void 0===t?void 0:t.length)<(null===(e=this.fullBriefText)||void 0===e?void 0:e.length)},isLess(){var t,e,a;return(null===(t=this.shortBriefText)||void 0===t?void 0:t.length)>=(null===(e=this.fullBriefText)||void 0===e?void 0:e.length)&&(null===(a=this.fullBriefText)||void 0===a?void 0:a.length)>200},user(){return this.$store.getters.getUser},inBooksTeam(){return $.Z.hasRole(this.user,"book_quality_team")},isAdmin(){return $.Z.hasRole(this.user,"admin")}}},D=a(83744);const L=(0,D.Z)(C,[["render",w]]);var M=L},21218:function(t,e,a){t.exports=a.p+"img/200x200-book.5a0360f9.png"}}]);
//# sourceMappingURL=890.ab7ccd75.js.map