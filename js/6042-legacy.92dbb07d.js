"use strict";(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[6042],{79940:function(t,e,n){n.d(e,{F:function(){return r}});n(70560);var s=n(1120);function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";throw console.log("[ERROR] ".concat(e," =>"),t.response.data),404===t.response.data.statusCode?s.Z.push({name:"NotFound"}):403===t.response.data.statusCode&&s.Z.push({name:"NotAuthorized"}),t}},41304:function(t,e,n){n.r(e),n.d(e,{default:function(){return I}});var s=n(66252),r=n.p+"img/approve-post.13e0fb77.png",o={key:0,ref:"listContainer"},a={key:1,class:"col-sm-12"},i=(0,s._)("div",{class:"iq-card-body p-0"},[(0,s._)("div",{class:"image-block text-center"},[(0,s._)("img",{src:r,class:"img-fluid rounded w-50",alt:"blog-img"})]),(0,s._)("h4",{class:"text-center mt-3 mb-3"},"لا يوجد منشورات معلقة")],-1);function c(t,e,n,r,c,u){var d=(0,s.up)("PendingPost"),p=(0,s.up)("iq-card");return c.posts.length>0?((0,s.wg)(),(0,s.iD)("div",o,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(c.posts,(function(t){return(0,s.wg)(),(0,s.j4)(d,{key:t.id,post:t},null,8,["post"])})),128))],512)):((0,s.wg)(),(0,s.iD)("div",a,[(0,s.Wm)(p,{class:"iq-card"},{default:(0,s.w5)((function(){return[i]})),_:1})]))}var u=n(50124),d=n(48534),p=(n(38077),n(60228),n(8417)),l={class:"col-sm-12"},f={class:"card card-block card-stretch card-height"},m={class:"card-body"},h=(0,s._)("hr",null,null,-1);function g(t,e,n,r,o,a){var i=(0,s.up)("PostHeader"),c=(0,s.up)("PostBody"),u=(0,s.up)("PostMedia"),d=(0,s.up)("AcceptReject");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("div",f,[(0,s._)("div",m,[(0,s.Wm)(i),(0,s.Wm)(c),(0,s.Wm)(u),h,(0,s.Wm)(d)])])])}var b=n(34932),v=n(66107),w=n(49963),_=function(t){return(0,s.dD)("data-v-03d417f1"),t=t(),(0,s.Cn)(),t},x={class:"d-flex justify-content-between align-items-center mt-1"},Z=["disabled"],P=_((function(){return(0,s._)("span",{class:"material-symbols-outlined"}," check ",-1)})),k=_((function(){return(0,s._)("span",{class:"ms-1 bold-600"}," قبول ",-1)})),y=[P,k],C=["disabled"],B=_((function(){return(0,s._)("span",{class:"material-symbols-outlined"}," close ",-1)})),R=_((function(){return(0,s._)("span",{class:"ms-1 bold-600"}," رفض ",-1)})),q=[B,R];function A(t,e,n,r,o,a){return(0,s.wg)(),(0,s.iD)("div",x,[(0,s._)("button",{type:"button",class:"btn flex-grow-1 d-flex align-items-center justify-content-center text-success hover-bold",onClick:e[0]||(e[0]=(0,w.iM)((function(){return a.acceptPost&&a.acceptPost.apply(a,arguments)}),["prevent"])),disabled:o.pendingRequest},y,8,Z),(0,s._)("button",{type:"button",class:"btn flex-grow-1 d-flex align-items-center justify-content-center text-danger hover-bold",onClick:e[1]||(e[1]=(0,w.iM)((function(){return a.declinePost&&a.declinePost.apply(a,arguments)}),["prevent"])),disabled:o.pendingRequest},q,8,C)])}n(70560);var j=n(31025),S={name:"AcceptReject",inject:{post:{required:!0},postAction:{default:function(){}}},data:function(){return{pendingRequest:!1}},methods:{acceptPost:function(){var t=this;return(0,d.Z)((0,u.Z)().mark((function e(){var n;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.pendingRequest){e.next=2;break}return e.abrupt("return");case 2:n=t.$swal.mixin({customClass:{confirmButton:"btn btn-primary btn-lg",cancelButton:"btn btn-outline-danger btn-lg ms-2"},buttonsStyling:!1}),n.fire({title:"هل أنت متأكد؟",text:"هل تريد قبول هذا المنشور؟",icon:"warning",showCancelButton:!0,confirmButtonText:"نعم!",cancelButtonText:"تراجع",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}).then(function(){var e=(0,d.Z)((0,u.Z)().mark((function e(n){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n.isConfirmed){e.next=16;break}return t.pendingRequest=!0,e.prev=2,e.next=5,p.Z.acceptPost(t.post.id);case 5:t.postAction(t.post.id),j.Z.handleSuccessSwal("تم قبول المنشور بنجاح"),setTimeout((function(){return t.goBack()}),1800),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),j.Z.handleErrorSwal("حدث خطأ أثناء القبول, يرجى المحاولة مرة أخرى!");case 13:return e.prev=13,t.pendingRequest=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})))()},declinePost:function(){var t=this;return(0,d.Z)((0,u.Z)().mark((function e(){var n;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.pendingRequest){e.next=2;break}return e.abrupt("return");case 2:n=t.$swal.mixin({customClass:{confirmButton:"btn btn-primary btn-lg",cancelButton:"btn btn-outline-danger btn-lg ms-2"},buttonsStyling:!1}),n.fire({title:"هل أنت متأكد؟",text:"هل تريد رفض هذا المنشور؟",icon:"warning",showCancelButton:!0,confirmButtonText:"نعم!",cancelButtonText:"تراجع",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}).then(function(){var e=(0,d.Z)((0,u.Z)().mark((function e(n){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n.isConfirmed){e.next=16;break}return t.pendingRequest=!0,e.prev=2,e.next=5,p.Z.declinePost(t.post.id);case 5:t.postAction(t.post.id),j.Z.handleSuccessSwal("تم رفض المنشور بنجاح"),setTimeout((function(){return t.goBack()}),1800),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),j.Z.handleErrorSwal("حدث خطأ أثناء الرفض, يرجى المحاولة مرة أخرى!");case 13:return e.prev=13,t.pendingRequest=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})))()},goBack:function(){this.$route.params.post_id&&this.$router.push({name:"osboha.pendingPosts",params:{timeline_id:this.$route.params.timeline_id}})}}},$=n(83744);const D=(0,$.Z)(S,[["render",A],["__scopeId","data-v-03d417f1"]]);var O=D,T=n(11035),z={name:"PendingPost",components:{PostHeader:b.Z,PostBody:v.Z,PostMedia:T.Z,AcceptReject:O},provide:function(){return{post:this.post}},props:{post:{type:Object,required:!0}}};const W=(0,$.Z)(z,[["render",g]]);var M=W,E={name:"PendingPostsView",components:{PendingPost:M},provide:function(){return{postAction:this.postAction}},data:function(){return{posts:[],page:1,totalPages:1,loading:!1}},created:function(){this.loadPosts()},watch:{$route:function(t,e){this.loadPosts()}},methods:{loadPosts:function(){var t=this;return(0,d.Z)((0,u.Z)().mark((function e(){var n,s;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.loading){e.next=2;break}return e.abrupt("return");case 2:return t.loading=!0,e.next=5,p.Z.getPendingPosts(t.$route.params.timeline_id,null!==(n=t.$route.params.post_id)&&void 0!==n?n:"");case 5:s=e.sent,t.posts=s.data?s.data.posts:[],t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()},postAction:function(t){this.posts=this.posts.filter((function(e){return e.id!==t}))}}};const H=(0,$.Z)(E,[["render",c]]);var I=H}}]);
//# sourceMappingURL=6042-legacy.92dbb07d.js.map