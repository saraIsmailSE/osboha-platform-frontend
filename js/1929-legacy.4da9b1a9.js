"use strict";(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[1929],{81716:function(t,e,i){i.d(e,{Z:function(){return m}});var s=i(66252);
/*! vue-countdown v2.1.2 | (c) 2018-present Chen Fengyuan | MIT */const n=1e3,o=60*n,a=60*o,r=24*a,l="abort",d="end",h="progress",u="start",c="visibilitychange";var m=(0,s.aZ)({name:"VueCountdown",props:{autoStart:{type:Boolean,default:!0},emitEvents:{type:Boolean,default:!0},interval:{type:Number,default:1e3,validator:t=>t>=0},now:{type:Function,default:()=>Date.now()},tag:{type:String,default:"span"},time:{type:Number,default:0,validator:t=>t>=0},transform:{type:Function,default:t=>t}},emits:[l,d,h,u],data(){return{counting:!1,endTime:0,totalMilliseconds:0,requestId:0}},computed:{days(){return Math.floor(this.totalMilliseconds/r)},hours(){return Math.floor(this.totalMilliseconds%r/a)},minutes(){return Math.floor(this.totalMilliseconds%a/o)},seconds(){return Math.floor(this.totalMilliseconds%o/n)},milliseconds(){return Math.floor(this.totalMilliseconds%n)},totalDays(){return this.days},totalHours(){return Math.floor(this.totalMilliseconds/a)},totalMinutes(){return Math.floor(this.totalMilliseconds/o)},totalSeconds(){return Math.floor(this.totalMilliseconds/n)}},watch:{$props:{deep:!0,immediate:!0,handler(){this.totalMilliseconds=this.time,this.endTime=this.now()+this.time,this.autoStart&&this.start()}}},mounted(){document.addEventListener(c,this.handleVisibilityChange)},beforeUnmount(){document.removeEventListener(c,this.handleVisibilityChange),this.pause()},methods:{start(){this.counting||(this.counting=!0,this.autoStart||(this.totalMilliseconds=this.time,this.endTime=this.now()+this.time),this.emitEvents&&this.$emit(u),"visible"===document.visibilityState&&this.continue())},continue(){if(!this.counting)return;const t=Math.min(this.totalMilliseconds,this.interval);if(t>0){let e,i;const s=n=>{e||(e=n),i||(i=n);const o=n-e;o>=t||o+(n-i)/2>=t?this.progress():this.requestId=requestAnimationFrame(s),i=n};this.requestId=requestAnimationFrame(s)}else this.end()},pause(){cancelAnimationFrame(this.requestId)},progress(){this.counting&&(this.update(),this.emitEvents&&this.totalMilliseconds>0&&this.$emit(h,{days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}),this.continue())},abort(){this.counting&&(this.pause(),this.counting=!1,this.emitEvents&&this.$emit(l))},end(){this.counting&&(this.pause(),this.totalMilliseconds=0,this.counting=!1,this.emitEvents&&this.$emit(d))},update(){this.counting&&(this.totalMilliseconds=Math.max(0,this.endTime-this.now()))},restart(){this.pause(),this.totalMilliseconds=this.time,this.endTime=this.now()+this.time,this.counting=!1,this.start()},handleVisibilityChange(){switch(document.visibilityState){case"visible":this.update(),this.continue();break;case"hidden":this.pause();break}}},render(){return(0,s.h)(this.tag,this.$slots.default?[this.$slots.default(this.transform({days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}))]:void 0)}})},26667:function(t,e,i){i.d(e,{Z:function(){return E}});var s=i(66252),n=i(3577),o=i.p+"img/main_timer.460c34b9.gif",a=i.p+"img/audit_timer.f220f728.gif",r=i.p+"img/modify_timer.624d83f0.gif",l={class:"card"},d={class:"card-header rounded-0 p-1",style:{"background-color":"#1d1a55"}},h={class:"text-center text-light mt-0",style:{direction:"rtl !important"}},u={class:"d-flex justify-content-center"},c={key:0,class:"card-body row d-flex justify-content-center m-auto",style:{"box-shadow":"none"}},m={class:"text-center",style:{direction:"rtl !important"}},p={class:"font-weight-bold display-3 border-bottom"},f=(0,s._)("tr",null,[(0,s._)("td",{class:"w-25"},"ثانية"),(0,s._)("td",{class:"w-25"},"دقيقة"),(0,s._)("td",{class:"w-25"},"ساعة"),(0,s._)("td",{class:"w-25"},"يوم")],-1),w={colspan:"4"},y={key:0,class:"mt-3 w-100",src:o},g={key:1,class:"mt-3 w-75",src:a},_={key:2,class:"mt-3 w-100",src:r},v={key:1,class:"alert alert-danger text-center",role:"alert"};function M(t,e,i,o,a,r){var M=(0,s.up)("vue-countdown");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("div",d,[(0,s._)("h5",h,[(0,s._)("div",u,[(0,s._)("span",{role:"button",class:"material-symbols-outlined",onClick:e[0]||(e[0]=function(t){return r.setExpand()})},(0,n.zw)(a.expand?"expand_less":"expand_more"),1),(0,s.Uk)(" الأسبوع "+(0,n.zw)(i.week.title),1)])])]),a.expand?((0,s.wg)(),(0,s.iD)("div",c,[a.expired?((0,s.wg)(),(0,s.iD)("div",v," انتهى الوقت ")):((0,s.wg)(),(0,s.j4)(M,{key:0,time:r.time,onEnd:r.onCountdownEnd},{default:(0,s.w5)((function(t){var e=t.days,o=t.hours,a=t.minutes,r=t.seconds;return[(0,s._)("table",m,[(0,s._)("thead",null,[(0,s._)("tr",p,[(0,s._)("th",null,(0,n.zw)(r),1),(0,s._)("th",null,(0,n.zw)(a),1),(0,s._)("th",null,(0,n.zw)(o),1),(0,s._)("th",null,(0,n.zw)(e),1)])]),(0,s._)("tbody",null,[f,(0,s._)("tr",null,[(0,s._)("td",w,["main_timer"==i.timer_type?((0,s.wg)(),(0,s.iD)("img",y)):(0,s.kq)("",!0),"audit_timer"==i.timer_type?((0,s.wg)(),(0,s.iD)("img",g)):(0,s.kq)("",!0),"modify_timer"==i.timer_type?((0,s.wg)(),(0,s.iD)("img",_)):(0,s.kq)("",!0)])])])])]})),_:1},8,["time","onEnd"]))])):(0,s.kq)("",!0)])}var b=i(81716),k=i(49579),x={name:"Countdown",created:function(){var t=(new Date).toLocaleString("en-US",{timeZone:"Asia/Riyadh"});this.now=new Date(t),"main_timer"==this.timer_type?this.date=new Date(this.week.main_timer):"audit_timer"==this.timer_type?this.date=new Date(this.week.audit_timer):"modify_timer"==this.timer_type&&(this.date=new Date(this.week.modify_timer)),this.expired=this.time<0},components:{VueCountdown:b.Z},props:{week:{type:[Object],required:!0},timer_type:{type:[String]}},data:function(){return{expand:!0,date:null,now:null,expired:!0}},methods:{setExpand:function(){this.expand=!this.expand},onCountdownEnd:function(){this.expired=!0}},computed:{user:function(){return this.$store.getters.getUser},isAdvisor:function(){return k.Z.hasRole(this.user,"advisor")},time:function(){return this.isAdvisor&&"audit_timer"==this.timer_type?this.date.getTime()+936e5-this.now:this.date-this.now}},watch:{expand:function(){this.now=new Date,this.expired=this.time<0}}},D=i(83744);const S=(0,D.Z)(x,[["render",M]]);var E=S},69789:function(t,e,i){i.r(e),i.d(e,{default:function(){return d}});var s=i(66252);function n(t,e,i,n,o,a){var r=(0,s.up)("count-down");return(0,s.wg)(),(0,s.j4)(r)}var o=i(26667),a={components:{CountDown:o.Z},name:"Timer",data:function(){return{expand:!0}}},r=i(83744);const l=(0,r.Z)(a,[["render",n]]);var d=l}}]);
//# sourceMappingURL=1929-legacy.4da9b1a9.js.map