"use strict";(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[7057],{9847:function(t,e,r){var n=r(50124),a=r(48534),s=r(13087),o=r(62833),u=(r(34338),r(66252)),c=r(24150),i=function(){function t(){(0,s.Z)(this,t)}return(0,o.Z)(t,[{key:"userMonthAchievement",value:function(){var t=(0,a.Z)((0,n.Z)().mark((function t(e,r){var a;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.hi.get("marks/user-month-achievement/".concat(e,"/").concat(r));case 3:return a=t.sent,t.abrupt("return",a.data.data);case 7:t.prev=7,t.t0=t["catch"](0),(0,u.S3)(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"userWeekAchievement",value:function(){var t=(0,a.Z)((0,n.Z)().mark((function t(e,r){var a;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.hi.get("marks/user-week-achievement/".concat(e,"/").concat(r));case 3:return a=t.sent,t.abrupt("return",a.data.data);case 7:t.prev=7,t.t0=t["catch"](0),(0,u.S3)(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"ambassadorMark",value:function(){var t=(0,a.Z)((0,n.Z)().mark((function t(e,r){var a;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.hi.get("marks/ambassador-mark/".concat(e,"/").concat(r));case 3:return a=t.sent,t.abrupt("return",a.data.data);case 7:t.prev=7,t.t0=t["catch"](0),(0,u.S3)(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"acceptSupport",value:function(){var t=(0,a.Z)((0,n.Z)().mark((function t(e,r){var a;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.hi.put("marks/accept-support/user/".concat(e,"/").concat(r));case 3:return a=t.sent,t.abrupt("return",a.data);case 7:t.prev=7,t.t0=t["catch"](0),(0,u.S3)(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"rejectSupport",value:function(){var t=(0,a.Z)((0,n.Z)().mark((function t(e,r){var a;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.hi.put("marks/reject-support/user/".concat(e,"/").concat(r));case 3:return a=t.sent,t.abrupt("return",a.data);case 7:t.prev=7,t.t0=t["catch"](0),(0,u.S3)(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"setSupportMarkForAll",value:function(){var t=(0,a.Z)((0,n.Z)().mark((function t(e){var r;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.hi.post("/marks/set-support-for-all",e,{headers:{"Content-type":"multipart/form-data"}});case 3:return r=t.sent,t.abrupt("return",r.data.data);case 7:t.prev=7,t.t0=t["catch"](0),(0,u.S3)(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"topUsersByMonth",value:function(){var t=(0,a.Z)((0,n.Z)().mark((function t(){var e;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.hi.get("marks/top-users-by-month");case 3:return e=t.sent,t.abrupt("return",e.data.data);case 7:t.prev=7,t.t0=t["catch"](0),(0,u.S3)(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"topUsersByWeek",value:function(){var t=(0,a.Z)((0,n.Z)().mark((function t(){var e;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.hi.get("marks/top-users-by-week");case 3:return e=t.sent,t.abrupt("return",e.data.data);case 7:t.prev=7,t.t0=t["catch"](0),(0,u.S3)(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}()}]),t}();e.Z=new i},79940:function(t,e,r){r.d(e,{F:function(){return a}});r(70560);var n=r(1120);function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";throw console.log("[ERROR] ".concat(e," =>"),t.response.data),404===t.response.data.statusCode?n.Z.push({name:"NotFound"}):403===t.response.data.statusCode&&n.Z.push({name:"NotAuthorized"}),t}},90069:function(t,e,r){r.r(e),r.d(e,{default:function(){return z}});var n=r(66252),a=r(49963),s=r(3577),o=r(79885),u={class:"row"},c={class:"col-lg-8 row m-0 p-0"},i={key:0,class:"col-sm-12"},p={key:1,class:"col-sm-12"},l={class:"form-group"},d={key:0,style:{color:"red"}},h={class:"form-group"},v=["disabled"],m={key:0,class:"col-sm-12 text-center"},f=(0,n._)("img",{src:o,alt:"loader",style:{height:"100px"}},null,-1),k=[f],w={key:1,class:"text-center mt-3 mb-3"};function y(t,e,r,o,f,y){var Z=(0,n.up)("AddPost"),b=(0,n.up)("LazyLoadedPosts");return(0,n.wg)(),(0,n.iD)("div",u,[(0,n._)("div",c,[y.isAuthorized&&!f.lastSupportPost?((0,n.wg)(),(0,n.iD)("div",i,[(0,n.Wm)(Z,{onAddPost:y.addPost,type:"support",timeline_id:1},null,8,["onAddPost"])])):(0,n.kq)("",!0),y.isAuthorized?((0,n.wg)(),(0,n.iD)("div",p,[f.showReason?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-primary mb-3",onClick:e[0]||(e[0]=function(t){return f.showReason=!0})},"اعتماد العلامة للكل")),f.showReason?((0,n.wg)(),(0,n.iD)("button",{key:1,class:"btn btn-danger mb-3",onClick:e[1]||(e[1]=function(t){return f.showReason=!1})},"تراجع")):(0,n.kq)("",!0),f.showReason?((0,n.wg)(),(0,n.iD)("form",{key:2,onSubmit:e[3]||(e[3]=(0,a.iM)((function(){return y.setSupportMarkForAll&&y.setSupportMarkForAll.apply(y,arguments)}),["prevent"])),class:"post-text ml-3 w-100 row"},[(0,n._)("div",l,[(0,n.wy)((0,n._)("textarea",{rows:"3",placeholder:"سبب الاعتماد",class:"rounded form-control mt-2 col-12",id:"reason","onUpdate:modelValue":e[2]||(e[2]=function(t){return o.v$.setMarkForm.reason.$model=t}),name:"bio"},"\n                ",512),[[a.nr,o.v$.setMarkForm.reason.$model]]),o.v$.setMarkForm.reason.$error?((0,n.wg)(),(0,n.iD)("small",d," قم بادخال سبب عدد حروفه بين 10 و 500 ")):(0,n.kq)("",!0)]),(0,n._)("div",h,[(0,n._)("button",{type:"submit",disabled:f.message,class:"btn d-block btn-primary mt-1 mb-3 w-75 mx-auto"}," اعتماد ",8,v)]),f.loader?((0,n.wg)(),(0,n.iD)("div",m,k)):(0,n.kq)("",!0),f.message?((0,n.wg)(),(0,n.iD)("h4",w,(0,s.zw)(f.message),1)):(0,n.kq)("",!0)],32)):(0,n.kq)("",!0)])):(0,n.kq)("",!0),(0,n.Wm)(b,{ref:"lazyLoadedPostsRef",type:"support",displayEmpty:!0},null,512)])])}var Z=r(50124),b=r(48534),g=r(91627),x=r(44907),S=r(49579),M=r(8417),P=r(9847),A=r(5705),F=r(10760),$={name:"Support",setup:function(){return{v$:(0,A.ZP)()}},components:{AddPost:g.Z,LazyLoadedPosts:x.Z},data:function(){return{lastSupportPost:{},showReason:!1,setMarkForm:{reason:""},loader:!1,message:null}},validations:function(){return{setMarkForm:{reason:{required:F.C1,maxLength:(0,F.BS)(500),minLength:(0,F.Ei)(10)}}}},computed:{isAuthorized:function(){var t=this.$store.getters.getUser;return S.Z.hasRoles(t,["admin","consultant"])}},created:function(){var t=this;M.Z.getLastSupportPost().then((function(e){t.lastSupportPost=e.data})).catch((function(t){console.log(t)}))},methods:{addPost:function(t){this.$refs.lazyLoadedPostsRef.addNewPost(t)},setSupportMarkForAll:function(){var t=this;return(0,b.Z)((0,Z.Z)().mark((function e(){var r;return(0,Z.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.v$.$touch(),t.v$.setMarkForm.$invalid){e.next=16;break}return t.message="",t.loader=!0,e.prev=4,e.next=7,P.Z.setSupportMarkForAll(t.setMarkForm);case 7:r=e.sent,t.loader=!1,t.message=r,t.v$.setMarkForm.$reset(),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](4),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[4,13]])})))()}}},R=r(83744);const q=(0,R.Z)($,[["render",y]]);var z=q}}]);
//# sourceMappingURL=7057-legacy.b0143b23.js.map