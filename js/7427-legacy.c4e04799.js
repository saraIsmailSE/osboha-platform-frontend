"use strict";(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[7427],{9847:function(t,e,r){var n=r(50124),a=r(48534),o=r(13087),s=r(62833),u=(r(34338),r(66252)),c=r(24150),i=function(){function t(){(0,o.Z)(this,t)}return(0,s.Z)(t,[{key:"userMonthAchievement",value:function(){var t=(0,a.Z)((0,n.Z)().mark((function t(e,r){var a;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.hi.get("marks/user-month-achievement/".concat(e,"/").concat(r));case 3:return a=t.sent,t.abrupt("return",a.data.data);case 7:t.prev=7,t.t0=t["catch"](0),(0,u.S3)(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"userWeekAchievement",value:function(){var t=(0,a.Z)((0,n.Z)().mark((function t(e,r){var a;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.hi.get("marks/user-week-achievement/".concat(e,"/").concat(r));case 3:return a=t.sent,t.abrupt("return",a.data.data);case 7:t.prev=7,t.t0=t["catch"](0),(0,u.S3)(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"ambassadorMark",value:function(){var t=(0,a.Z)((0,n.Z)().mark((function t(e,r){var a;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.hi.get("marks/ambassador-mark/".concat(e,"/").concat(r));case 3:return a=t.sent,t.abrupt("return",a.data.data);case 7:t.prev=7,t.t0=t["catch"](0),(0,u.S3)(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"acceptSupport",value:function(){var t=(0,a.Z)((0,n.Z)().mark((function t(e,r){var a;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.hi.put("marks/accept-support/user/".concat(e,"/").concat(r));case 3:return a=t.sent,t.abrupt("return",a.data);case 7:t.prev=7,t.t0=t["catch"](0),(0,u.S3)(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"rejectSupport",value:function(){var t=(0,a.Z)((0,n.Z)().mark((function t(e,r){var a;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.hi.put("marks/reject-support/user/".concat(e,"/").concat(r));case 3:return a=t.sent,t.abrupt("return",a.data);case 7:t.prev=7,t.t0=t["catch"](0),(0,u.S3)(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"setSupportMarkForAll",value:function(){var t=(0,a.Z)((0,n.Z)().mark((function t(e){var r;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.hi.post("/marks/set-support-for-all",e,{headers:{"Content-type":"multipart/form-data"}});case 3:return r=t.sent,t.abrupt("return",r.data.data);case 7:t.prev=7,t.t0=t["catch"](0),(0,u.S3)(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"topUsersByMonth",value:function(){var t=(0,a.Z)((0,n.Z)().mark((function t(){var e;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.hi.get("marks/top-users-by-month");case 3:return e=t.sent,t.abrupt("return",e.data.data);case 7:t.prev=7,t.t0=t["catch"](0),(0,u.S3)(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"topUsersByWeek",value:function(){var t=(0,a.Z)((0,n.Z)().mark((function t(){var e;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.hi.get("marks/top-users-by-week");case 3:return e=t.sent,t.abrupt("return",e.data.data);case 7:t.prev=7,t.t0=t["catch"](0),(0,u.S3)(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}()}]),t}();e.Z=new i},79940:function(t,e,r){r.d(e,{F:function(){return a}});r(70560);var n=r(1120);function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";throw console.log("[ERROR] ".concat(e," =>"),t.response.data),404===t.response.data.statusCode?n.Z.push({name:"NotFound"}):403===t.response.data.statusCode&&n.Z.push({name:"NotAuthorized"}),t}},83616:function(t,e,r){r.r(e),r.d(e,{default:function(){return nt}});var n=r(66252),a={class:"col-sm-12 mt-3"},o={class:"iq-card-body p-3"},s={class:"d-flex align-items-center mt-3"},u={key:0,class:"col-12"},c={class:"card card-block card-stretch card-height blog"},i=(0,n._)("div",{class:"card-header"},[(0,n._)("h2",null,"اجراءات أخرى")],-1),p={class:"d-flex align-items-center mt-3 row"},l={class:"d-inline-block w-100 text-center col-12"},d=(0,n._)("span",null,"إنجازات الفريق",-1),m=(0,n._)("span",{class:"align-middle material-symbols-outlined"}," keyboard_return ",-1);function h(t,e,r,h,k,v){var w=(0,n.up)("count-down"),f=(0,n.up)("AchievementCard"),g=(0,n.up)("Check"),b=(0,n.up)("Support"),_=(0,n.up)("OtherActions"),y=(0,n.up)("router-link"),x=(0,n.up)("iq-card");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",a,[k.week?((0,n.wg)(),(0,n.j4)(w,{key:0,week:k.week,timer_type:"modify_timer"},null,8,["week"])):(0,n.kq)("",!0),k.mark?((0,n.wg)(),(0,n.j4)(x,{key:1,class:"iq-card"},{default:(0,n.w5)((function(){var t;return[(0,n._)("div",o,[(0,n.Wm)(f,{mark:k.mark,group:k.group},null,8,["mark","group"]),(0,n._)("div",s,[(0,n.Wm)(g,{theses:k.theses},null,8,["theses"])]),(0,n.Wm)(b,{expired:k.expired,support:k.support,supportMark:null===(t=k.mark)||void 0===t?void 0:t.support,week:k.week,onUpdateSupportMark:v.updateSupportMark},null,8,["expired","support","supportMark","week","onUpdateSupportMark"]),k.expired?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",u,[(0,n._)("div",c,[i,(0,n.Wm)(_,{user:k.mark.user},null,8,["user"])])])),(0,n._)("div",p,[(0,n._)("div",l,[k.group&&k.week?((0,n.wg)(),(0,n.j4)(y,{key:0,to:{name:"group.ambassadors-reading",params:{group_id:k.group.id,week_id:k.week.id}},class:"d-block mt-3 mb-3 w-75 mx-auto"},{default:(0,n.w5)((function(){return[d,m]})),_:1},8,["to"])):(0,n.kq)("",!0)])])])]})),_:1})):(0,n.kq)("",!0)])])}var k=r(50124),v=r(48534),w=(r(278),r(60228),r(70560),r(74615)),f=r(16319),g=r(9847),b=r(26667),_=r(3577),y=function(t){return(0,n.dD)("data-v-13cc3ae1"),t=t(),(0,n.Cn)(),t},x={class:"col-12"},Z={class:"card card-block card-stretch card-height blog"},S=y((function(){return(0,n._)("div",{class:"card-header"},[(0,n._)("h2",null,"اعرف مشروعك")],-1)})),C={class:"card-body"},D={class:"blog-description"},M={key:0,class:"table w-100"},q=y((function(){return(0,n._)("thead",null,[(0,n._)("tr",{class:"text-center"},[(0,n._)("th",{scope:"col"},"التفاعل"),(0,n._)("th",{scope:"col"},"التصويت"),(0,n._)("th",{scope:"col"},"المنشور"),(0,n._)("th",{scope:"col"},"العلامة"),(0,n._)("th",{scope:"col"},"التحكم")])],-1)})),R={class:"text-center"},j={key:0},z=["src","alt"],A=y((function(){return(0,n._)("span",{class:"material-symbols-outlined",style:{"font-size":"1rem"}}," link ",-1)})),B=["rowspan"],O=y((function(){return(0,n._)("span",{class:"text-danger-modified font-weight-600"},"لا يوجد دعم بعد",-1)})),W=[O],$=["rowspan"],U=["src"],N=["disabled"],F=["disabled"],T=y((function(){return(0,n._)("tr",null,[(0,n._)("th",{colspan:"4"},"التعليقات")],-1)})),E={colspan:"4"},V={key:0,class:"rounded-pill badge bg-info px-2 ms-1"},H={key:0,class:"text-center"},I=y((function(){return(0,n._)("td",{colspan:"3"},"لا يوجد تعليقات",-1)})),L=[I],P={class:"text-danger-modified font-weight-600",style:{direction:"rtl !important"}};function Y(t,e,a,o,s,u){var c,i=(0,n.up)("font-awesome-icon"),p=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",x,[(0,n._)("div",Z,[S,(0,n._)("div",C,[(0,n._)("div",D,[u.noSupportPost?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("table",M,[q,(0,n._)("tbody",null,[(0,n._)("tr",R,[(0,n._)("td",null,[u.noReaction?((0,n.wg)(),(0,n.iD)("span",j,"لا يوجد")):"like"===a.support.reaction.type?((0,n.wg)(),(0,n.j4)(i,{key:1,icon:["fas","thumbs-up"],size:"xl",class:"text-primary"})):((0,n.wg)(),(0,n.iD)("img",{key:2,src:a.support.reaction.media.path,alt:a.support.reaction.type,class:"reaction-img",height:"20",width:"20"},null,8,z))]),(0,n._)("td",null,(0,_.zw)(u.noVote?"لا يوجد":a.support.vote.option),1),(0,n._)("td",null,[(0,n.Wm)(p,{to:{name:"osboha.post",params:{post_id:a.support.post_id,user_id:t.$route.params.ambassador_id}},class:"d-flex align-items-center justify-content-center"},{default:(0,n.w5)((function(){return[A,(0,n.Uk)(" عرض ")]})),_:1},8,["to"])]),(0,n._)("td",null,(0,_.zw)(a.supportMark),1),u.noReaction&&u.noVote&&u.noComments?((0,n.wg)(),(0,n.iD)("td",{key:0,rowspan:u.managementRowSpan,class:"align-middle"},W,8,B)):((0,n.wg)(),(0,n.iD)("td",{key:1,rowspan:u.managementRowSpan,class:"align-middle"},[s.loading?((0,n.wg)(),(0,n.iD)("img",{key:0,src:r(79885),alt:"loader",style:{height:"50px"}},null,8,U)):((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[0===a.supportMark?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-success",onClick:e[0]||(e[0]=function(){return u.handleSupport&&u.handleSupport.apply(u,arguments)}),disabled:a.expired}," قبول ",8,N)):((0,n.wg)(),(0,n.iD)("button",{key:1,class:"btn btn-danger-modified",onClick:e[1]||(e[1]=function(t){return u.handleSupport(!1)}),disabled:a.expired}," رفض ",8,F))],64))],8,$))]),T,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.support.comments,(function(t){return(0,n.wg)(),(0,n.iD)("tr",{key:t.id},[(0,n._)("td",E,[(0,n.Uk)((0,_.zw)(t.body)+" ",1),t.comment_id>0?((0,n.wg)(),(0,n.iD)("span",V,"رد ")):(0,n.kq)("",!0)])])})),128)),u.noComments?((0,n.wg)(),(0,n.iD)("tr",H,L)):(0,n.kq)("",!0)])])),(0,n._)("p",P,(0,_.zw)(null===(c=a.support)||void 0===c?void 0:c.supportError),1)])])])])}r(79288);var K=r(31025),G={name:"Support",props:{support:{type:Object,required:!0},week:{type:Object,required:!0},supportMark:{type:Number,default:0},expired:{type:Boolean,required:!0}},emits:["updateSupportMark"],data:function(){return{ambassador_id:this.$route.params.ambassador_id,loading:!1}},created:function(){},computed:{noSupportPost:function(){var t;return null!==(null===(t=this.support)||void 0===t?void 0:t.supportError)},noReaction:function(){var t;return null===(null===(t=this.support)||void 0===t?void 0:t.reaction)},noVote:function(){var t;return null===(null===(t=this.support)||void 0===t?void 0:t.vote)},noComments:function(){var t;return 0===(null===(t=this.support)||void 0===t||null===(t=t.comments)||void 0===t?void 0:t.length)},managementRowSpan:function(){var t;return this.noComments?3:(null===(t=this.support)||void 0===t||null===(t=t.comments)||void 0===t?void 0:t.length)+2}},methods:{handleSupport:function(){var t=arguments,e=this;return(0,v.Z)((0,k.Z)().mark((function r(){var n,a,o;return(0,k.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=!(t.length>0&&void 0!==t[0])||t[0],!e.loading){r.next=3;break}return r.abrupt("return");case 3:a=n?"سيتم قبول انجاز اعرف مشروعك وإضافة العلامة للسفير":"سيتم رفض انجاز اعرف مشروعك وخصم العلامة من السفير",o=e.$swal.mixin({customClass:{confirmButton:"btn btn-primary btn-lg",cancelButton:"btn btn-outline-danger btn-lg ms-2"},buttonsStyling:!1}),o.fire({title:"هل أنت متأكد؟",text:a,icon:"warning",showCancelButton:!0,confirmButtonText:"نعم!",cancelButtonText:"تراجع",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}).then(function(){var t=(0,v.Z)((0,k.Z)().mark((function t(r){var a,o;return(0,k.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r.isConfirmed){t.next=21;break}if(e.loading=!0,t.prev=2,!n){t.next=9;break}return t.next=6,g.Z.acceptSupport(e.ambassador_id,e.week.id);case 6:a=t.sent,t.next=12;break;case 9:return t.next=11,g.Z.rejectSupport(e.ambassador_id,e.week.id);case 11:a=t.sent;case 12:200===a.statusCode&&(o=n?"قبول":"رفض",K.Z.toggleToast("تم ".concat(o," انجاز اعرف مشروعك بنجاح"),"success"),e.$emit("updateSupportMark",n?10:0)),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](2),console.log(t.t0.response.data);case 18:return t.prev=18,e.loading=!1,t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[2,15,18,21]])})));return function(e){return t.apply(this,arguments)}}());case 6:case"end":return r.stop()}}),r)})))()}}},J=r(83744);const Q=(0,J.Z)(G,[["render",Y],["__scopeId","data-v-13cc3ae1"]]);var X=Q,tt=r(39356),et={name:"List Reading",components:{Check:f.Z,AchievementCard:w.Z,CountDown:b.Z,Support:X,OtherActions:tt.Z},data:function(){return{theses:[],support:null,group:null,week:null,mark:null,loader:!1,message:null,date:null,now:null,expired:!0}},created:function(){var t=this;return(0,v.Z)((0,k.Z)().mark((function e(){var r,n,a;return(0,k.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.Z.ambassadorMark(t.$route.params.ambassador_id,t.$route.params.week_id);case 3:r=e.sent,t.mark=r.mark,t.theses=r.theses.reduce((function(t,e){var r=t[e.book.name]||[];return r["title"]=e.book.name,r.push(e),t[e.book.name]=r,t}),{}),t.group=r.group,t.week=r.currentWeek,t.support=r.support,n=(new Date).toLocaleString("en-US",{timeZone:"Asia/Riyadh"}),t.now=new Date(n),t.date=new Date(t.week.modify_timer),t.expired=t.time<0,e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](0),a=e.t0.response.data,401===a.statusCode?t.$router.push({name:"NotAuthorized"}):404===a.statusCode?t.$router.push({name:"NotFound"}):K.Z.toggleToast("حدث خطأ ما","error");case 19:case"end":return e.stop()}}),e,null,[[0,15]])})))()},methods:{updateSupportMark:function(t){this.mark.support=t}},computed:{time:function(){return this.date-this.now}}};const rt=(0,J.Z)(et,[["render",h]]);var nt=rt}}]);
//# sourceMappingURL=7427-legacy.c4e04799.js.map