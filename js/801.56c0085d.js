"use strict";(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[801],{90031:function(t,e,s){var a=s(66252),n=s(24150);class i{constructor(){this.prefix="general-conversations"}async addQuestion(t){const e=new FormData;if(e.append("question",t.question),t.media&&t.media.length>0)for(let a=0;a<t.media.length;a++)e.append("media[]",t.media[a]);try{const t=await n.hi.post(`${this.prefix}/questions`,e,{headers:{"Content-type":"multipart/form-data"}});return t.data}catch(s){(0,a.S3)(s)}}async addAnswer(t){const e=new FormData;e.append("answer",t.answer),e.append("question_id",t.question_id),t.image&&e.append("image",t.image);try{const t=await n.hi.post(`${this.prefix}/answers`,e,{headers:{"Content-type":"multipart/form-data"}});return t.data}catch(s){(0,a.S3)(s)}}async getQuestions(t){try{const e=await n.hi.get(`${this.prefix}/questions?page=${t}`);return e.data}catch(e){(0,a.S3)(e)}}async getQuestionById(t){try{const e=await n.hi.get(`${this.prefix}/questions/${t}`);return e.data}catch(e){(0,a.S3)(e)}}async getMyQuestions(t){try{const e=await n.hi.get(`${this.prefix}/questions/my-questions?page=${t}`);return e.data}catch(e){(0,a.S3)(e)}}async getAssignedToMeQuestions(t){try{const e=await n.hi.get(`${this.prefix}/questions/assigned-to-me?page=${t}`);return e.data}catch(e){(0,a.S3)(e)}}async solveQuestion(t){try{const e=await n.hi.put(`${this.prefix}/questions/${t}/solve`);return e.data}catch(e){(0,a.S3)(e)}}async closeQuestion(t){try{const e=await n.hi.put(`${this.prefix}/questions/${t}/close`);return e.data}catch(e){(0,a.S3)(e)}}async assignToParent(t){try{const e=await n.hi.put(`${this.prefix}/questions/${t}/assign-to-parent`);return e.data}catch(e){(0,a.S3)(e)}}async getStatistics(){try{const t=await n.hi.get(`${this.prefix}/questions/statistics`);return t.data}catch(t){(0,a.S3)(t)}}async closeOverdueQuestions(){try{const t=await n.hi.put(`${this.prefix}/questions/close-overdue`);return t.data}catch(t){(0,a.S3)(t)}}async addWorkingHours(t,e){try{const s=await n.hi.post(`${this.prefix}/working-hours`,{date:t,minutes:e});return s.data}catch(s){(0,a.S3)(s)}}async getWorkingHours(){try{const t=await n.hi.get(`${this.prefix}/working-hours`);return t.data}catch(t){(0,a.S3)(t)}}async getWorkingHoursStatistics(t=""){try{const e=await n.hi.get(`${this.prefix}/working-hours/statistics?date=${t}`);return e.data}catch(e){(0,a.S3)(e)}}async addFollowup(){try{const t=await n.hi.post(`${this.prefix}/followup`);return t.data}catch(t){(0,a.S3)(t)}}async getFollowupStatistics(){try{const t=await n.hi.get(`${this.prefix}/followup/statistics`);return t.data}catch(t){(0,a.S3)(t)}}}e.Z=new i},60351:function(t,e,s){s.d(e,{So:function(){return a},Wx:function(){return i},b5:function(){return o},gg:function(){return r},jx:function(){return n}});const a={ambassador:"سفير",leader:"قائد",supervisor:"مراقب",advisor:"موجه",consultant:"مستشار",admin:"ادارة",book_quality_team:"جودة الكتب"},n={arabic:"اللغة العربية",english:"اللغة الانجليزية"},i={normal:"منهج",ramadan:"رمضان",young:"يافعين",kids:"أطفال",tafseer:"تفسير",free:"كتاب حر"},r={January:"يناير",February:"فبراير",March:"مارس",April:"ابريل",May:"مايو",June:"يونيو",July:"يوليو",August:"أغسطس",September:"سبتمبر",October:"أكتوبر",November:"نوفمبر",December:"ديسمبر"},o={"01":"يناير","02":"فبراير","03":"مارس","04":"ابريل","05":"مايو","06":"يونيو","07":"يوليو","08":"أغسطس","09":"سبتمبر",10:"أكتوبر",11:"نوفمبر",12:"ديسمبر"}},90801:function(t,e,s){s.r(e),s.d(e,{default:function(){return it}});var a=s(66252),n=s(3577),i=s(49963),r=s(38657),o=s(51948);const c=t=>((0,a.dD)("data-v-ea50794a"),t=t(),(0,a.Cn)(),t),l={class:"container"},u={class:"row"},d={class:"col-lg-12"},h={class:"card"},p=c((()=>(0,a._)("div",{class:"card-header"},[(0,a._)("div",{class:"header-title"},[(0,a._)("h4",{class:"card-title bg-primary text-white text-center px-2 py-3"}," إحصائيات ساعات العمل ")])],-1))),g={class:"card-body"},y={key:0,class:"col-sm-12 text-center"},m=c((()=>(0,a._)("img",{src:r,alt:"loader"},null,-1))),f=[m],w={key:1,class:"col-12"},_={class:"row"},v={class:"col-12 col-md-12 col-lg-12"},x={class:"card"},b={class:"card-title pt-2"},k={class:"text-center"},M={class:"card-body"},S=c((()=>(0,a._)("div",{class:"d-flex align-items-center justify-content-center"},[(0,a._)("div",{class:"border rounded avatar-55 d-flex align-items-center justify-content-center"},[(0,a._)("img",{class:"img-fluid",src:o,alt:""})])],-1))),$={class:"mt-4"},H={class:"text-center rtl"},T=c((()=>(0,a._)("p",{class:"mb-0 text-center"},"مجموع الساعات",-1))),D={class:"form-group col-12"},q={class:"col-12 col-md-12 col-lg-12"},O={class:"card"},Y={class:"card-title pt-2"},A={class:"text-center"},z={class:"card-body"},W={class:"d-flex align-items-center justify-content-around"},Q=c((()=>(0,a._)("div",{class:"border rounded avatar-55 d-flex align-items-center justify-content-center"},[(0,a._)("img",{class:"img-fluid",src:o,alt:""})],-1))),Z={class:"text-center rtl"},j=c((()=>(0,a._)("p",{class:"mb-0 text-center"},"مجموع الساعات",-1))),C={class:"card-title pt-2 px-2 d-flex align-items-center"},F=c((()=>(0,a._)("span",{class:"material-symbols-outlined"}," atr ",-1))),K={class:"card-body"},J={class:"blog-description"},E={class:"table w-100 table-bordered"},I=c((()=>(0,a._)("thead",null,[(0,a._)("tr",{class:"py-3"},[(0,a._)("th",{scope:"col"},"الاسم"),(0,a._)("th",{scope:"col"},"الأحد"),(0,a._)("th",{scope:"col"},"الاثنين"),(0,a._)("th",{scope:"col"},"الثلاثاء"),(0,a._)("th",{scope:"col"},"الأربعاء"),(0,a._)("th",{scope:"col"},"الخميس"),(0,a._)("th",{scope:"col"},"الجمعة"),(0,a._)("th",{scope:"col"},"السبت"),(0,a._)("th",{scope:"col"},"مجموع الساعات"),(0,a._)("th",{scope:"col"},"أيام التقصير")])],-1))),L=["colspan"],B=c((()=>(0,a._)("td",{class:"bold"},"المجموع بالدقائق",-1))),N=["colspan"],P=c((()=>(0,a._)("td",{class:"bold"},"المجموع بالساعات",-1))),R=["colspan"],U=c((()=>(0,a._)("hr",null,null,-1)));function V(t,e,s,r,o,c){var m,V,G;return(0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("div",u,[(0,a._)("div",d,[(0,a._)("div",h,[p,(0,a._)("div",g,[o.loading?((0,a.wg)(),(0,a.iD)("div",y,f)):((0,a.wg)(),(0,a.iD)("div",w,[(0,a._)("div",_,[(0,a._)("div",v,[(0,a._)("div",x,[(0,a._)("div",b,[(0,a._)("h3",k,(0,n.zw)(null===(m=o.lastWeek)||void 0===m?void 0:m.title),1)]),(0,a._)("div",M,[S,(0,a._)("div",$,[(0,a._)("h4",H,(0,n.zw)(null!==(V=o.lastWeek)&&void 0!==V&&V.minutes?t.minutesToHoursAndMinutes(null===(G=o.lastWeek)||void 0===G?void 0:G.minutes):0),1),T])])])]),(0,a._)("div",D,[(0,a.wy)((0,a._)("input",{type:"month",class:"form-control",id:"inputMonth","onUpdate:modelValue":e[0]||(e[0]=t=>o.selectedMonthYear=t)},null,512),[[i.nr,o.selectedMonthYear]])]),(0,a._)("div",q,[(0,a._)("div",O,[(0,a._)("div",Y,[(0,a._)("h3",A,"شهر "+(0,n.zw)(c.monthTitle),1)]),(0,a._)("div",z,[(0,a._)("div",W,[Q,(0,a._)("div",null,[(0,a._)("h4",Z,(0,n.zw)(o.minutesOfSelectedMonth),1),j])]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.workingHours,((e,s)=>((0,a.wg)(),(0,a.iD)("div",{class:"card mt-4",key:s},[(0,a._)("div",C,[F,(0,a._)("h5",null,(0,n.zw)(s),1)]),(0,a._)("div",K,[(0,a._)("div",J,[(0,a._)("table",E,[I,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.objectToArray(e),(e=>((0,a.wg)(),(0,a.iD)(a.HY,{key:e.key},[(0,a._)("tr",null,[(0,a._)("td",{colspan:o.columns,class:"table-info text-center bold py-2"},(0,n.zw)(e.key),9,L)]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.value,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.user.id},[(0,a._)("td",null,(0,n.zw)(e.user.name),1),((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(7,(s=>{var i,r;return(0,a._)("td",{key:s,class:(0,n.C_)(["text-white text-center",{"bg-primary":c.isMoreThanOneHour(null!==(i=e.days[s])&&void 0!==i?i:0),"bg-danger":!c.isMoreThanOneHour(null!==(r=e.days[s])&&void 0!==r?r:0)}])},(0,n.zw)(e.days[s]?t.minutesToHoursAndMinutes(e.days[s]):0),3)})),64)),(0,a._)("td",null,(0,n.zw)(e.minutes?t.minutesToHoursAndMinutes(e.minutes):0),1),(0,a._)("td",null,(0,n.zw)(c.calculateDaysLessThanOneHour(e.days)),1)])))),128)),(0,a._)("tr",null,[B,(0,a._)("td",{class:"bold",colspan:o.columns-1},(0,n.zw)(e.value?c.calculateTotalMinutes(e.value)+" دقيقة":0),9,N)]),(0,a._)("tr",null,[P,(0,a._)("td",{class:"bold",colspan:o.columns-1},(0,n.zw)(e.value?t.minutesToHoursAndMinutes(c.calculateTotalMinutes(e.value)):0),9,R)])],64)))),128))])]),U])])])))),128))])])])])]))])])])])])}var G=s(43144),X=(s(278),s(90031)),tt=s(8209),et=s(60351),st={name:"WorkingHoursStats",async created(){await this.getStatistics()},mounted(){const t=new Date,{year:e,month:s}=tt.Z.getMonthAndYear(t),a=`${e}-${s}`;this.selectedMonthYear=a},data(){return{lastWeek:null,workingHours:[],selectedMonth:(new Date).getMonth()+1,minutesOfSelectedMonth:0,loading:!1,columns:10,selectedMonthYear:""}},computed:{monthTitle(){const{month:t}=tt.Z.getMonthAndYear(this.selectedMonthYear);return et.b5[t]}},watch:{selectedMonthYear(){this.getStatistics()}},methods:(0,G.Z)((0,G.Z)({},tt.Z),{},{async getStatistics(){this.loading=!0;try{const t=await X.Z.getWorkingHoursStatistics(this.selectedMonthYear),e=t.data;this.lastWeek=e.lastWeek,this.workingHours=e.workingHours,this.minutesOfSelectedMonth=e.minutesOfSelectedMonth?this.minutesToHoursAndMinutes(e.minutesOfSelectedMonth):0}catch(t){this.toggleErrorToast()}finally{this.loading=!1}},calculateTotalMinutes(t){return t.reduce(((t,e)=>t+e.minutes),0)},isMoreThanOneHour(t){return t>=60},calculateDaysLessThanOneHour(t){let e=0;for(let s=1;s<=7;s++)(!t[`0${s}`]||t[`0${s}`]&&t[`0${s}`]<60)&&e++;return--e}})},at=s(83744);const nt=(0,at.Z)(st,[["render",V],["__scopeId","data-v-ea50794a"]]);var it=nt},51948:function(t,e,s){t.exports=s.p+"img/chart.d628d913.gif"},38657:function(t,e,s){t.exports=s.p+"img/loader-3.208ab985.gif"},16834:function(t,e,s){var a=s(3689);t.exports=function(t,e){var s=[][t];return!!s&&a((function(){s.call(null,e||function(){return 1},1)}))}},88820:function(t,e,s){var a=s(10509),n=s(90690),i=s(94413),r=s(6310),o=TypeError,c=function(t){return function(e,s,c,l){a(s);var u=n(e),d=i(u),h=r(u),p=t?h-1:0,g=t?-1:1;if(c<2)while(1){if(p in d){l=d[p],p+=g;break}if(p+=g,t?p<0:h<=p)throw new o("Reduce of empty array with no initial value")}for(;t?p>=0:h>p;p+=g)p in d&&(l=s(l,d[p],p,u));return l}};t.exports={left:c(!1),right:c(!0)}},278:function(t,e,s){var a=s(79989),n=s(88820).left,i=s(16834),r=s(3615),o=s(50806),c=!o&&r>79&&r<83,l=c||!i("reduce");a({target:"Array",proto:!0,forced:l},{reduce:function(t){var e=arguments.length;return n(this,t,e,e>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=801.56c0085d.js.map