"use strict";(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[9356],{2985:function(e,t,r){var n=r(50124),a=r(48534),s=r(13087),c=r(62833),u=(r(34338),r(66252)),o=r(79940),i=r(24150),p=function(){function e(){(0,s.Z)(this,e)}return(0,c.Z)(e,[{key:"create",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.post("/userexception/create",t,{headers:{"Content-type":"multipart/form-data"}});case 3:return r=e.sent,e.abrupt("return",r.data.data);case 7:e.prev=7,e.t0=e["catch"](0),(0,u.S3)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setExceptionalFreez",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.post("/userexception/set-exceptional-freez",t,{headers:{"Content-type":"multipart/form-data"}});case 3:return r=e.sent,e.abrupt("return",r.data.data);case 7:e.prev=7,e.t0=e["catch"](0),(0,u.S3)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setNewUser",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.post("/userexception/set-new-user",t,{headers:{"Content-type":"multipart/form-data"}});case 3:return r=e.sent,e.abrupt("return",r.data.data);case 7:e.prev=7,e.t0=e["catch"](0),(0,u.S3)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getExceptionById",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.get("userexception/show/".concat(t));case 3:return r=e.sent,e.abrupt("return",r.data.data);case 7:e.prev=7,e.t0=e["catch"](0),(0,o.F)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"update",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.patch("userexception/".concat(t),r,{headers:{"Content-type":"multipart/form-data"}});case 3:return a=e.sent,e.abrupt("return",a.data.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"updateStatus",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.patch("userexception/update-status/".concat(t),{decision:r.decision,note:r.note,week_id:r.week_id});case 3:return a=e.sent,e.abrupt("return",a.data.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"updateExceptionTypeById",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.post("/userexception/update",{id:t,type:r});case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"cancelException",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.get("userexception/cancel/".concat(t));case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getAllUserExceptions",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.get("userexception/user-exceptions/".concat(t));case 3:return r=e.sent,e.abrupt("return",r.data.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"exceptionsFilter",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.hi.get("userexception/exceptions-filter/".concat(t,"/").concat(r));case 3:return a=e.sent,e.abrupt("return",a.data.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t,r){return e.apply(this,arguments)}return t}()}]),e}();t.Z=new p},39356:function(e,t,r){r.d(t,{Z:function(){return U}});var n=r(66252),a=r(49963),s=r(3577),c=r(79885),u=function(e){return(0,n.dD)("data-v-c2455b6a"),e=e(),(0,n.Cn)(),e},o={class:"card-body"},i={class:"blog-description"},p={class:"form-group mt-3 mb-1"},l=u((function(){return(0,n._)("h4",null,"السبب",-1)})),m={class:"form-group row"},d={class:"mb-0"},w={key:0,class:"d-block text-start mt-1",style:{color:"red"}},h={class:"form-group"},v=["disabled"],f={class:"form-check mt-2 w-100 text-start"},x=["checked"],b=u((function(){return(0,n._)("h4",{class:"form-check-label",for:"allow_submit_is_new"}," هذا العضو جديد وفي اسبوعه الأول أو الثاني ",-1)})),k={class:"form-group"},y=["disabled"],Z={key:0,class:"col-sm-12 text-center"},_=u((function(){return(0,n._)("img",{src:c,alt:"loader",style:{height:"100px"}},null,-1)})),g=[_],F={key:1,class:"text-center mt-3 mb-3"};function $(e,t,r,c,u,_){return(0,n.wg)(),(0,n.iD)("div",o,[(0,n._)("div",i,[(0,n._)("button",{class:"btn mr-2 mt-1 w-75 btn-freez",onClick:t[0]||(t[0]=function(){u.showExceptionForm=!u.showExceptionForm,u.showIsNewForm=!1})}," طلب تجميد استثنائي "),_.isnew&&e.mark.reading_mark+e.mark.writing_mark+e.mark.support<=50?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-success ms-2 mt-1 w-75",onClick:t[1]||(t[1]=function(){u.showIsNewForm=!u.showIsNewForm,u.showExceptionForm=!1})}," تعيين عضو جديد ")):(0,n.kq)("",!0)]),(0,n.wy)((0,n._)("form",{onSubmit:t[3]||(t[3]=(0,a.iM)((function(){return _.submitException&&_.submitException.apply(_,arguments)}),["prevent"])),class:"post-text ml-3 w-100 row"},[(0,n._)("div",p,[l,(0,n._)("div",m,[(0,n.wy)((0,n._)("textarea",{rows:"5",placeholder:"سبب التجميد الاستثنائي",class:"rounded form-control mt-2 col-12",id:"exceptionReason","onUpdate:modelValue":t[2]||(t[2]=function(e){return c.v$.exceptionForm.reason.$model=e}),name:"reason"},"\r\n                        ",512),[[a.nr,c.v$.exceptionForm.reason.$model]]),(0,n._)("p",d,[(0,n._)("span",{class:(0,s.C_)({"text-danger":c.v$.exceptionForm.reason.$error})},(0,s.zw)(c.v$.exceptionForm.reason.$model.length),3),(0,n.Uk)(" /250 ")])]),c.v$.exceptionForm.reason.$error?((0,n.wg)(),(0,n.iD)("small",w," * قم بادخال سبب لا ينقص عن 10 حروف ولا يزيد عن 250 حرف ")):(0,n.kq)("",!0)]),(0,n._)("div",h,[(0,n._)("button",{type:"submit",disabled:u.message,class:"btn d-block btn-freez float-end mx-auto"}," تجميد ",8,v)])],544),[[a.F8,u.showExceptionForm]]),(0,n.wy)((0,n._)("form",{onSubmit:t[5]||(t[5]=(0,a.iM)((function(){return _.submitIsNew&&_.submitIsNew.apply(_,arguments)}),["prevent"])),class:"mt-3 post-text ml-3 w-100 row"},[(0,n._)("div",f,[(0,n._)("input",{type:"checkbox",checked:u.allowSubmitIsNew,class:"form-check-input",id:"allow_submit_is_new",ref:"allow_submit_is_new",onClick:t[4]||(t[4]=function(e){return u.allowSubmitIsNew=!u.allowSubmitIsNew})},null,8,x),b]),(0,n._)("div",k,[(0,n._)("button",{type:"submit",disabled:!u.allowSubmitIsNew,class:"btn d-block btn-primary float-end mx-auto"}," اعتماد عضو جديد ",8,y)])],544),[[a.F8,u.showIsNewForm]]),u.loader?((0,n.wg)(),(0,n.iD)("div",Z,g)):(0,n.kq)("",!0),u.message?((0,n.wg)(),(0,n.iD)("h4",F,(0,s.zw)(u.message),1)):(0,n.kq)("",!0)])}var E=r(50124),I=r(48534),N=r(2985),C=r(5705),S=r(10760),D={name:"List Reading",setup:function(){return{v$:(0,C.ZP)()}},created:function(){this.exceptionForm.user_id=this.user.id,this.exceptionForm.week_id=this.$route.params.week_id},props:{user:{type:Object,required:!0}},data:function(){return{exceptionForm:{reason:"",user_id:0,week_id:0},showExceptionForm:!1,showIsNewForm:!1,allowSubmitIsNew:!1,loader:!1,message:null}},validations:function(){return{exceptionForm:{reason:{required:S.C1,minLength:(0,S.Ei)(10),maxLength:(0,S.BS)(250)}}}},methods:{submitException:function(){var e=this;return(0,I.Z)((0,E.Z)().mark((function t(){var r;return(0,E.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.v$.$touch(),e.v$.exceptionForm.$invalid){t.next=19;break}return e.message="",e.loader=!0,t.prev=4,t.next=7,N.Z.setExceptionalFreez(e.exceptionForm);case 7:r=t.sent,e.message=r,e.showExceptionForm=!1,e.v$.exceptionForm.$reset(),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](4),console.log("[Exception request error]",t.t0);case 16:return t.prev=16,e.loader=!1,t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[4,13,16,19]])})))()},submitIsNew:function(){var e=this;return(0,I.Z)((0,E.Z)().mark((function t(){var r;return(0,E.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.message="",e.loader=!0,t.prev=2,e.exceptionForm.reason="عضو جديد",t.next=6,N.Z.setNewUser(e.exceptionForm);case 6:r=t.sent,e.message=r,e.showIsNewForm=!1,e.v$.exceptionForm.$reset(),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),console.log("[submit new user error]",t.t0);case 15:return t.prev=15,e.loader=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[2,12,15,18]])})))()}},computed:{isnew:function(){if(this.user){var e=new Date(this.user.created_at),t=new Date,r=new Date;return r.setDate(t.getDate()-14),r.setHours(0,0,0,0),e.setHours(0,0,0,0),e>=r&&e<=t}return!1}}},q=r(83744);const z=(0,q.Z)(D,[["render",$],["__scopeId","data-v-c2455b6a"]]);var U=z}}]);
//# sourceMappingURL=9356-legacy.1b6197d0.js.map