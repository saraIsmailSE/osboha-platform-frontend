"use strict";(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[9327],{79113:function(e,r,a){var s=a(24150);class t{constructor(){this.prefix="roles"}async assignRole(e){try{const r=await s.hi.post(`${this.prefix}/assign-role`,e);return r.data.data}catch(r){return r.response}}async ChangeAdvisingTeam(e){try{const r=await s.hi.post(`${this.prefix}/change-advising-team`,e);return r.data.data}catch(r){return r.response}}async supervisorsSwap(e){try{const r=await s.hi.post(`${this.prefix}/supervisors-swap`,e);return r.data.data}catch(r){return r.response}}async newSupervisor_currentToAmbassador(e){try{const r=await s.hi.post(`${this.prefix}/new-supervisor-current-to-ambassador`,e);return r.data.data}catch(r){return r.response}}async newSupervisor_currentToLeader(e){try{const r=await s.hi.post(`${this.prefix}/new-supervisor-current-to-leader`,e);return r.data.data}catch(r){return r.response}}async newLeader_currentToAmbassador(e){try{const r=await s.hi.post(`${this.prefix}/new-leader-current-to-ambassador`,e);return r.data.data}catch(r){return r.response}}async transferLeader(e){try{const r=await s.hi.post(`${this.prefix}/transfer-leader`,e);return r.data.data}catch(r){return r.response}}async transferAmbassador(e){try{const r=await s.hi.post(`${this.prefix}/transfer-ambassador`,e);return r.data.data}catch(r){return r.response}}}r.Z=new t},60351:function(e,r,a){a.d(r,{So:function(){return s},Wx:function(){return o},b5:function(){return n},gg:function(){return i},jx:function(){return t}});const s={ambassador:"سفير",leader:"قائد",supervisor:"مراقب",advisor:"موجه",consultant:"مستشار",admin:"ادارة",book_quality_team:"جودة الكتب"},t={arabic:"اللغة العربية",english:"اللغة الانجليزية"},o={normal:"منهج",ramadan:"رمضان",young:"يافعين",kids:"أطفال",tafseer:"تفسير",free:"كتاب حر"},i={January:"يناير",February:"فبراير",March:"مارس",April:"ابريل",May:"مايو",June:"يونيو",July:"يوليو",August:"أغسطس",September:"سبتمبر",October:"أكتوبر",November:"نوفمبر",December:"ديسمبر"},n={"01":"يناير","02":"فبراير","03":"مارس","04":"ابريل","05":"مايو","06":"يونيو","07":"يوليو","08":"أغسطس","09":"سبتمبر",10:"أكتوبر",11:"نوفمبر",12:"ديسمبر"}},68071:function(e,r,a){a.r(r),a.d(r,{default:function(){return I}});var s=a(66252),t=a(49963),o=a(3577),i=a.p+"img/upgrade-user.6fc5a363.png",n=a(79885);const l={class:"col-sm-12 mt-3"},d=(0,s._)("div",{class:"iq-card-header-toolbar d-flex text-center align-items-center mx-auto"},[(0,s._)("h1",{class:"text-center mt-3 mb-3"},"ترقية")],-1),c=(0,s._)("div",{class:"iq-card-body p-4"},[(0,s._)("div",{class:"image-block text-center"},[(0,s._)("img",{src:i,class:"img-fluid rounded w-75",alt:"blog-img"})])],-1),u={class:"col-12 bg-white pt-2"},m={class:"sign-in-from"},h={class:"form-group"},p=(0,s._)("label",{for:"user"},"المستخدم",-1),f={key:0,style:{color:"red"}},v={key:1,style:{color:"red"}},g={class:"form-group"},y=(0,s._)("label",{for:"head_user"}," المسؤول عنه",-1),_={key:0,style:{color:"red"}},w={key:1,style:{color:"red"}},b={class:"form-group"},$=(0,s._)("label",{for:"role"},"الترقية",-1),k=(0,s._)("option",{value:"0",selected:""},"ترقية إلى",-1),x=["value"],q={key:0,style:{color:"red"}},D={key:0,class:"form-group text-center"},A={style:{color:"red"}},S={key:1,class:"col-sm-12 text-center"},C=(0,s._)("p",{class:"text-center"},"جاري الترقية",-1),R=(0,s._)("img",{src:n,alt:"loader",style:{height:"100px"}},null,-1),L=[C,R],O={key:2,class:"d-inline-block w-100"},T=["disabled"];function M(e,r,a,i,n,C){const R=(0,s.up)("iq-card");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s.Wm)(R,{class:"iq-card"},{default:(0,s.w5)((()=>[d,c,(0,s._)("div",u,[(0,s._)("div",m,[(0,s._)("form",{class:"mt-2",onSubmit:r[3]||(r[3]=(0,t.iM)((e=>C.onSubmit()),["prevent"]))},[(0,s._)("div",h,[p,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":r[0]||(r[0]=e=>i.v$.form.user.$model=e),type:"email",class:"form-control mb-0",id:"user",placeholder:"ادخل بريد المستخدم"},null,512),[[t.nr,i.v$.form.user.$model]]),i.v$.form.user.$error?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[i.v$.form.user.required.$invalid?((0,s.wg)(),(0,s.iD)("small",f,"البريد الالكتروني للمستخدم مطلوب")):(0,s.kq)("",!0),i.v$.form.user.email.$invalid?((0,s.wg)(),(0,s.iD)("small",v,"البريد الالكتروني للمستخدم غير صحيح")):(0,s.kq)("",!0)],64)):(0,s.kq)("",!0)]),(0,s._)("div",g,[y,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":r[1]||(r[1]=e=>i.v$.form.head_user.$model=e),type:"email",class:"form-control mb-0",id:"head_user",placeholder:"ادخل بريد المسؤول عنه"},null,512),[[t.nr,i.v$.form.head_user.$model]]),i.v$.form.head_user.$error?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[i.v$.form.head_user.required.$invalid?((0,s.wg)(),(0,s.iD)("small",_," البريد الالكتروني للمسؤول مطلوب")):(0,s.kq)("",!0),i.v$.form.head_user.email.$invalid?((0,s.wg)(),(0,s.iD)("small",w," البريد الالكتروني للمسؤول غير صحيح")):(0,s.kq)("",!0)],64)):(0,s.kq)("",!0)]),(0,s._)("div",b,[$,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":r[2]||(r[2]=e=>i.v$.form.role_id.$model=e),class:"form-select","data-trigger":"",name:"role",id:"role"},[k,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.roles,((e,r)=>((0,s.wg)(),(0,s.iD)("option",{key:r,value:e.id},(0,o.zw)(n.ARABIC_ROLES[e.name]),9,x)))),128))],512),[[t.bM,i.v$.form.role_id.$model]]),i.v$.form.role_id.$error?((0,s.wg)(),(0,s.iD)("small",q," يرجى اختيار نوع الترقية ")):(0,s.kq)("",!0)]),n.message?((0,s.wg)(),(0,s.iD)("div",D,[(0,s._)("small",A,(0,o.zw)(n.message),1)])):(0,s.kq)("",!0),n.loader?((0,s.wg)(),(0,s.iD)("div",S,L)):((0,s.wg)(),(0,s.iD)("div",O,[(0,s._)("button",{type:"submit",class:"btn btn-primary float-end",disabled:n.loader}," ترقية ",8,T)]))],32)])])])),_:1})])}var V=a(5705),Z=a(10760),H=a(24150),J=a(60351),U=a(79113);const Y=e=>e>0;var z={name:"AssignRole",setup(){return{v$:(0,V.ZP)()}},async created(){const e=await H.hi.get("get-roles/1");this.roles=e.data.data},data(){return{loader:!1,ARABIC_ROLES:J.So,form:{user:"",head_user:"",role_id:0},roles:[],message:""}},validations(){return{form:{user:{required:Z.C1,email:Z.Do},head_user:{required:Z.C1,email:Z.Do},role_id:{required:Z.C1,maxValue:Y}}}},methods:{async onSubmit(){if(this.v$.$validate(),!this.v$.$error){this.loader=!0;try{this.message="";const e=await U.Z.assignRole(this.form);this.message=e,this.v$.form.$reset(),this.form={user:"",head_user:"",role_id:0},setTimeout((()=>{this.message=""}),1800)}catch(e){this.message="حدث خطأ, يرجى المحاولة لاحقاً"}finally{this.loader=!1}}}}},B=a(83744);const E=(0,B.Z)(z,[["render",M]]);var I=E}}]);
//# sourceMappingURL=9327.be4af4d8.js.map