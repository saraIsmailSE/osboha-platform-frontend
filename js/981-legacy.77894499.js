"use strict";(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[981],{70981:function(e,r,t){t.r(r),t.d(r,{default:function(){return J}});var s=t(66252),o=t(49963),a=t(3577),n=t(42922),i=t(79885),l={class:"col-sm-12 mt-3"},u=(0,s._)("div",{class:"iq-card-header-toolbar d-flex text-center align-items-center mx-auto"},[(0,s._)("h1",{class:"text-center mt-3 mb-3"},"اضافة مسؤول")],-1),c=(0,s._)("div",{class:"iq-card-body p-4"},[(0,s._)("div",{class:"image-block text-center"},[(0,s._)("img",{src:n,class:"img-fluid rounded w-75",alt:"blog-img"})])],-1),d={class:"col-12 bg-white pt-2"},m={class:"sign-in-from"},p={class:"form-group"},f=(0,s._)("label",{for:"user"},"المستخدم",-1),g={key:0,style:{color:"red"}},v={key:1,style:{color:"red"}},_={class:"form-group"},y=(0,s._)("label",{for:"head_user"}," التوجيه المسؤول عنه",-1),b=(0,s._)("option",{value:"",selected:""},"اختر التوجيه",-1),$=["value"],w={key:0,style:{color:"red"}},k={class:"form-group"},h=(0,s._)("label",{for:"role"},"دور المسؤول",-1),x=(0,s._)("option",{value:"",selected:""},"اختر دور المسؤول",-1),q=(0,s._)("option",{value:"advisor"},"موجه",-1),D=(0,s._)("option",{value:"consultant"},"مستشار",-1),Z=(0,s._)("option",{value:"admin"},"ادارة",-1),C=[x,q,D,Z],V={key:0,style:{color:"red"}},A={key:0,class:"form-group text-center"},M={style:{color:"red"}},S={key:1,class:"col-sm-12 text-center"},U=(0,s._)("p",{class:"text-center"},"جاري الاضافة",-1),z=(0,s._)("img",{src:i,alt:"loader",style:{height:"100px"}},null,-1),H=[U,z],O={key:2,class:"d-inline-block w-100"},T=["disabled"];function Y(e,r,t,n,i,x){var q=(0,s.up)("iq-card");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s.Wm)(q,{class:"iq-card"},{default:(0,s.w5)((function(){return[u,c,(0,s._)("div",d,[(0,s._)("div",m,[(0,s._)("form",{class:"mt-2",onSubmit:r[3]||(r[3]=(0,o.iM)((function(e){return x.onSubmit()}),["prevent"]))},[(0,s._)("div",p,[f,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":r[0]||(r[0]=function(e){return n.v$.form.user.$model=e}),type:"email",class:"form-control mb-0",id:"user",placeholder:"ادخل بريد المستخدم"},null,512),[[o.nr,n.v$.form.user.$model]]),n.v$.form.user.$error?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[n.v$.form.user.required.$invalid?((0,s.wg)(),(0,s.iD)("small",g,"البريد الالكتروني للمستخدم مطلوب")):(0,s.kq)("",!0),n.v$.form.user.email.$invalid?((0,s.wg)(),(0,s.iD)("small",v,"البريد الالكتروني للمستخدم غير صحيح")):(0,s.kq)("",!0)],64)):(0,s.kq)("",!0)]),(0,s._)("div",_,[y,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":r[1]||(r[1]=function(e){return n.v$.form.group_id.$model=e}),class:"form-select","data-trigger":"",name:"group_id",id:"group_id"},[b,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.groups,(function(e,r){return(0,s.wg)(),(0,s.iD)("option",{key:r,value:e.id},(0,a.zw)(e.name),9,$)})),128))],512),[[o.bM,n.v$.form.group_id.$model]]),n.v$.form.group_id.$error?((0,s.wg)(),(0,s.iD)("small",w," يرجى اختيار التوجيه ")):(0,s.kq)("",!0)]),(0,s._)("div",k,[h,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":r[2]||(r[2]=function(e){return n.v$.form.user_type.$model=e}),class:"form-select","data-trigger":"",name:"user_type",id:"user_type"},C,512),[[o.bM,n.v$.form.user_type.$model]]),n.v$.form.user_type.$error?((0,s.wg)(),(0,s.iD)("small",V," يرجى اختيار نوع الترقية ")):(0,s.kq)("",!0)]),i.message?((0,s.wg)(),(0,s.iD)("div",A,[(0,s._)("small",M,(0,a.zw)(i.message),1)])):(0,s.kq)("",!0),i.loader?((0,s.wg)(),(0,s.iD)("div",S,H)):((0,s.wg)(),(0,s.iD)("div",O,[(0,s._)("button",{type:"submit",class:"btn btn-primary float-end",disabled:i.loader}," اضافة ",8,T)]))],32)])])]})),_:1})])}var B=t(50124),G=t(48534),K=t(5705),P=t(10760),W=t(22658),j=function(e){return e>0},E={name:"Assign Administrator",setup:function(){return{v$:(0,K.ZP)()}},created:function(){var e=this;return(0,G.Z)((0,B.Z)().mark((function r(){return(0,B.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,W.Z.getGroupByType("advising");case 2:e.groups=r.sent;case 3:case"end":return r.stop()}}),r)})))()},data:function(){return{loader:!1,groups:[],form:{user:"",group_id:"",user_type:""},message:""}},validations:function(){return{form:{user:{required:P.C1,email:P.Do},group_id:{required:P.C1,maxValue:j},user_type:{required:P.C1}}}},methods:{onSubmit:function(){var e=this;return(0,G.Z)((0,B.Z)().mark((function r(){var t;return(0,B.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.v$.$validate(),e.v$.$error){r.next=20;break}return e.loader=!0,r.prev=3,e.message="",r.next=7,W.Z.assignAdministrator(e.form);case 7:t=r.sent,e.message=t,e.v$.form.$reset(),e.form={user:"",user_type:""},setTimeout((function(){e.message=""}),1800),r.next=17;break;case 14:r.prev=14,r.t0=r["catch"](3),e.message="حدث خطأ, يرجى المحاولة لاحقاً";case 17:return r.prev=17,e.loader=!1,r.finish(17);case 20:case"end":return r.stop()}}),r,null,[[3,14,17,20]])})))()}}},F=t(83744);const I=(0,F.Z)(E,[["render",Y]]);var J=I},42922:function(e,r,t){e.exports=t.p+"img/assign-administrator.46bdcb01.png"}}]);
//# sourceMappingURL=981-legacy.77894499.js.map