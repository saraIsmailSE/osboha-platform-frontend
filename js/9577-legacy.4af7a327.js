"use strict";(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[9577],{2985:function(e,t,r){var n=r(50124),a=r(48534),c=r(13087),i=r(62833),o=(r(34338),r(66252)),u=r(79940),s=r(24150),p=function(){function e(){(0,c.Z)(this,e)}return(0,i.Z)(e,[{key:"create",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.hi.post("/userexception/create",t,{headers:{"Content-type":"multipart/form-data"}});case 3:return r=e.sent,e.abrupt("return",r.data.data);case 7:e.prev=7,e.t0=e["catch"](0),(0,o.S3)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setExceptionalFreez",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.hi.post("/userexception/set-exceptional-freez",t,{headers:{"Content-type":"multipart/form-data"}});case 3:return r=e.sent,e.abrupt("return",r.data.data);case 7:e.prev=7,e.t0=e["catch"](0),(0,o.S3)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setNewUser",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.hi.post("/userexception/set-new-user",t,{headers:{"Content-type":"multipart/form-data"}});case 3:return r=e.sent,e.abrupt("return",r.data.data);case 7:e.prev=7,e.t0=e["catch"](0),(0,o.S3)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getExceptionById",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.hi.get("userexception/show/".concat(t));case 3:return r=e.sent,e.abrupt("return",r.data.data);case 7:e.prev=7,e.t0=e["catch"](0),(0,u.F)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"update",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.hi.patch("userexception/".concat(t),r,{headers:{"Content-type":"multipart/form-data"}});case 3:return a=e.sent,e.abrupt("return",a.data.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"updateStatus",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.hi.patch("userexception/update-status/".concat(t),{decision:r.decision,note:r.note,week_id:r.week_id});case 3:return a=e.sent,e.abrupt("return",a.data.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"updateExceptionTypeById",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.hi.post("/userexception/update",{id:t,type:r});case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"cancelException",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.hi.get("userexception/cancel/".concat(t));case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getAllUserExceptions",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.hi.get("userexception/user-exceptions/".concat(t));case 3:return r=e.sent,e.abrupt("return",r.data.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"exceptionsFilter",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.hi.get("userexception/exceptions-filter/".concat(t,"/").concat(r));case 3:return a=e.sent,e.abrupt("return",a.data.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t,r){return e.apply(this,arguments)}return t}()}]),e}();t.Z=new p},79940:function(e,t,r){r.d(t,{F:function(){return a}});r(70560);var n=r(1120);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";throw console.log("[ERROR] ".concat(t," =>"),e.response.data),404===e.response.data.statusCode?n.Z.push({name:"NotFound"}):403===e.response.data.statusCode&&n.Z.push({name:"NotAuthorized"}),e}},39577:function(e,t,r){r.r(t),r.d(t,{default:function(){return we}});var n=r(66252),a=r(49963),c=r(3577),i=r(55415),o=r(79885),u={class:"col-sm-12 mt-3 text-center"},s=(0,n._)("div",{class:"iq-card-header-toolbar d-flex align-items-center mx-auto"},[(0,n._)("h3",{class:"text-center mt-3 mb-3"},"طلب اجازة")],-1),p={class:"iq-card-body p-3"},l=(0,n._)("div",{class:"image-block text-center"},[(0,n._)("img",{src:i,class:"img-fluid rounded w-50",alt:"blog-img"})],-1),d={class:"d-flex align-items-center mt-3"},m={class:"form-group col-12"},v=(0,n._)("h4",null,"نوع الاجازة",-1),x=["disabled"],f=(0,n._)("option",{value:"0",selected:""},"اختر نوع الاجازة",-1),h=["value"],y={key:0,class:"d-block text-start mt-1",style:{color:"red"}},_={key:0,class:"form-group col-12"},w=(0,n._)("h4",null,"تاريخ انتهاء الاجازة",-1),k=["disabled"],b={key:0,class:"d-block text-start mt-1",style:{color:"red"}},g={key:1,class:"d-block text-start mt-1",style:{color:"red"}},Z={key:1,class:"form-group"},$=(0,n._)("h4",null,"المدة المطلوبة",-1),F={class:"form-group row"},q=["disabled"],D=(0,n._)("option",{value:"",selected:""},"اختر مدة الاجازة",-1),E=(0,n._)("option",{value:"أسبوع واحد"}," أسبوع واحد ",-1),C=(0,n._)("option",{value:"أسبوعين"}," أسبوعين ",-1),T=(0,n._)("option",{value:"ثلاثة أسابيع"}," ثلاثة أسابيع ",-1),S=[D,E,C,T],U={key:0,class:"d-block text-start mt-1",style:{color:"red"}},z={key:2,class:"form-group"},A=(0,n._)("h4",null," أرفق جدول الامتحانات ",-1),B={class:"form-check mt-2 w-100 text-start"},I=["checked"],R=(0,n._)("label",{class:"form-check-label",for:"no_exam_media"}," لا امتلك جدول ثابت للامتحانات ",-1),V={key:0,class:"d-block text-start mt-1",style:{color:"red"}},N={class:"form-group"},O=(0,n._)("h4",null,"السبب",-1),M={class:"form-group row"},H=["disabled"],L={class:"mb-0"},Y={key:0,class:"d-block text-start mt-1",style:{color:"red"}},K=(0,n._)("hr",null,null,-1),P={class:"form-group"},W=["disabled"],j={key:3,class:"col-sm-12 text-center"},G=(0,n._)("img",{src:o,alt:"loader",style:{height:"100px"}},null,-1),J=[G],Q={key:4,class:"text-center mt-3 mb-3"},X={class:"d-flex align-items-center mt-3 row"},ee={class:"d-inline-block w-100 text-center col-12"},te=(0,n._)("span",null,"عودة للملف الشخصي",-1),re=(0,n._)("span",{class:"align-middle material-symbols-outlined"}," keyboard_return ",-1),ne=[te,re];function ae(e,t,r,i,o,D){var E=(0,n.up)("iq-card");return(0,n.wg)(),(0,n.iD)("div",u,[(0,n.Wm)(E,{class:"iq-card"},{default:(0,n.w5)((function(){return[s,(0,n._)("div",p,[l,(0,n._)("div",d,[(0,n._)("form",{onSubmit:t[6]||(t[6]=(0,a.iM)((function(){return D.submitException&&D.submitException.apply(D,arguments)}),["prevent"])),class:"post-text ml-3 w-100 row"},[(0,n._)("div",m,[v,(0,n.wy)((0,n._)("select",{disabled:o.message,"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.v$.exceptionForm.type_id.$model=e}),class:"form-select mt-2","data-trigger":"",name:"type_id",id:"eceptionType"},[f,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.exceptionTypes,(function(e,t){return(0,n.wg)(),(0,n.iD)("option",{key:t,value:e.id},(0,c.zw)(e.type),9,h)})),128))],8,x),[[a.bM,i.v$.exceptionForm.type_id.$model]]),i.v$.exceptionForm.type_id.$error?((0,n.wg)(),(0,n.iD)("small",y," * يرجى اختيار نوع الاجازة")):(0,n.kq)("",!0)]),D.isAdmin&&5==i.v$.exceptionForm.type_id.$model?((0,n.wg)(),(0,n.iD)("div",_,[w,(0,n.wy)((0,n._)("input",{disabled:o.message,type:"date",class:"form-control mt-2",id:"exceptionEndDate","onUpdate:modelValue":t[1]||(t[1]=function(e){return i.v$.exceptionForm.end_date.$model=e}),name:"end_date"},null,8,k),[[a.nr,i.v$.exceptionForm.end_date.$model]]),i.v$.exceptionForm.end_date.$error?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[i.v$.exceptionForm.end_date.required.$invalid?((0,n.wg)(),(0,n.iD)("small",b," * يرجى اختيار تاريخ انتهاء الاجازة ")):(0,n.kq)("",!0),i.v$.exceptionForm.end_date.date_format.$invalid?((0,n.wg)(),(0,n.iD)("small",g," * يرجى اختيار تاريخ انتهاء الاجازة بتاريخ لا يقل عن اليوم ")):(0,n.kq)("",!0)],64)):(0,n.kq)("",!0)])):(0,n.kq)("",!0),3==o.exceptionForm.type_id||4==o.exceptionForm.type_id||5==o.exceptionForm.type_id?((0,n.wg)(),(0,n.iD)("div",Z,[$,(0,n._)("div",F,[(0,n.wy)((0,n._)("select",{disabled:o.message,"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.v$.exceptionForm.desired_duration.$model=e}),class:"form-select mt-2","data-trigger":"",name:"desired_duration",id:"desired_duration"},S,8,q),[[a.bM,i.v$.exceptionForm.desired_duration.$model]])]),i.v$.exceptionForm.desired_duration.$error?((0,n.wg)(),(0,n.iD)("small",U," * يرجى اختيار مدة الاجازة ")):(0,n.kq)("",!0)])):(0,n.kq)("",!0),3==o.exceptionForm.type_id||4==o.exceptionForm.type_id?((0,n.wg)(),(0,n.iD)("div",z,[A,(0,n._)("input",{class:"form-control mt-2",type:"file",name:"exam_media",id:"exam_media",ref:"exam_media",accept:"image/*",onChange:t[3]||(t[3]=function(){return D.uploadFile&&D.uploadFile.apply(D,arguments)})},null,544),(0,n._)("div",B,[(0,n._)("input",{type:"checkbox",checked:o.no_exam_media,class:"form-check-input",id:"no_exam_media",ref:"no_exam_media",onClick:t[4]||(t[4]=function(e){return o.no_exam_media=!o.no_exam_media})},null,8,I),R]),i.v$.exceptionForm.exam_media.$invalid?((0,n.wg)(),(0,n.iD)("small",V," * يرجى ارفاق جدول الامتحانات في حال وجود جدول ثابت ")):(0,n.kq)("",!0)])):(0,n.kq)("",!0),(0,n._)("div",N,[O,(0,n._)("div",M,[(0,n.wy)((0,n._)("textarea",{disabled:o.message,rows:"5",placeholder:"سبب طلب الاجازة",class:"rounded form-control mt-2 col-12",id:"exceptionReason","onUpdate:modelValue":t[5]||(t[5]=function(e){return i.v$.exceptionForm.reason.$model=e}),name:"reason"},"\r\n                ",8,H),[[a.nr,i.v$.exceptionForm.reason.$model]]),(0,n._)("p",L,[(0,n._)("span",{class:(0,c.C_)({"text-danger":i.v$.exceptionForm.reason.$error})},(0,c.zw)(i.v$.exceptionForm.reason.$model.length),3),(0,n.Uk)(" /250 ")])]),i.v$.exceptionForm.reason.$error?((0,n.wg)(),(0,n.iD)("small",Y," * قم بادخال سبب لا ينقص عن 10 حروف ولا يزيد عن 250 حرف ")):(0,n.kq)("",!0)]),K,(0,n._)("div",P,[(0,n._)("button",{type:"submit",disabled:o.message,class:"btn d-block btn-primary mt-3 mb-3 w-75 mx-auto"}," ارسال ",8,W)]),o.loader?((0,n.wg)(),(0,n.iD)("div",j,J)):(0,n.kq)("",!0),o.message?((0,n.wg)(),(0,n.iD)("h4",Q,(0,c.zw)(o.message),1)):(0,n.kq)("",!0)],32)]),(0,n._)("div",X,[(0,n._)("div",ee,[(0,n._)("a",{role:"button",onClick:t[7]||(t[7]=function(e){return D.back()}),class:"d-block mt-3 mb-3 w-75 mx-auto"},ne)])])])]})),_:1})])}var ce=r(50124),ie=r(48534),oe=(r(89730),r(70560),r(13087)),ue=r(62833),se=r(24150),pe=function(){function e(){(0,oe.Z)(this,e)}return(0,ue.Z)(e,[{key:"create",value:function(){var e=(0,ie.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,se.hi.post("/exception-type/create",{type:t});case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e["catch"](0),e.t0(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getAllExceptionTypes",value:function(){var e=(0,ie.Z)((0,ce.Z)().mark((function e(){var t;return(0,ce.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,se.hi.get("/exception-type");case 3:return t=e.sent,e.abrupt("return",t.data.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getExceptionTypeById",value:function(){var e=(0,ie.Z)((0,ce.Z)().mark((function e(t){var r;return(0,ce.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,se.hi.post("/exception-type/show",{id:t});case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateExceptionTypeById",value:function(){var e=(0,ie.Z)((0,ce.Z)().mark((function e(t,r){return(0,ce.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,se.hi.post("/exception-type/update",{id:t,type:r});case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"deleteExceptionTypeById",value:function(){var e=(0,ie.Z)((0,ce.Z)().mark((function e(t){return(0,ce.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,se.hi.post("/exception-type/delete",{id:t});case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),le=new pe,de=r(2985),me=r(5705),ve=r(10760),xe=r(49579),fe=function(e){return e>0},he={name:"New Exception",created:function(){var e=this;return(0,ie.Z)((0,ce.Z)().mark((function t(){return(0,ce.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,le.getAllExceptionTypes();case 2:e.exceptionTypes=t.sent;case 3:case"end":return t.stop()}}),t)})))()},components:{},setup:function(){return{v$:(0,me.ZP)()}},data:function(){return{loader:!1,exceptionForm:{reason:"",type_id:0,end_date:(new Date).toISOString().slice(0,10),desired_duration:"",exam_media:[]},no_exam_media:!0,exceptionTypes:null,message:null}},computed:{isAdmin:function(){return xe.Z.hasRole(this.$store.getters.getUser,"admin")}},validations:function(){return{exceptionForm:{reason:{required:ve.C1,minLength:(0,ve.Ei)(10),maxLength:(0,ve.BS)(250)},type_id:{required:ve.C1,maxValue:fe},desired_duration:{required:(0,ve.CF)((function(){return 3==this.exceptionForm.type_id||4==this.exceptionForm.type_id||5==this.exceptionForm.type_id}))},exam_media:{required:(0,ve.CF)((function(){return!this.no_exam_media}))},end_date:{required:ve.C1,date_format:function(e){var t=new Date,r=new Date(t);return r.setDate(r.getDate()-1),new Date(e)>r}}}}},methods:{submitException:function(){var e=this;return(0,ie.Z)((0,ce.Z)().mark((function t(){var r;return(0,ce.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.v$.$touch(),e.v$.exceptionForm.$invalid){t.next=18;break}return e.message="",e.loader=!0,t.prev=4,t.next=7,de.Z.create(e.exceptionForm);case 7:r=t.sent,e.message=r,e.v$.exceptionForm.$reset(),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](4),console.log("[Exception request error]",t.t0);case 15:return t.prev=15,e.loader=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[4,12,15,18]])})))()},uploadFile:function(){this.exceptionForm.exam_media=this.$refs.exam_media.files[0]},back:function(){this.$router.push({name:"user.profile",params:{user_id:this.$route.params.user_id}})}}},ye=r(83744);const _e=(0,ye.Z)(he,[["render",ae]]);var we=_e},55415:function(e,t,r){e.exports=r.p+"img/update-forms.03f6433b.png"}}]);
//# sourceMappingURL=9577-legacy.4af7a327.js.map