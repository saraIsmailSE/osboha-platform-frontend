"use strict";(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[761],{68497:function(e,t,r){r.r(t),r.d(t,{default:function(){return Ie}});r(59749),r(86544);var n=r(66252),o=r(3577),i=r(92021),s={key:0,class:"row"},a={class:"col-lg-12"},u={class:"d-flex align-items-center justify-content-between mb-3 flex-wrap"},l={class:"group-info d-flex align-items-center"},d=(0,n._)("div",{class:"me-3"},[(0,n._)("img",{class:"rounded-circle img-fluid avatar-100",src:i,alt:""})],-1),c={class:"info"},p={class:"mb-0"},m=(0,n._)("i",{class:"ri-lock-fill pe-2"},null,-1),f={class:"col-lg-4"},g={class:"card"},_=(0,n._)("div",{class:"card-header d-flex justify-content-between"},[(0,n._)("div",{class:"header-title"},[(0,n._)("h4",{class:"card-title"},"عن المجموعة")])],-1),h={class:"card-body"},v={class:"list-inline p-0 m-0"},w={class:"mb-3"},k={class:"mb-0"},b={class:"mb-3"},y={class:"d-flex"},x=(0,n._)("div",{class:"flex-shrink-0"},[(0,n._)("i",{class:"material-symbols-outlined"}," sticky_note_2 ")],-1),G={class:"flex-grow-1 ms-3"},I=(0,n._)("h4",null,"رسالة المجموعة المجموعة",-1),q={class:"mb-0",style:{"white-space":"pre-wrap",direction:"rtl"}},Z={class:"d-flex"},A=(0,n._)("div",{class:"flex-shrink-0"},[(0,n._)("i",{class:"material-symbols-outlined"}," supervisor_account ")],-1),C={class:"flex-grow-1 ms-3"},j={key:0},D={key:1},T={key:2},z={key:3},P={class:"mb-0"},U={class:"mb-3"},B={class:"d-flex"},O=(0,n._)("div",{class:"flex-shrink-0"},[(0,n._)("i",{class:"material-symbols-outlined"},"trending_up")],-1),W={key:0,class:"flex-grow-1 ms-3"},M={class:"mb-0"},L={class:"card"},R=(0,n._)("div",{class:"card-header d-flex justify-content-between"},[(0,n._)("div",{class:"header-title"},[(0,n._)("h4",{class:"card-title"},"الوصول السريع")])],-1),$={class:"card-body row d-flex justify-content-center"},S={class:"col-lg-8"},E={id:"post-modal-data",class:"card"},F={class:"card"},K={class:"card-body"};function N(e,t,r,i,N,H){var Y=(0,n.up)("listMembers"),J=(0,n.up)("router-link"),Q=(0,n.up)("AddPost"),V=(0,n.up)("LazyLoadedPosts");return N.group?((0,n.wg)(),(0,n.iD)("div",s,[(0,n._)("div",a,[(0,n._)("div",u,[(0,n._)("div",l,[d,(0,n._)("div",c,[(0,n._)("h4",null,(0,o.zw)(N.group.name),1),(0,n._)("p",p,[m,(0,n.Uk)((0,o.zw)(N.group_type[N.group.type.type])+" . "+(0,o.zw)(N.group.user_ambassador_count)+" سفير ",1)])])]),(0,n.Wm)(Y,{members:N.group.users,authInGroup:N.authInGroup,groupType:N.group_type[N.group.type.type]},null,8,["members","authInGroup","groupType"])])]),(0,n._)("div",f,[(0,n._)("div",g,[_,(0,n._)("div",h,[(0,n._)("ul",v,[(0,n._)("li",w,[(0,n._)("h3",k,(0,o.zw)(N.group.name),1)]),(0,n._)("li",b,[(0,n._)("div",y,[x,(0,n._)("div",G,[I,(0,n._)("p",q,(0,o.zw)(N.group.description),1)])])]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(H.groupAdministrators,(function(e){return(0,n.wg)(),(0,n.iD)("li",{class:"mb-3",key:e.id},[(0,n._)("div",Z,[A,(0,n._)("div",C,["leader"==e.pivot.user_type?((0,n.wg)(),(0,n.iD)("h4",j," قائد المجموعة ")):(0,n.kq)("",!0),"supervisor"==e.pivot.user_type?((0,n.wg)(),(0,n.iD)("h4",D," مراقب المجموعة ")):(0,n.kq)("",!0),"advisor"==e.pivot.user_type?((0,n.wg)(),(0,n.iD)("h4",T," موجه المجموعة ")):(0,n.kq)("",!0),"consultant"==e.pivot.user_type?((0,n.wg)(),(0,n.iD)("h4",z," مستشار المجموعة ")):(0,n.kq)("",!0),(0,n._)("p",P,(0,o.zw)(e.name),1)])])])})),128)),(0,n._)("li",U,[(0,n._)("div",B,[O,N.week_avg?((0,n.wg)(),(0,n.iD)("div",W,[(0,n._)("h4",null,(0,o.zw)(N.week_avg),1),(0,n._)("p",M,"معدل الأسبوع "+(0,o.zw)(N.week.title),1)])):(0,n.kq)("",!0)])])])])]),(0,n._)("div",L,[R,(0,n._)("div",$,[(0,n.Wm)(J,{to:{name:"group.group-statistics",params:{group_id:N.group_id}},class:"btn btn-primary d-block mt-3 col-5 me-1"},{default:(0,n.w5)((function(){return[(0,n.Uk)("احصائيات المجموعة ")]})),_:1},8,["to"]),(0,n.Wm)(J,{to:{name:"group.group-books",params:{group_id:N.group_id}},class:"btn btn-primary d-block mt-3 col-5 me-1"},{default:(0,n.w5)((function(){return[(0,n.Uk)("كتب يقرؤها الأعضاء ")]})),_:1},8,["to"]),N.authInGroup&&"ambassador"!=N.authInGroup.user_type?((0,n.wg)(),(0,n.j4)(J,{key:0,to:{name:"group.ambassadors-reading",params:{group_id:N.group_id,week_id:N.week.id}},class:"btn btn-primary d-block mt-3 col-5 me-1"},{default:(0,n.w5)((function(){return[(0,n.Uk)(" انجاز الأسبوع الحالي ")]})),_:1},8,["to"])):(0,n.kq)("",!0),N.authInGroup&&"ambassador"!=N.authInGroup.user_type&&N.previous_week?((0,n.wg)(),(0,n.j4)(J,{key:1,to:{name:"group.ambassadors-reading",params:{group_id:N.group_id,week_id:N.previous_week.id}},class:"btn btn-primary d-block mt-3 col-5 me-1"},{default:(0,n.w5)((function(){return[(0,n.Uk)(" انجاز الأسبوع السابق ")]})),_:1},8,["to"])):(0,n.kq)("",!0),N.authInGroup&&"ambassador"!=N.authInGroup.user_type?((0,n.wg)(),(0,n.j4)(J,{key:2,to:{name:"group.group-exceptions",params:{group_id:N.group_id}},class:"btn btn-primary d-block mt-3 col-5 me-1"},{default:(0,n.w5)((function(){return[(0,n.Uk)("الاجازات ")]})),_:1},8,["to"])):(0,n.kq)("",!0),N.authInGroup&&"ambassador"!=N.authInGroup.user_type&&"followup"==N.group.type.type?((0,n.wg)(),(0,n.j4)(J,{key:3,to:{name:"group.auditMarks",params:{group_id:N.group_id}},class:"btn btn-primary d-block mt-3 col-5 me-1"},{default:(0,n.w5)((function(){return[(0,n.Uk)(" تدقيق العلامات ")]})),_:1},8,["to"])):(0,n.kq)("",!0),N.authInGroup&&"ambassador"!=N.authInGroup.user_type&&"supervising"==N.group.type.type&&H.supervisorOfTheGroup?((0,n.wg)(),(0,n.j4)(J,{key:4,to:{name:"statistics.supervisors",params:{supervisor_id:H.supervisorOfTheGroup.id}},class:"btn btn-primary d-block mt-3 col-5 me-1"},{default:(0,n.w5)((function(){return[(0,n.Uk)(" احصائيات القادة ")]})),_:1},8,["to"])):(0,n.kq)("",!0),N.authInGroup&&"ambassador"!=N.authInGroup.user_type?((0,n.wg)(),(0,n.j4)(J,{key:5,to:{name:"osboha.pendingPosts",params:{timeline_id:N.group.timeline_id}},class:"btn btn-primary d-block mt-3 col-5 me-1"},{default:(0,n.w5)((function(){return[(0,n.Uk)(" المنشورات المعلقة ")]})),_:1},8,["to"])):(0,n.kq)("",!0)])])]),(0,n._)("div",S,[(0,n._)("div",E,[(0,n.Wm)(Q,{onAddPost:H.addPost,type:"normal",timeline_id:N.group.timeline_id},null,8,["onAddPost","timeline_id"])]),(0,n._)("div",F,[(0,n._)("div",K,[(0,n.Wm)(V,{timeline_id:N.group.timeline_id,ref:"lazyLoadedPostsRef"},null,8,["timeline_id"])])])])])):(0,n.kq)("",!0)}var H=r(50124),Y=r(48534),J=(r(97389),r(38077),r(60228),r(65137),r(70560),r(25728),r(89730),r.p+"img/more_users.58a2ee71.png"),Q={class:"group-member d-flex align-items-center mt-md-0 mt-3 w-100"},V={key:0,class:"iq-media-group me-3 col-6 d-flex align-items-center"},X=(0,n._)("img",{src:J,alt:"profile-img",class:"img-fluid avatar-40 rounded-circle",title:"عرض الكل"},null,-1),ee={key:1,class:"iq-media-group me-3 col-6"},te=(0,n._)("p",null,"لا يوجد أعضاء",-1),re=[te],ne={key:2,class:"d-flex align-items-center mt-3 col-6"},oe=(0,n._)("span",{class:"align-middle material-symbols-outlined"}," settings ",-1),ie=(0,n._)("span",null,"اعدادت المجموعة",-1),se=[oe,ie],ae=(0,n._)("span",{class:"material-symbols-outlined me-2 md-18"}," person_add ",-1),ue=(0,n._)("span",{class:"material-symbols-outlined me-2 md-18"}," edit ",-1),le=(0,n._)("span",{class:"material-symbols-outlined me-2 md-18"}," edit ",-1),de=(0,n._)("span",{class:"material-symbols-outlined me-2 md-18"}," delete ",-1);function ce(e,t,r,i,s,a){var u=(0,n.up)("router-link"),l=(0,n.up)("BaseAvatar"),d=(0,n.Q2)("click-outside");return(0,n.wg)(),(0,n.iD)("div",Q,[r.members.length>0?((0,n.wg)(),(0,n.iD)("div",V,[(0,n.Wm)(u,{class:"iq-media",to:{name:"group.group-members",params:{group_id:s.group_id}}},{default:(0,n.w5)((function(){return[X]})),_:1},8,["to"]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.members.slice(0,5),(function(e){return(0,n.wg)(),(0,n.j4)(u,{class:"iq-media",key:e.id,to:{name:"user.profile",params:{user_id:e.id}}},{default:(0,n.w5)((function(){return[(0,n.Wm)(l,{profileImg:e.user_profile.profile_picture,profile_id:e.user_profile.id,title:e.name,gender:e.gender,avatarClass:"rounded-circle avatar-40 img-fluid"},null,8,["profileImg","profile_id","title","gender"])]})),_:2},1032,["to"])})),128))])):((0,n.wg)(),(0,n.iD)("div",ee,re)),r.authInGroup&&"ambassador"!=r.authInGroup.user_type||a.isAdmin?(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",ne,[(0,n._)("div",{class:"d-inline-block w-100 text-center",onClick:t[0]||(t[0]=function(e){return s.show=!s.show}),role:"button"},se),(0,n._)("div",{class:(0,o.C_)("dropdown-menu dropdown-menu-right ".concat(s.show?"show":"")),"aria-labelledby":"dropdownMenuButton",style:{}},[(0,n.Wm)(u,{class:"dropdown-item d-flex align-items-center",to:{name:"group.addMemeber",params:{group_id:s.group_id}}},{default:(0,n.w5)((function(){return[ae,(0,n.Uk)(" اضافه عضو ")]})),_:1},8,["to"]),a.advisorAndAbove?((0,n.wg)(),(0,n.j4)(u,{key:0,class:"dropdown-item d-flex align-items-center",to:{name:"group.update",params:{group_id:s.group_id}}},{default:(0,n.w5)((function(){return[ue,(0,n.Uk)(" تعديل ")]})),_:1},8,["to"])):(0,n.kq)("",!0),"فريق متابعة"==r.groupType&&a.advisorAndAbove?((0,n.wg)(),(0,n.j4)(u,{key:1,class:"dropdown-item d-flex align-items-center",to:{name:"control.leadersSwap",params:{group_id:s.group_id}}},{default:(0,n.w5)((function(){return[le,(0,n.Uk)(" تبديل القائد ")]})),_:1},8,["to"])):(0,n.kq)("",!0),a.isAdmin||a.isConsultant?((0,n.wg)(),(0,n.iD)("a",{key:2,role:"button",class:"dropdown-item d-flex align-items-center",onClick:t[1]||(t[1]=function(e){return a.deleteGroup(s.group_id)})},[de,(0,n.Uk)(" حذف ")])):(0,n.kq)("",!0)],2)])),[[d,a.onClickOutside]]):(0,n.kq)("",!0)])}var pe=r(22658),me=r(20425),fe=r.n(me),ge=r(31025),_e=r(49579),he={name:"card",directives:{clickOutside:fe().directive},props:{members:{type:[Object],required:!0},authInGroup:{type:[Object],required:!0},groupType:{type:[String],required:!0}},data:function(){return{show:!1,group_id:this.$route.params.group_id}},methods:{onClickOutside:function(){this.show=!1},deleteGroup:function(e){var t=this;return(0,Y.Z)((0,H.Z)().mark((function r(){var n;return(0,H.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=t.$swal.mixin({customClass:{confirmButton:"btn btn-primary btn-lg",cancelButton:"btn btn-outline-primary btn-lg ms-2"},buttonsStyling:!1}),n.fire({title:"هل أنت متأكد؟",text:"لا يمكنك التراجع عن هذا الاجراء",icon:"warning",showCancelButton:!0,confirmButtonText:"نعم، قم بالحذف",cancelButtonText:"تراجع  ",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}).then(function(){var r=(0,Y.Z)((0,H.Z)().mark((function r(n){return(0,H.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!n.isConfirmed){r.next=4;break}return r.next=3,pe.Z.deleteById(e).then(function(){var e=(0,Y.Z)((0,H.Z)().mark((function e(r){return(0,H.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:ge.Z.toggleToast("تم الحذف","success"),t.$router.push({name:"osboha.groupsList"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ge.Z.toggleToast("حصل خطأ - لم يتم الحذف!","danger"),console.log(e)}));case 3:r.sent;case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 2:case"end":return r.stop()}}),r)})))()}},computed:{user:function(){return this.$store.getters.getUser},isAdmin:function(){return _e.Z.hasRole(this.user,"admin")},isConsultant:function(){return _e.Z.hasRole(this.user,"consultant")},advisorAndAbove:function(){return _e.Z.hasRoles(this.user,["admin","consultant","advisor"])}}},ve=r(83744);const we=(0,ve.Z)(he,[["render",ce]]);var ke=we,be=r(91627),ye=r(44907),xe={name:"Group-detail",components:{listMembers:ke,AddPost:be.Z,LazyLoadedPosts:ye.Z},created:function(){var e=this;return(0,Y.Z)((0,H.Z)().mark((function t(){var r;return(0,H.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pe.Z.getById(e.group_id);case 3:r=t.sent,e.group=r.info,e.week_avg=(Math.round(100*r.week_avg)/100).toFixed(2),e.week=r.week,e.previous_week=r.previous_week,e.authInGroup=r.authInGroup,console.log("🚀 ~ file: Group-detail.vue:191 ~ created ~ this.authInGroup:",e.supervisorOfTheGroup),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},data:function(){return{group:null,group_id:this.$route.params.group_id,week:null,previous_week:null,week_avg:0,authInGroup:null,group_type:{followup:"فريق متابعة",supervising:"فريق رقابة",advising:"فريق توجيه",consultation:"فريق الاستشارة",Administration:"الإدارة العليا"},reasons:[],roles:{admin:0,consultant:1,advisor:2,supervisor:3,leader:4,ambassador:5}}},computed:{groupAdministrators:function(){var e=this,t=this.group.group_administrators.filter((function(e){return"admin"!=e.pivot.user_type}));return t.sort((function(t,r){return e.roles[t.pivot.user_type]-e.roles[r.pivot.user_type]}))},supervisorOfTheGroup:function(){return this.searchByPivotType("supervisor")}},methods:{back:function(){this.$router.push({name:"group.group-detail",params:{group_id:this.group_id}})},addPost:function(e){this.$refs.lazyLoadedPostsRef.addNewPost(e)},searchByPivotType:function(e){return this.group.group_administrators.find((function(t){return t.pivot&&t.pivot.user_type===e}))}}};const Ge=(0,ve.Z)(xe,[["render",N]]);var Ie=Ge},92021:function(e,t,r){e.exports=r.p+"img/current_book.4d2ae03c.png"},50382:function(e,t,r){var n=r(9015),o=Math.floor,i=function(e,t){var r=e.length,u=o(r/2);return r<8?s(e,t):a(e,i(n(e,0,u),t),i(n(e,u),t),t)},s=function(e,t){var r,n,o=e.length,i=1;while(i<o){n=i,r=e[i];while(n&&t(e[n-1],r)>0)e[n]=e[--n];n!==i++&&(e[n]=r)}return e},a=function(e,t,r,n){var o=t.length,i=r.length,s=0,a=0;while(s<o||a<i)e[s+a]=s<o&&a<i?n(t[s],r[a])<=0?t[s++]:r[a++]:s<o?t[s++]:r[a++];return e};e.exports=i},97365:function(e,t,r){var n=r(30071),o=n.match(/firefox\/(\d+)/i);e.exports=!!o&&+o[1]},37298:function(e,t,r){var n=r(30071);e.exports=/MSIE|Trident/.test(n)},27922:function(e,t,r){var n=r(30071),o=n.match(/AppleWebKit\/(\d+)\./);e.exports=!!o&&+o[1]},90534:function(e,t,r){var n=r(68700),o=r(34327),i=r(74684),s=RangeError;e.exports=function(e){var t=o(i(this)),r="",a=n(e);if(a<0||a===1/0)throw new s("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(r+=t);return r}},65137:function(e,t,r){var n=r(79989),o=r(68844),i=r(10509),s=r(90690),a=r(6310),u=r(98494),l=r(34327),d=r(3689),c=r(50382),p=r(16834),m=r(97365),f=r(37298),g=r(3615),_=r(27922),h=[],v=o(h.sort),w=o(h.push),k=d((function(){h.sort(void 0)})),b=d((function(){h.sort(null)})),y=p("sort"),x=!d((function(){if(g)return g<70;if(!(m&&m>3)){if(f)return!0;if(_)return _<603;var e,t,r,n,o="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)h.push({k:t+n,v:r})}for(h.sort((function(e,t){return t.v-e.v})),n=0;n<h.length;n++)t=h[n].k.charAt(0),o.charAt(o.length-1)!==t&&(o+=t);return"DGBEFHACIJK"!==o}})),G=k||!b||!y||!x,I=function(e){return function(t,r){return void 0===r?-1:void 0===t?1:void 0!==e?+e(t,r)||0:l(t)>l(r)?1:-1}};n({target:"Array",proto:!0,forced:G},{sort:function(e){void 0!==e&&i(e);var t=s(this);if(x)return void 0===e?v(t):v(t,e);var r,n,o=[],l=a(t);for(n=0;n<l;n++)n in t&&w(o,t[n]);c(o,I(e)),r=a(o),n=0;while(n<r)t[n]=o[n++];while(n<l)u(t,n++);return t}})},97389:function(e,t,r){var n=r(79989),o=r(68844),i=r(68700),s=r(23648),a=r(90534),u=r(3689),l=RangeError,d=String,c=Math.floor,p=o(a),m=o("".slice),f=o(1..toFixed),g=function(e,t,r){return 0===t?r:t%2===1?g(e,t-1,r*e):g(e*e,t/2,r)},_=function(e){var t=0,r=e;while(r>=4096)t+=12,r/=4096;while(r>=2)t+=1,r/=2;return t},h=function(e,t,r){var n=-1,o=r;while(++n<6)o+=t*e[n],e[n]=o%1e7,o=c(o/1e7)},v=function(e,t){var r=6,n=0;while(--r>=0)n+=e[r],e[r]=c(n/t),n=n%t*1e7},w=function(e){var t=6,r="";while(--t>=0)if(""!==r||0===t||0!==e[t]){var n=d(e[t]);r=""===r?n:r+p("0",7-n.length)+n}return r},k=u((function(){return"0.000"!==f(8e-5,3)||"1"!==f(.9,0)||"1.25"!==f(1.255,2)||"1000000000000000128"!==f(0xde0b6b3a7640080,0)}))||!u((function(){f({})}));n({target:"Number",proto:!0,forced:k},{toFixed:function(e){var t,r,n,o,a=s(this),u=i(e),c=[0,0,0,0,0,0],f="",k="0";if(u<0||u>20)throw new l("Incorrect fraction digits");if(a!==a)return"NaN";if(a<=-1e21||a>=1e21)return d(a);if(a<0&&(f="-",a=-a),a>1e-21)if(t=_(a*g(2,69,1))-69,r=t<0?a*g(2,-t,1):a/g(2,t,1),r*=4503599627370496,t=52-t,t>0){h(c,0,r),n=u;while(n>=7)h(c,1e7,0),n-=7;h(c,g(10,n,1),0),n=t-1;while(n>=23)v(c,1<<23),n-=23;v(c,1<<n),h(c,1,1),v(c,2),k=w(c)}else h(c,0,r),h(c,1<<-t,0),k=w(c)+p("0",u);return u>0?(o=k.length,k=f+(o<=u?"0."+p("0",u-o)+k:m(k,0,o-u)+"."+m(k,o-u))):k=f+k,k}})}}]);
//# sourceMappingURL=761-legacy.785187d8.js.map