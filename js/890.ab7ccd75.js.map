{"version":3,"file":"js/890.ab7ccd75.js","mappings":"uJAIA,MAAMA,EACJ,YAAMC,CAAOC,GACX,IACE,MAAMC,QAAiBC,EAAAA,GAAIC,KAAM,SAASH,EAAM,CAC9CI,QAAS,CAAE,eAAgB,yBAE7B,OAAOH,EAASI,KAAKA,IACvB,CAAE,MAAOC,IACPC,EAAAA,EAAAA,IAAYD,EACd,CACF,CAEA,YAAME,CAAOC,GACX,IACE,MAAMC,QAAcR,EAAAA,GAAIS,IAAK,cAAeF,GAC5C,OAAOC,EAAML,KAAKA,IACpB,CAAE,MAAOC,IACPC,EAAAA,EAAAA,IAAYD,EACd,CACF,CAEA,aAAMM,CAAQC,GACZ,IACE,MAAMb,QAAaE,EAAAA,GAAIS,IAAK,UAASE,KACrC,OAAOb,EAAKK,IACd,CAAE,MAAOC,IACPQ,EAAAA,EAAAA,GAAkBR,EAAO,sBAC3B,CACF,CAEA,gBAAMS,CAAWF,GACf,IACE,aAAaX,EAAAA,GAAIc,OAAQ,UAASH,IACpC,CAAE,MAAOP,GACP,OAAOA,CACT,CACF,CAEA,oBAAMW,CAAeC,GACnB,IACE,MAAMR,QAAcR,EAAAA,GAAIS,IAAK,eAAcO,KAC3C,OAAOR,EAAML,IACf,CAAE,MAAOC,GACP,OAAOA,CACT,CACF,CAEA,qBAAMa,CAAgBC,EAAOX,GAC3B,IACE,MAAMC,QAAcR,EAAAA,GAAIS,IAAK,gBAAeS,UAAcX,KAC1D,OAAOC,EAAML,KAAKA,IACpB,CAAE,MAAOC,IACPC,EAAAA,EAAAA,IAAYD,EACd,CACF,CAEA,oBAAMe,CAAeC,EAAMb,GACzB,IACE,MAAMC,QAAcR,EAAAA,GAAIS,IAAK,oBAAmBF,UAAaa,KAC7D,OAAOZ,EAAML,KAAKA,IACpB,CAAE,MAAOC,IACPC,EAAAA,EAAAA,IAAYD,EACd,CACF,CAEA,wBAAMiB,CAAmBC,EAAUf,GACjC,IACE,MAAMC,QAAcR,EAAAA,GAAIS,IAAK,mBAAkBa,UAAiBf,KAChE,OAAOC,EAAML,KAAKA,IACpB,CAAE,MAAOC,IACPC,EAAAA,EAAAA,IAAYD,EACd,CACF,CAEA,uBAAMmB,CAAkBC,GACtB,IACE,MAAMhB,QAAcR,EAAAA,GAAIS,IAAK,kBAAiBe,KAC9C,OAAOhB,EAAML,IACf,CAAE,MAAOC,GACP,OAAOA,CACT,CACF,CAEA,yBAAMqB,GACJ,IACE,MAAMjB,QAAcR,EAAAA,GAAIS,IAAK,6BAC7B,OAAOD,EAAML,KAAKA,IACpB,CAAE,MAAOC,GAEP,OADAsB,QAAQC,IAAIvB,GACL,EACT,CACF,CAEA,0BAAMwB,GACJ,IACE,MAAMpB,QAAcR,EAAAA,GAAIS,IAAK,8BAC7B,OAAOD,EAAML,KAAKA,IACpB,CAAE,MAAOC,GAEP,OADAsB,QAAQC,IAAIvB,GACL,EACT,CACF,CAEA,mBAAMyB,GACJ,IACE,MAAM/B,QAAaE,EAAAA,GAAIS,IAAK,sBAC5B,OAAOX,EAAKK,KAAKA,IACnB,CAAE,MAAOC,GAEP,OADAsB,QAAQC,IAAIvB,GACL,EACT,CACF,CAEA,iBAAM0B,GACJ,IACE,MAAMhC,QAAaE,EAAAA,GAAIS,IAAK,iBAC5B,OAAOX,EAAKK,KAAKA,IACnB,CAAE,MAAOC,GAEP,OADAsB,QAAQC,IAAIvB,GACL,EACT,CACF,CAQA,mBAAM2B,CAAcC,GAClB,IACE,MAAMlC,QAAaE,EAAAA,GAAIS,IAAK,SAAQuB,KACpC,OAAOlC,EAAKK,KAAKA,IACnB,CAAE,MAAOC,GACP,OAAOA,CACT,CACF,CAQA,YAAM6B,CAAOnC,GACX,IACE,MAAMC,QAAiBC,EAAAA,GAAIC,KAAM,gBAAgBH,EAAM,CACrDI,QAAS,CAAE,eAAgB,yBAE7B,OAAOH,EAASI,KAAKA,IACvB,CAAE,MAAOC,IACPC,EAAAA,EAAAA,IAAYD,EACd,CACF,EAGF,QAAmBR,C,+EC9JZ,SAASgB,EAAkBR,EAAOG,EAAO,IAO9C,MANAmB,QAAQC,IAAK,WAAUpB,OAAWH,EAAML,SAASI,MACV,MAAnCC,EAAML,SAASI,KAAK+B,WACtBC,EAAAA,EAAOC,KAAK,CAAEhB,KAAM,aACwB,MAAnChB,EAAML,SAASI,KAAK+B,YAC7BC,EAAAA,EAAOC,KAAK,CAAEhB,KAAM,kBAEhBhB,CACR,C,gHCPaiC,MAAM,O,SACFA,MAAM,a,GACFA,MAAM,6D,GACFA,MAAM,a,GACFA,MAAM,6B,GAaNA,MAAM,gC,aAINA,MAAM,qC,GACHA,MAAM,uC,GAGLA,MAAM,0E,GACFA,MAAM,uC,GACPC,EAAAA,EAAAA,GAA+E,KAA5ED,MAAM,qDAAoD,kBAAc,G,GAI1EA,MAAM,2C,GACPC,EAAAA,EAAAA,GAEI,KAFDD,MAAM,qDAAoD,UAE7D,G,GAKHA,MAAM,e,GAKNA,MAAM,kB,GACFA,MAAM,iD,gFA/CvCE,EAAAA,EAAAA,IA8DO,cA5DHD,EAAAA,EAAAA,GA2DM,MA3DNE,EA2DM,CA1D2BC,EAAA3C,OAAI,WAAjCyC,EAAAA,EAAAA,IAyDM,MAzDNG,EAyDM,EAxDFJ,EAAAA,EAAAA,GAuDM,MAvDNK,EAuDM,EAtDFL,EAAAA,EAAAA,GAqDM,MArDNM,EAqDM,EApDFN,EAAAA,EAAAA,GAWM,MAXNO,EAWM,EAVFP,EAAAA,EAAAA,GAGO,QAHDQ,KAAK,SAAUC,QAAKC,EAAA,KAAAA,EAAA,GAAAC,GAAEC,EAAAC,SAASV,EAAA3C,KAAKsD,OACtCf,MAAM,0DAAyD,cAM1DgB,EAAAC,SAAWD,EAAAE,aAAeL,EAAAM,aAAU,WAH7CC,EAAAA,EAAAA,IAKcC,EAAA,C,MALDrB,MAAM,wDAAyDsB,GAAE,C,mCAA8GlB,EAAA3C,KAAKa,M,mBAGlJ,IAE/C,UAF+C,a,mCAKnD2B,EAAAA,EAAAA,GAGM,MAHNsB,EAGM,EAFFtB,EAAAA,EAAAA,GACqB,OADfuB,IAAKR,EAAAS,gBAA+B,QAAhBC,EAACtB,EAAA3C,KAAKkE,MAAMC,YAAI,IAAAF,EAAAA,EAAA,IAAS1B,MAAM,yBACrD6B,IAAI,Y,aAEZ5B,EAAAA,EAAAA,GAkCM,MAlCN6B,EAkCM,EAjCF7B,EAAAA,EAAAA,GAEK,KAFL8B,GAEKC,EAAAA,EAAAA,IADE5B,EAAA3C,KAAKsB,MAAI,IAEhBkB,EAAAA,EAAAA,GAaM,MAbNgC,EAaM,EAZFhC,EAAAA,EAAAA,GAIM,MAJNiC,EAIM,CAHFC,GAA+E,0BACvEH,EAAAA,EAAAA,IACJhB,EAAAoB,eAAa,MAErBnC,EAAAA,EAAAA,GAMM,MANNoC,EAMM,CALFC,GAEI,0BAEJN,EAAAA,EAAAA,IAAG5B,EAAA3C,KAAK8E,UAAQ,QAGxBtC,EAAAA,EAAAA,GAIM,MAJNuC,EAIM,mBAHCpC,EAAAqC,gBAAiB,IACpB,GAAyDzB,EAAA0B,SAAM,WAA/DxC,EAAAA,EAAAA,IAAoF,K,MAAjFF,MAAM,WAAgBU,QAAKC,EAAA,KAAAA,EAAA,OAAAgC,IAAE3B,EAAA4B,mBAAA5B,EAAA4B,qBAAAD,KAAiC,qBAAe,eACvB3B,EAAA6B,SAAM,WAA/D3C,EAAAA,EAAAA,IAA8E,K,MAA3EF,MAAM,WAAgBU,QAAKC,EAAA,KAAAA,EAAA,OAAAgC,IAAE3B,EAAA8B,mBAAA9B,EAAA8B,qBAAAH,KAAiC,eAAS,kBAE9E1C,EAAAA,EAAAA,GASM,MATN8C,EASM,EARF9C,EAAAA,EAAAA,GAOM,MAPN+C,EAOM,EANFC,EAAAA,EAAAA,IAKc5B,EAAA,CALAC,GAAE,C,yCAAoIlB,EAAA3C,KAAKa,KAGtJ0B,MAAM,gCAAiCkD,UAAY9C,EAAA3C,KAAK0F,gB,mBAAiB,IAE5E,UAF4E,sB,yGAkBhH,GACIpE,KAAM,cACN,aAAMqE,GAAU,IAAAC,EACZC,KAAK7F,WAAa8F,EAAAA,EAAY9D,cAC9B6D,KAAKE,cAAgBF,KAAK7F,KAAKgG,MAC/BH,KAAKb,eAAmC,QAAtBY,EAAIC,KAAKE,qBAAa,IAAAH,OAAA,EAAlBA,EAAoBK,MAAM,EAAG,IACvD,EACA5F,IAAAA,GACI,MAAO,CACHL,KAAM,KACN+F,cAAe,GACff,eAAgB,GAGxB,EAEAkB,QAAS,CACLf,iBAAAA,GACIU,KAAKb,eAAiBa,KAAKE,aAC/B,EACAV,iBAAAA,GAAoB,IAAAc,EAChBN,KAAKb,eAAmC,QAAtBmB,EAAIN,KAAKE,qBAAa,IAAAI,OAAA,EAAlBA,EAAoBF,MAAM,EAAG,IACvD,EACAjC,gBAAiB,SAAUG,GACvB,OAAOA,GAAciC,EAAQ,MACjC,GAGJC,SAAU,CACN1B,aAAAA,GAAgB,IAAA2B,EACZ,OAAOC,IAAgB,QAAVD,EAACT,KAAK7F,YAAI,IAAAsG,OAAA,EAATA,EAAWE,YAAYC,OAAO,aAChD,EACAxB,MAAAA,GAAS,IAAAyB,EAAAC,EACL,OAA0B,QAAnBD,EAAAb,KAAKb,sBAAc,IAAA0B,OAAA,EAAnBA,EAAqBE,SAA2B,QAAtBD,EAAId,KAAKE,qBAAa,IAAAY,OAAA,EAAlBA,EAAoBC,OAC7D,EACAxB,MAAAA,GAAS,IAAAyB,EAAAC,EAAAC,EACL,OACuB,QAAnBF,EAAAhB,KAAKb,sBAAc,IAAA6B,OAAA,EAAnBA,EAAqBD,UAA4B,QAAvBE,EAAKjB,KAAKE,qBAAa,IAAAe,OAAA,EAAlBA,EAAoBF,UACjC,QAAlBG,EAAAlB,KAAKE,qBAAa,IAAAgB,OAAA,EAAlBA,EAAoBH,QAAS,GAErC,EACAI,IAAAA,GACI,OAAOnB,KAAKoB,OAAOC,QAAQC,OAC/B,EACA1D,WAAAA,GACI,OAAO2D,EAAAA,EAAgBC,QAAQxB,KAAKmB,KAAM,oBAC9C,EACAxD,OAAAA,GACI,OAAO4D,EAAAA,EAAgBC,QAAQxB,KAAKmB,KAAM,QAC9C,I,WChHR,MAAMM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://Osboha180/./src/API/services/book.service.js","webpack://Osboha180/./src/utilities/errors.js","webpack://Osboha180/./src/views/Book/LatestBook.vue","webpack://Osboha180/./src/views/Book/LatestBook.vue?b479"],"sourcesContent":["import { api } from \"../Intercepter\";\nimport { handleError } from \"vue\";\nimport { customHandleError } from \"../../utilities/errors\";\n\nclass BookService {\n  async create(book) {\n    try {\n      const response = await api.post(`/books`, book, {\n        headers: { \"Content-type\": \"multipart/form-data\" },\n      });\n      return response.data.data;\n    } catch (error) {\n      handleError(error);\n    }\n  }\n\n  async getAll(page) {\n    try {\n      const books = await api.get(`books?page=` + page);\n      return books.data.data;\n    } catch (error) {\n      handleError(error);\n    }\n  }\n\n  async getById(id) {\n    try {\n      const book = await api.get(`/books/${id}`);\n      return book.data;\n    } catch (error) {\n      customHandleError(error, \"BookService.getById\");\n    }\n  }\n\n  async deleteById(id) {\n    try {\n      return await api.delete(`/books/${id}`);\n    } catch (error) {\n      return error;\n    }\n  }\n\n  async getBooksByType(typeId) {\n    try {\n      const books = await api.get(`/books/type/${typeId}`);\n      return books.data;\n    } catch (error) {\n      return error;\n    }\n  }\n\n  async getBooksByLevel(level, page) {\n    try {\n      const books = await api.get(`/books/level/${level}?page=${page}`);\n      return books.data.data;\n    } catch (error) {\n      handleError(error);\n    }\n  }\n\n  async getBooksByName(name, page) {\n    try {\n      const books = await api.get(`/books/name?page=${page}&name=${name}`);\n      return books.data.data;\n    } catch (error) {\n      handleError(error);\n    }\n  }\n\n  async getBooksByLanguage(language, page) {\n    try {\n      const books = await api.get(`/books/language/${language}?page=${page}`);\n      return books.data.data;\n    } catch (error) {\n      handleError(error);\n    }\n  }\n\n  async getBooksBySection(sectionId) {\n    try {\n      const books = await api.get(`/books/section/${sectionId}`);\n      return books.data;\n    } catch (error) {\n      return error;\n    }\n  }\n\n  async getRecentAddedBooks() {\n    try {\n      const books = await api.get(`/books/recent-added-books`);\n      return books.data.data;\n    } catch (error) {\n      console.log(error);\n      return \"\";\n    }\n  }\n\n  async getMostReadableBooks() {\n    try {\n      const books = await api.get(`/books/most-readable-books`);\n      return books.data.data;\n    } catch (error) {\n      console.log(error);\n      return \"\";\n    }\n  }\n\n  async getRandomBook() {\n    try {\n      const book = await api.get(`/books/random-book`);\n      return book.data.data;\n    } catch (error) {\n      console.log(error);\n      return \"\";\n    }\n  }\n\n  async latestBooks() {\n    try {\n      const book = await api.get(`/books/latest`);\n      return book.data.data;\n    } catch (error) {\n      console.log(error);\n      return \"\";\n    }\n  }\n  /**\n   * Find an existing book by its id and display its basic information.\n   *\n   * @param  book_id\n   * @return book info;\n   */\n\n  async showBasicInfo(book_id) {\n    try {\n      const book = await api.get(`books/${book_id}`);\n      return book.data.data;\n    } catch (error) {\n      return error;\n    }\n  }\n  /**\n   * update book.\n   *\n   * @param   book data,book id\n   * @return book info;\n   */\n\n  async update(book) {\n    try {\n      const response = await api.post(`/books/update`, book, {\n        headers: { \"Content-type\": \"multipart/form-data\" },\n      });\n      return response.data.data;\n    } catch (error) {\n      handleError(error);\n    }\n  }\n}\n\nexport default new BookService();\n","import router from \"../router\";\n\nexport function customHandleError(error, page = \"\") {\n  console.log(`[ERROR] ${page} =>`, error.response.data);\n  if (error.response.data.statusCode === 404) {\n    router.push({ name: \"NotFound\" });\n  } else if (error.response.data.statusCode === 403) {\n    router.push({ name: \"NotAuthorized\" });\n  }\n  throw error;\n}\n","<template>\r\n    <main>\r\n\r\n        <div class=\"row\">\r\n            <div class=\"col-lg-12\" v-if=\"book\">\r\n                <div class=\"card card-block card-stretch card-height blog blog-detail\">\r\n                    <div class=\"card-body\">\r\n                        <div class=\"position-absolute start-0\">\r\n                            <span role=\"button\" @click=\"download(book.link)\"\r\n                                class=\"material-symbols-outlined align-middle display-5 me-1s\">\r\n                                download\r\n                            </span>\r\n                            <router-link class=\"material-symbols-outlined align-middle display-5 me-3\" :to=\"{\r\n                                name: 'book.update',\r\n                                params: { book_id: book.id },\r\n                            }\" v-if=\"isAdmin || inBooksTeam || book_owner\">\r\n                                edit\r\n                            </router-link>\r\n                        </div>\r\n\r\n                        <div class=\"image-block text-center mt-3\">\r\n                            <img :src=\"resolve_img_url(book.media.path ?? '')\" class=\"img-fluid rounded w-25\"\r\n                                alt=\"blog-img\" />\r\n                        </div>\r\n                        <div class=\"blog-description mt-3 text-center\">\r\n                            <h2 class=\"mb-3 pb-3 border-bottom text-center\">\r\n                                {{ book.name }}\r\n                            </h2>\r\n                            <div class=\"blog-meta d-flex align-items-center mb-3 position-right-side flex-wrap\">\r\n                                <div class=\"date me-4 d-flex align-items-center\">\r\n                                    <i class=\"material-symbols-outlined pe-2 md-18 text-primary\">calendar_month</i>تاريخ\r\n                                    الاضافة {{\r\n                                        formattedDate }}\r\n                                </div>\r\n                                <div class=\"comments me-4 d-flex align-items-center\">\r\n                                    <i class=\"material-symbols-outlined pe-2 md-18 text-primary\">\r\n                                        book\r\n                                    </i>\r\n                                    عدد الصفحات:\r\n                                    {{ book.end_page }}\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"text-center\">\r\n                                {{ shortBriefText }}\r\n                                <a class=\"load-btn\" v-on:click=\"loadMoreBriefText\" v-if=\"isMore\">...قراءة المزيد</a>\r\n                                <a class=\"load-btn\" v-on:click=\"loadLessBriefText\" v-if=\"isLess\">قراءة أقل</a>\r\n                            </div>\r\n                            <div class=\"col-lg-12 mt-3\">\r\n                                <div class=\"card card-block card-stretch card-height blog\">\r\n                                    <router-link :to=\"{\r\n                                        name: 'book.book-details',\r\n                                        params: { book_id: book.id },\r\n                                    }\" class=\"btn btn-primary d-block w-100\" :disabled=\"!(book.allow_comments)\">\r\n                                        عرض الأطروحات\r\n                                    </router-link>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </main>\r\n</template>\r\n<script>\r\nimport bookService from \"@/API/services/book.service\";\r\nimport moment from \"moment\";\r\nimport UserInfoService from \"@/Services/userInfoService\";\r\n\r\nexport default {\r\n    name: \"Latest Book\",\r\n    async created() {\r\n        this.book = await bookService.latestBooks();\r\n        this.fullBriefText = this.book.brief;\r\n        this.shortBriefText = this.fullBriefText?.slice(0, 200);\r\n    },\r\n    data() {\r\n        return {\r\n            book: null,\r\n            fullBriefText: \"\",\r\n            shortBriefText: \"\",\r\n\r\n        };\r\n    },\r\n\r\n    methods: {\r\n        loadMoreBriefText() {\r\n            this.shortBriefText = this.fullBriefText;\r\n        },\r\n        loadLessBriefText() {\r\n            this.shortBriefText = this.fullBriefText?.slice(0, 200);\r\n        },\r\n        resolve_img_url: function (path) {\r\n            return path ? path : require(\"@/assets/images/main/200x200-book.png\");\r\n        },\r\n    },\r\n\r\n    computed: {\r\n        formattedDate() {\r\n            return moment(this.book?.created_at).format(\"YYYY-MM-DD\");\r\n        },\r\n        isMore() {\r\n            return this.shortBriefText?.length < this.fullBriefText?.length;\r\n        },\r\n        isLess() {\r\n            return (\r\n                this.shortBriefText?.length >= this.fullBriefText?.length &&\r\n                this.fullBriefText?.length > 200\r\n            );\r\n        },\r\n        user() {\r\n            return this.$store.getters.getUser;\r\n        },\r\n        inBooksTeam() {\r\n            return UserInfoService.hasRole(this.user, \"book_quality_team\");\r\n        },\r\n        isAdmin() {\r\n            return UserInfoService.hasRole(this.user, \"admin\");\r\n        },\r\n    }\r\n\r\n};\r\n</script>\r\n<style>\r\n.load-btn {\r\n    color: #216d2e;\r\n    font-weight: bold;\r\n    cursor: pointer;\r\n}\r\n</style>\r\n  ","import { render } from \"./LatestBook.vue?vue&type=template&id=36a4f127\"\nimport script from \"./LatestBook.vue?vue&type=script&lang=js\"\nexport * from \"./LatestBook.vue?vue&type=script&lang=js\"\n\nimport \"./LatestBook.vue?vue&type=style&index=0&id=36a4f127&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["BookService","create","book","response","api","post","headers","data","error","handleError","getAll","page","books","get","getById","id","customHandleError","deleteById","delete","getBooksByType","typeId","getBooksByLevel","level","getBooksByName","name","getBooksByLanguage","language","getBooksBySection","sectionId","getRecentAddedBooks","console","log","getMostReadableBooks","getRandomBook","latestBooks","showBasicInfo","book_id","update","statusCode","router","push","class","_createElementVNode","_createElementBlock","_hoisted_1","$data","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","role","onClick","_cache","$event","_ctx","download","link","$options","isAdmin","inBooksTeam","book_owner","_createBlock","_component_router_link","to","_hoisted_6","src","resolve_img_url","_$data$book$media$pat","media","path","alt","_hoisted_8","_hoisted_9","_toDisplayString","_hoisted_10","_hoisted_11","_hoisted_12","formattedDate","_hoisted_13","_hoisted_14","end_page","_hoisted_15","shortBriefText","isMore","args","loadMoreBriefText","isLess","loadLessBriefText","_hoisted_16","_hoisted_17","_createVNode","disabled","allow_comments","created","_this$fullBriefText","this","bookService","fullBriefText","brief","slice","methods","_this$fullBriefText2","require","computed","_this$book","moment","created_at","format","_this$shortBriefText","_this$fullBriefText3","length","_this$shortBriefText2","_this$fullBriefText4","_this$fullBriefText5","user","$store","getters","getUser","UserInfoService","hasRole","__exports__","render"],"sourceRoot":""}