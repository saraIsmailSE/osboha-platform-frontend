"use strict";(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[867],{21295:function(e,t,o){o.d(t,{Z:function(){return Z}});var s=o(66252),n=o(3577),r=o(49963),a={class:"row",ref:"commentsListRef"},i={key:0,class:"cols"},c={class:"text-center text-primary m-auto"},l={class:"ms-1"},d={key:1,class:"cols"},m={class:"text-center m-auto",style:{color:"red"}},u={class:"ms-1"},p={class:"card card-block card-stretch card-height blog"},g={class:"card-body"},f={key:2,class:"cols text-center"},h=["src"];function v(e,t,v,w,C,_){var b=(0,s.up)("font-awesome-icon"),y=(0,s.up)("Comment");return(0,s.wg)(),(0,s.iD)("div",a,[C.emptyMessage&&!C.comments.length?((0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("div",c,[(0,s.Wm)(b,{icon:["fas","".concat(v.post.allow_comments?"pen":"circle-exclamation")],size:"sm"},null,8,["icon"]),(0,s._)("span",l,(0,n.zw)(C.emptyMessage),1)])])):(0,s.kq)("",!0),C.errorMessage?((0,s.wg)(),(0,s.iD)("div",d,[(0,s._)("div",m,[(0,s.Wm)(b,{icon:["fas","circle-exclamation"],size:"sm"}),(0,s._)("span",u,(0,n.zw)(C.errorMessage),1)])])):(0,s.kq)("",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(C.comments,(function(e){return(0,s.wg)(),(0,s.iD)("div",{class:"cols",key:e.id},[(0,s._)("div",p,[(0,s._)("div",g,[(0,s.Wm)(y,{allowComment:v.post.allow_comments,comment:e,onAddComment:_.addComment,onEditComment:_.editComment,onReactToComment:_.reactToComment},null,8,["allowComment","comment","onAddComment","onEditComment","onReactToComment"])])])])})),128)),C.loading?((0,s.wg)(),(0,s.iD)("div",f,[(0,s._)("img",{src:o(79885),alt:"loader",style:{height:"100px"}},null,8,h)])):(0,s.kq)("",!0),!_.hasMoreComments||C.loading||C.emptyMessage||C.errorMessage?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("button",{key:3,class:"w-100 p-2 bold-600 text-primary border-0 bg-transparent my-2",onClick:t[0]||(t[0]=(0,r.iM)((function(){return _.loadComments&&_.loadComments.apply(_,arguments)}),["prevent"]))}," تحميل المزيد من التعليقات "))],512)}var w=o(50124),C=o(48534),_=(o(79288),o(34338),o(70560),o(62506),o(44106)),b=o(73210),y=o(31025),k={name:"LazyLoadedComments",components:{Comment:b.Z},provide:function(){return{deleteComment:this.deleteComment}},inject:{incrementCommentsCount:{default:function(){}},decrementCommentsCount:{default:function(){}}},props:{post:{type:Object,required:!0},userId:{type:Number,default:null},loadOnCreate:{type:Boolean,default:!1}},data:function(){return{comments:[],page:1,totalPages:1,loading:!1,emptyMessage:"",errorMessage:""}},computed:{hasMoreComments:function(){return this.page<=this.totalPages}},created:function(){this.page=1,this.totalPages=1,this.comments=[],this.emptyMessage="",this.errorMessage="",this.loadOnCreate&&this.loadComments()},methods:{loadComments:function(){var e=this;return(0,C.Z)((0,w.Z)().mark((function t(){var o,s;return(0,w.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.loading){t.next=2;break}return t.abrupt("return");case 2:return e.loading=!0,t.prev=3,t.next=6,_.Z.getPostComments(e.post.id,e.page,null!==(o=e.userId)&&void 0!==o?o:"");case 6:if(s=t.sent,200===s.statusCode){t.next=10;break}return y.Z.toggleToast(s.message,"error"),t.abrupt("return");case 10:s.data.comments?(e.comments=e.comments.concat(s.data.comments),e.totalPages=s.data.last_page,e.page++):e.emptyMessage=e.post.allow_comments?"قم بكتابة تعليقك الأول":"لا يوجد تعليقات",t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](3),y.Z.toggleToast("حدث خطأ أثناء تحميل التعليقات، حاول مرة أخرى","error");case 16:return t.prev=16,e.loading=!1,t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[3,13,16,19]])})))()},findComment:function(e,t){for(var o=0;o<e.length;o++){if(e[o].id===t)return e[o];if(e[o].replies.length>0){var s=this.findComment(e[o].replies,t);if(s)return s}}},addComment:function(e,t){var o=this;if(t){var s=this.findComment(this.comments,t);s.replies.push(e)}else this.comments.push(e),this.$nextTick((function(){var e=o.$refs.commentsListRef;e.scrollTop=e.scrollHeight}));this.incrementCommentsCount(this.post.id)},deleteComment:function(e){for(var t=0;t<this.comments.length;t++){if(this.comments[t].id===e)return this.comments.splice(t,1),void this.decrementCommentsCount(this.post.id);if(this.comments[t].replies.length>0)for(var o=0;o<this.comments[t].replies.length;o++)if(this.comments[t].replies[o].id===e)return this.comments[t].replies.splice(o,1),void this.decrementCommentsCount(this.post.id)}},editComment:function(e){var t=this.findComment(this.comments,e.id);t.body=e.body,t.media=e.media},reactToComment:function(e,t){var o=this.findComment(this.comments,e);t?(o.reactions_count++,o.reacted_by_user=!0):(o.reactions_count--,o.reacted_by_user=!1)},resetData:function(){this.page=1,this.totalPages=1,this.comments=[],this.emptyMessage="",this.errorMessage="",this.loadComments()}}},x=o(83744);const M=(0,x.Z)(k,[["render",v]]);var Z=M},20867:function(e,t,o){o.d(t,{Z:function(){return We}});var s=o(66252),n={class:"col-sm-12"},r={class:"card card-block card-stretch card-height"},a={class:"card-body"};function i(e,t,o,i,c,l){var d=(0,s.up)("PostHeader"),m=(0,s.up)("PostBody"),u=(0,s.up)("PostMedia"),p=(0,s.up)("SupportSection"),g=(0,s.up)("PostFooter"),f=(0,s.up)("CommentsModal");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",n,[(0,s._)("div",r,[(0,s._)("div",a,[(0,s.Wm)(d,{showPin:o.showPin},null,8,["showPin"]),(0,s.Wm)(m),(0,s.Wm)(u),(0,s.Wm)(p),(0,s.Wm)(g)])])]),l.focusComment?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(f,{key:0,ref:"commentModal"},null,512))],64)}o(69358);var c=o(34932),l=o(66107),d={class:"comment-area mt-3"},m={class:"d-flex justify-content-between align-items-center flex-wrap"},u={class:"like-block position-relative d-flex align-items-center"},p=(0,s._)("hr",null,null,-1);function g(e,t,o,n,r,a){var i=(0,s.up)("TotalLikes"),c=(0,s.up)("TotalComments"),l=(0,s.up)("TotalVotes"),g=(0,s.up)("ActionButtons");return(0,s.wg)(),(0,s.iD)("div",d,[(0,s._)("div",m,[(0,s._)("div",u,[(0,s.Wm)(i),(0,s.Wm)(c),(0,s.Wm)(l)])]),p,(0,s.Wm)(g)])}var f=o(3577),h=o(49963),v={class:"total-comment-block"},w={class:"dropdown-menu"},C={key:0,class:"dropdown-item text-center"},_=["src"],b={key:1,class:"dropdown-item p-0 m-0 ms-2 mb-2"};function y(e,t,n,r,a,i){var c=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",v,[(0,s._)("div",{class:(0,f.C_)({dropdown:i.post.comments_count>0})},[(0,s._)("span",{class:"dropdown-toggle","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",role:"button",onMouseover:t[0]||(t[0]=function(){return i.getUsers&&i.getUsers.apply(i,arguments)}),onClick:t[1]||(t[1]=(0,h.iM)((function(){return i.showCommentModel&&i.showCommentModel.apply(i,arguments)}),["prevent"]))},(0,f.zw)(i.commentsCount),33),(0,s._)("div",w,[a.loading?((0,s.wg)(),(0,s.iD)("div",C,[(0,s._)("img",{src:o(79885),alt:"loader",style:{height:"50px"}},null,8,_)])):(0,s.kq)("",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.users,(function(e){return(0,s.wg)(),(0,s.j4)(c,{key:e.id,class:"dropdown-item",to:{name:"user.profile",params:{user_id:e.id}}},{default:(0,s.w5)((function(){return[(0,s.Uk)((0,f.zw)(e.name),1)]})),_:2},1032,["to"])})),128)),i.moreUsersText?((0,s.wg)(),(0,s.iD)("p",b,(0,f.zw)(i.moreUsersText),1)):(0,s.kq)("",!0)])],2)])}var k=o(50124),x=o(48534),M=(o(34338),o(44106)),Z=o(31025),T={name:"TotalComments",inject:["post","showCommentModel"],data:function(){return{users:[],totalUsers:0,loading:!1}},computed:{commentsCount:function(){return 0==this.post.comments_count?"لا يوجد تعليقات":this.post.comments_count+" "+(this.post.comments_count<=10&&this.post.comments_count>2?"تعليقات":"تعليق")},moreUsersText:function(){var e=this.totalUsers-this.users.length,t=1===e?"آخر":"آخرين";return e>0?"و +".concat(e," ").concat(t):""}},methods:{getUsers:function(){var e=this;return(0,x.Z)((0,k.Z)().mark((function t(){var o;return(0,k.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.post.comments_count<=0||e.loading)){t.next=2;break}return t.abrupt("return");case 2:return e.loading=!0,t.prev=3,t.next=6,M.Z.getPostCommentsUsers(e.post.id);case 6:o=t.sent,200!==o.statusCode&&Z.Z.toggleToast("حدث خطأ ما, حاول مرة أخرى","error"),e.users=o.data.users,e.totalUsers=o.data.count,t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](3),Z.Z.toggleToast("حدث خطأ ما, حاول مرة أخرى","error");case 15:return t.prev=15,e.loading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[3,12,15,18]])})))()}}},U=o(83744);const P=(0,U.Z)(T,[["render",y]]);var D=P,q={class:"d-flex align-items-center"},R={class:"like-data"},z={class:"dropdown"},j={class:"text-primary","aria-haspopup":"true","aria-expanded":"false",role:"button"},S={class:"total-like-block ms-2 me-3"},W={class:"dropdown-menu"},L={key:0,class:"dropdown-item text-center"},O=["src"],$={key:1,class:"dropdown-item p-0 m-0 ms-2 mb-2"};function H(e,t,n,r,a,i){var c=(0,s.up)("font-awesome-icon"),l=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",q,[(0,s._)("div",R,[(0,s._)("div",z,[(0,s._)("span",j,[(0,s.Wm)(c,{icon:["fas","thumbs-up"],size:"lg"})])])]),(0,s._)("div",S,[(0,s._)("div",{class:(0,f.C_)({dropdown:i.post.reactions_count>0})},[(0,s._)("span",{class:"dropdown-toggle","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",onMouseover:t[0]||(t[0]=function(){return i.getUsers&&i.getUsers.apply(i,arguments)}),role:"button"},(0,f.zw)(i.post.reactions_count),33),(0,s._)("div",W,[a.loading?((0,s.wg)(),(0,s.iD)("div",L,[(0,s._)("img",{src:o(79885),alt:"loader",style:{height:"50px"}},null,8,O)])):(0,s.kq)("",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.users,(function(e){return(0,s.wg)(),(0,s.j4)(l,{key:e.id,class:"dropdown-item",to:{name:"user.profile",params:{user_id:e.id}}},{default:(0,s.w5)((function(){return[(0,s.Uk)((0,f.zw)(e.name),1)]})),_:2},1032,["to"])})),128)),i.moreUsersText?((0,s.wg)(),(0,s.iD)("p",$,(0,f.zw)(i.moreUsersText),1)):(0,s.kq)("",!0)])],2)])])}var I=o(80932),B={name:"TotalLikes",inject:["post"],data:function(){return{reactions:[],users:[],totalUsers:0,loading:!1}},computed:{moreUsersText:function(){var e=this.totalUsers-this.users.length,t=1===e?"آخر":"آخرين";return e>0?"و +".concat(e," ").concat(t):""}},methods:{getUsers:function(){var e=this;return(0,x.Z)((0,k.Z)().mark((function t(){var o,s;return(0,k.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.post.reactions_count<=0||e.loading)){t.next=2;break}return t.abrupt("return");case 2:return e.loading=!0,t.prev=3,t.next=6,I.Z.getPostReactionsUsers(e.post.id,null!==(o=e.$route.params.user_id)&&void 0!==o?o:"");case 6:s=t.sent,e.users=s.data.users,e.totalUsers=s.data.count,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](3),Z.Z.toggleToast("حدث خطأ ما, حاول مرة أخرى","error");case 14:return t.prev=14,e.loading=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[3,11,14,17]])})))()}}};const N=(0,U.Z)(B,[["render",H]]);var A=N,J=function(e){return(0,s.dD)("data-v-32c84048"),e=e(),(0,s.Cn)(),e},V={class:"d-flex justify-content-between align-items-center"},Y=["disabled"],K=J((function(){return(0,s._)("span",{class:"me-1 bold-600"}," إعجاب ",-1)})),F=J((function(){return(0,s._)("span",{class:"me-1 bold-600"}," تعليق ",-1)}));function E(e,t,o,n,r,a){var i=(0,s.up)("font-awesome-icon");return(0,s.wg)(),(0,s.iD)("div",V,[(0,s._)("button",{type:"button",class:(0,f.C_)(["btn flex-grow-1",a.post.reacted_by_user?"text-primary":"text-gray-600"]),"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"إعجاب",onClick:t[0]||(t[0]=(0,h.iM)((function(e){return a.reactOnPost(r.selectedReaction.id)}),["prevent"])),disabled:r.pendingRequest},[K,(0,s.Wm)(i,{icon:["".concat(a.post.reacted_by_user?"fas":"far"),"thumbs-up"],size:"xl"},null,8,["icon"])],10,Y),(0,s._)("button",{type:"button",class:"btn flex-grow-1 text-gray-600",title:"تعليق","data-bs-toggle":"tooltip","data-bs-placement":"bottom",onClick:t[1]||(t[1]=(0,h.iM)((function(){return a.showCommentModel&&a.showCommentModel.apply(a,arguments)}),["prevent"]))},[F,(0,s.Wm)(i,{icon:["far","comment"],size:"xl"})])])}var G={name:"ActionButtons",inject:{reactToPost:{default:function(){}},showCommentModel:{required:!0},post:{required:!0}},data:function(){return{reactions:[],selectedReaction:{id:1,title:"إعجاب",type:"like",text_color:"#278036"},pendingRequest:!1}},computed:{},created:function(){},methods:{selectReaction:function(e){this.selectedReaction=e},reactOnPost:function(e){var t=this;return(0,x.Z)((0,k.Z)().mark((function o(){var s;return(0,k.Z)().wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(!t.pendingRequest){o.next=2;break}return o.abrupt("return");case 2:return t.pendingRequest=!0,o.prev=3,o.next=6,I.Z.reactOnPost(t.post.id,e);case 6:if(s=o.sent,200===s.statusCode){o.next=10;break}return Z.Z.toggleToast("حدث خطأ ما, يرجى المحاولة لاحقاً","error"),o.abrupt("return");case 10:t.reactToPost(t.post.id,s.data),o.next=17;break;case 13:o.prev=13,o.t0=o["catch"](3),console.log("[post reaction error]",o.t0.response),Z.Z.toggleToast("حدث خطأ ما, يرجى المحاولة لاحقاً","error");case 17:return o.prev=17,t.pendingRequest=!1,o.finish(17);case 20:case"end":return o.stop()}}),o,null,[[3,13,17,20]])})))()}}};const Q=(0,U.Z)(G,[["render",E],["__scopeId","data-v-32c84048"]]);var X=Q,ee={key:0,class:"total-comment-block ms-3"},te={class:"dropdown-menu"},oe={key:0,class:"dropdown-item text-center"},se=["src"],ne={key:1,class:"dropdown-item p-0 m-0 ms-2 mb-2"};function re(e,t,n,r,a,i){var c=(0,s.up)("router-link");return i.post.pollOptions.length>0?((0,s.wg)(),(0,s.iD)("div",ee,[(0,s._)("div",{class:(0,f.C_)({dropdown:i.post.votes_count>0})},[(0,s._)("span",{class:"dropdown-toggle","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",onMouseover:t[0]||(t[0]=function(){return i.getUsers&&i.getUsers.apply(i,arguments)}),role:"button"},(0,f.zw)(i.votesCountText),33),(0,s._)("div",te,[a.loading?((0,s.wg)(),(0,s.iD)("div",oe,[(0,s._)("img",{src:o(79885),alt:"loader",style:{height:"50px"}},null,8,se)])):(0,s.kq)("",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.users,(function(e){return(0,s.wg)(),(0,s.j4)(c,{key:e.id,class:"dropdown-item",to:{name:"user.profile",params:{user_id:e.id}}},{default:(0,s.w5)((function(){return[(0,s.Uk)((0,f.zw)(e.name),1)]})),_:2},1032,["to"])})),128)),i.moreUsersText?((0,s.wg)(),(0,s.iD)("p",ne,(0,f.zw)(i.moreUsersText),1)):(0,s.kq)("",!0)])],2)])):(0,s.kq)("",!0)}var ae=o(12174),ie={name:"TotalVotes",inject:["post"],data:function(){return{users:[],totalUsers:0,loading:!1}},computed:{moreUsersText:function(){var e=this.totalUsers-this.users.length,t=1===e?"آخر":"آخرين";return e>0?"و +".concat(e," ").concat(t):""},votesCountText:function(){return 0==this.post.votes_count?"لا يوجد تصويتات":this.post.votes_count+" "+(this.post.votes_count<=10&&this.post.votes_count>2?"تصويتات":"تصويت")}},methods:{getUsers:function(){var e=this;return(0,x.Z)((0,k.Z)().mark((function t(){var o,s;return(0,k.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.post.votes_count<=0||e.loading)){t.next=2;break}return t.abrupt("return");case 2:return e.loading=!0,t.prev=3,t.next=6,ae.Z.getPostVotesUsers(e.post.id,null!==(o=e.$route.params.user_id)&&void 0!==o?o:"");case 6:s=t.sent,e.users=s.data.users,e.totalUsers=s.data.count,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](3),Z.Z.toggleToast("حدث خطأ ما, حاول مرة أخرى","error");case 14:return t.prev=14,e.loading=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[3,11,14,17]])})))()}}};const ce=(0,U.Z)(ie,[["render",re]]);var le=ce,de={name:"PostFooter",components:{TotalComments:D,TotalLikes:A,ActionButtons:X,TotalVotes:le}};const me=(0,U.Z)(de,[["render",g]]);var ue=me,pe=o(11035),ge={key:0,class:"support-checkbox mt-3"},fe={class:"d-flex justify-content-start align-items-center"},he=(0,s._)("label",{for:"support-checkbox",class:"form-check-label text-primary"},[(0,s._)("span",{class:"ms-1"}," أتعهد بأنني قرأت المنشور كاملاً ")],-1);function ve(e,t,o,n,r,a){return"support"===a.post.type.toLowerCase()?((0,s.wg)(),(0,s.iD)("div",ge,[(0,s._)("div",fe,[(0,s.wy)((0,s._)("input",{type:"checkbox",id:"support-checkbox",class:"form-check-input","onUpdate:modelValue":t[0]||(t[0]=function(e){return r.supported=e}),onChange:t[1]||(t[1]=function(){return a.pledgeReadingPost&&a.pledgeReadingPost.apply(a,arguments)}),style:{width:"18px",height:"18px",margin:"0"}},null,544),[[h.e8,r.supported]]),he])])):(0,s.kq)("",!0)}var we=o(82482),Ce=(o(48324),{name:"SupportSection",inject:{post:{required:!0}},data:function(){return{supported:!1}},created:function(){var e=JSON.parse(localStorage.getItem("pledges"));this.supported=!!e&&e[this.post.id]===this.$store.getters.getUser.id},methods:{pledgeReadingPost:function(e){var t=this.$store.getters.getUser.id,o=localStorage.getItem("pledges");e.target.checked?o?(o=JSON.parse(o),o[this.post.id]&&o[this.post.id]===t||(o[this.post.id]=t,localStorage.setItem("pledges",JSON.stringify(o)))):localStorage.setItem("pledges",JSON.stringify((0,we.Z)({},this.post.id,t))):o&&(o=JSON.parse(o),o[this.post.id]&&o[this.post.id]===t&&(delete o[this.post.id],localStorage.setItem("pledges",JSON.stringify(o))))}}});const _e=(0,U.Z)(Ce,[["render",ve]]);var be=_e,ye=(0,s._)("h4",null,"التعليقات",-1),ke={href:"javascript:void(0);",class:"lh-1","data-bs-dismiss":"modal",ref:"commentModalCloseBtn"},xe=(0,s._)("span",{class:"material-symbols-outlined"},"close",-1),Me=[xe],Ze={class:"row"};function Te(e,t,o,n,r,a){var i=(0,s.up)("model-header"),c=(0,s.up)("LazyLoadedComments"),l=(0,s.up)("model-body"),d=(0,s.up)("CreateComment"),m=(0,s.up)("model-footer"),u=(0,s.up)("modal");return(0,s.wg)(),(0,s.j4)(u,{ref:"commentModalRef",id:"commentModal-".concat(a.post.id),tabindex:"-1","aria-labelledby":"commentModalLabel-".concat(a.post.id),"aria-hidden":!0,dialogClass:"modal-lg modal-dialog-centered modal-dialog-scrollable",style:{height:"95%","padding-top":"9%"}},{default:(0,s.w5)((function(){return[(0,s.Wm)(i,null,{default:(0,s.w5)((function(){return[ye,(0,s._)("a",ke,Me,512)]})),_:1}),(0,s.Wm)(l,null,{default:(0,s.w5)((function(){return[(0,s._)("div",Ze,[(0,s.Wm)(c,{post:a.post,ref:"lazyLoadedCommentsRef"},null,8,["post"])])]})),_:1}),(0,s.Wm)(m,null,{default:(0,s.w5)((function(){return[a.post.allow_comments?((0,s.wg)(),(0,s.j4)(d,{key:0,type:"comment",class:"flex-grow-1",post_id:a.post.id,onAddComment:a.addComment},null,8,["post_id","onAddComment"])):(0,s.kq)("",!0)]})),_:1})]})),_:1},8,["id","aria-labelledby"])}var Ue=o(79909),Pe=o(19250),De=o(21295),qe={name:"CommentsModal",components:{CreateComment:Pe.Z,LazyLoadedComments:De.Z},inject:["post"],data:function(){return{commentModal:null}},watch:{$route:function(e,t){this.commentModal.hide()}},mounted:function(){this.commentModal=new Ue.u_(this.$refs.commentModalRef.$el)},methods:{showCommentModel:function(){this.$refs.lazyLoadedCommentsRef.resetData(),this.commentModal.show()},addComment:function(e,t){var o=this;this.$refs.lazyLoadedCommentsRef.addComment(e,t),t||this.$nextTick((function(){var e=o.$refs.commentModalRef.$el,t=e.querySelector(".modal-body");t.scrollTop=t.scrollHeight}))}}};const Re=(0,U.Z)(qe,[["render",Te]]);var ze=Re,je={name:"Post",components:{PostHeader:c.Z,PostBody:l.Z,CommentsModal:ze,PostMedia:pe.Z,PostFooter:ue,SupportSection:be},provide:function(){return{post:this.post,showCommentModel:this.showCommentModel}},inject:{focusComment:{default:function(){}}},props:{post:{type:Object,required:!0},showPin:{type:Boolean,default:!1}},methods:{resolve_img_url:function(e){var t=o(20398);return t("./"+e)},showCommentModel:function(){if("support"===this.post.type.toLowerCase()){var e=JSON.parse(localStorage.getItem("pledges")),t=!!e&&e[this.post.id]===this.$store.getters.getUser.id;if(!t)return void Z.Z.toggleToast("يجب أن تتعهد بأنك قرأت المنشور كاملاً","warning")}this.focusComment?this.focusComment():this.$refs.commentModal.showCommentModel()}}};const Se=(0,U.Z)(je,[["render",i]]);var We=Se}}]);
//# sourceMappingURL=867-legacy.50e741b3.js.map