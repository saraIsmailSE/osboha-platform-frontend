"use strict";(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[5136],{60351:function(e,r,n){n.d(r,{So:function(){return t},Wx:function(){return o},b5:function(){return u},gg:function(){return s},jx:function(){return a}});var t={ambassador:"سفير",leader:"قائد",supervisor:"مراقب",advisor:"موجه",consultant:"مستشار",admin:"ادارة",book_quality_team:"جودة الكتب"},a={arabic:"اللغة العربية",english:"اللغة الانجليزية"},o={normal:"منهج",ramadan:"رمضان",young:"يافعين",kids:"أطفال",tafseer:"تفسير",free:"كتاب حر"},s={January:"يناير",February:"فبراير",March:"مارس",April:"ابريل",May:"مايو",June:"يونيو",July:"يوليو",August:"أغسطس",September:"سبتمبر",October:"أكتوبر",November:"نوفمبر",December:"ديسمبر"},u={"01":"يناير","02":"فبراير","03":"مارس","04":"ابريل","05":"مايو","06":"يونيو","07":"يوليو","08":"أغسطس","09":"سبتمبر",10:"أكتوبر",11:"نوفمبر",12:"ديسمبر"}},65136:function(e,r,n){n.r(r),n.d(r,{default:function(){return J}});var t=n(66252),a=n(49963),o=n(3577),s=function(e){return(0,t.dD)("data-v-604fa57c"),e=e(),(0,t.Cn)(),e},u={class:"d-grid gap-3 d-grid-template-1fr-19",ref:"listContainer"},i={class:"mt-3 inputs mb-3"},l=s((function(){return(0,t._)("i",{class:"material-symbols-outlined"}," search ",-1)})),c={key:0},p=s((function(){return(0,t._)("span",{class:"material-symbols-outlined align-middle"}," info ",-1)}));function d(e,r,n,s,d,g){var f=(0,t.up)("card");return(0,t.wg)(),(0,t.iD)("div",u,[(0,t._)("div",i,[l,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",placeholder:" ... ابحث عن مجموعة","onUpdate:modelValue":r[0]||(r[0]=function(e){return d.searchModel=e}),onKeyup:r[1]||(r[1]=function(e){return g.loadGroups()})},null,544),[[a.nr,d.searchModel,void 0,{trim:!0}]])]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(d.groups,(function(e){return(0,t.wg)(),(0,t.j4)(f,{group:e,key:e.id},null,8,["group"])})),128)),d.emptyMessage?((0,t.wg)(),(0,t.iD)("div",c,[(0,t._)("h4",null,[(0,t.Uk)((0,o.zw)(d.emptyMessage)+" ",1),p])])):(0,t.kq)("",!0)],512)}var g=n(89584),f=n(50124),m=n(48534),b=(n(34338),n(90002)),h=n(21218),v={class:"d-grid gap-3 d-grid-template-1fr-19"},y={class:"card mb-0"},w=(0,t._)("div",{class:"top-bg-image"},[(0,t._)("img",{src:b,class:"img-fluid w-100",alt:"group-bg"})],-1),_={key:0,class:"card-body text-center"},k=(0,t._)("div",{class:"group-icon"},[(0,t._)("img",{src:h,alt:"profile-img",class:"rounded-circle img-fluid avatar-120"})],-1),M={class:"group-info pt-3 pb-3"},x={class:"group-details d-inline-block pb-3"},Z={class:"d-flex align-items-center justify-content-between list-inline m-0 p-0"},A={class:"pe-3 ps-3"},C=(0,t._)("p",{class:"mb-0"},"عدد الأعضاء",-1),S={class:"pe-3 ps-3"},R=(0,t._)("p",{class:"mb-0"},"دورك في المجموعة",-1),T={class:"rounded-pill badge bg-primary px-2"};function q(e,r,n,a,s,u){var i=(0,t.up)("router-link");return(0,t.wg)(),(0,t.iD)("div",v,[(0,t._)("div",y,[w,n.group.group?((0,t.wg)(),(0,t.iD)("div",_,[k,(0,t._)("div",M,[(0,t._)("h4",null,(0,o.zw)(n.group.group.name),1),(0,t._)("p",null,(0,o.zw)(s.group_type[n.group.group.type.type]),1)]),(0,t._)("div",x,[(0,t._)("ul",Z,[(0,t._)("li",A,[C,(0,t._)("h6",null,(0,o.zw)(n.group.group.users.length),1)]),(0,t._)("li",S,[R,(0,t._)("h6",T,(0,o.zw)(s.ARABIC_ROLES[n.group.user_type]),1)])])]),(0,t.Wm)(i,{class:"btn btn-primary d-block w-100",to:{name:"group.group-detail",params:{group_id:n.group.group.id}}},{default:(0,t.w5)((function(){return[(0,t.Uk)(" عرض ")]})),_:1},8,["to"])])):(0,t.kq)("",!0)])])}var O=n(60351),D={name:"GroupCard",props:{group:{type:[Object],required:!0}},data:function(){return{group_type:{followup:"فريق متابعة",supervising:"فريق رقابة",advising:"فريق توجيه",consultation:"فريق الاستشارة",Administration:"الإدارة العليا"},ARABIC_ROLES:O.So}}},G=n(83744);const L=(0,G.Z)(D,[["render",q]]);var j=L,z=n(22658),B=n(31025),E=n(9669),I=n.n(E),P={components:{card:j},name:"Group",mounted:function(){var e=this;return(0,m.Z)((0,f.Z)().mark((function r(){return(0,f.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.loadGroups(),window.addEventListener("scroll",e.handleScroll);case 2:case"end":return r.stop()}}),r)})))()},beforeUnmount:function(){window.removeEventListener("scroll",this.handleScroll),this.cancelToken.cancel()},data:function(){return{groups:[],searchModel:"",page:1,totalPages:1,loading:!1,pendingRequest:!1,hasMore:!0,emptyMessage:"",cancelToken:I().CancelToken.source()}},methods:{loadGroups:function(){var e=this;return(0,m.Z)((0,f.Z)().mark((function r(){var n,t,a;return(0,f.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e.pendingRequest){r.next=2;break}return r.abrupt("return");case 2:return""==e.searchModel&&0==e.groups.length&&(e.page=1),""!=e.searchModel&&(e.page=1,e.groups=[]),e.pendingRequest=!0,e.loading=!0,e.emptyMessage="",r.prev=7,r.next=10,z.Z.userGroups(e.searchModel,e.page,e.cancelToken);case 10:if(a=r.sent,200===a.statusCode){r.next=14;break}return B.Z.toggleToast("حدث خطأ أثناء تحميل المجموعات, حاول مرة أخرى","error"),r.abrupt("return");case 14:if(200!==a.statusCode||a.data){r.next=18;break}return e.emptyMessage="لا يوجد مجموعات",e.hasMore=!1,r.abrupt("return");case 18:e.groups=[].concat((0,g.Z)(e.groups),(0,g.Z)(a.data.groups.data)),e.totalPages=null!==(n=null===(t=a.data)||void 0===t?void 0:t.last_page)&&void 0!==n?n:1,e.page++,r.next=27;break;case 23:r.prev=23,r.t0=r["catch"](7),console.log(r.t0),B.Z.toggleToast("حدث خطأ أثناء تحميل المجموعات, حاول مرة أخرى","error");case 27:return r.prev=27,e.loading=!1,e.pendingRequest=!1,r.finish(27);case 31:case"end":return r.stop()}}),r,null,[[7,23,27,31]])})))()},isAtBottomOfPage:function(){var e=this.$refs.listContainer.getBoundingClientRect(),r=e.bottom,n=window.innerHeight;return r>=n},handleScroll:function(){this.hasMoreToLoad&&this.isAtBottomOfPage()&&this.loadGroups()}},computed:{hasMoreToLoad:function(){return this.page<=this.totalPages&&this.hasMore}}};const U=(0,G.Z)(P,[["render",d],["__scopeId","data-v-604fa57c"]]);var J=U},21218:function(e,r,n){e.exports=n.p+"img/200x200-book.5a0360f9.png"},90002:function(e,r,n){e.exports=n.p+"img/book-banner-2.d7cc109e.png"},89584:function(e,r,n){n.d(r,{Z:function(){return i}});var t=n(49227);function a(e){if(Array.isArray(e))return(0,t.Z)(e)}n(59749),n(86544),n(60228),n(84254),n(21694),n(76265),n(77049);function o(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var s=n(12780);n(21057);function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e){return a(e)||o(e)||(0,s.Z)(e)||u()}}}]);
//# sourceMappingURL=5136-legacy.3e82a3e3.js.map