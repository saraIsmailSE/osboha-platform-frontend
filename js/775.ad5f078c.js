"use strict";(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[775],{94918:function(e,t,r){var a=r(66252),s=r(79940),o=r(24150);class i{constructor(){this.prefix="user-group"}async usersByGroupId(e){try{const t=await o.hi.get(`${this.prefix}/users/${e}`);return t.data.data}catch(t){return t}}async AddMember(e){try{const t=await o.hi.post(`${this.prefix}/add-member`,e,{headers:{"Content-type":"multipart/form-data"}});return t.data.data}catch(t){(0,s.F)(t,"UserGroupService.AddMember")}}async delete(e){try{return await o.hi.delete(`${this.prefix}/delete/${e}`)}catch(t){(0,a.S3)(t)}}async withdrawnMember(e){const t=new FormData;t.append("user_group_id",e);try{return await o.hi.post(`${this.prefix}/withdrawn`,t,{headers:{"Content-type":"multipart/form-data"}})}catch(r){(0,a.S3)(r)}}}t.Z=new i},79940:function(e,t,r){r.d(t,{F:function(){return s}});r(70560);var a=r(1120);function s(e,t=""){throw console.log(`[ERROR] ${t} =>`,e.response.data),404===e.response.data.statusCode?a.Z.push({name:"NotFound"}):403===e.response.data.statusCode&&a.Z.push({name:"NotAuthorized"}),e}},68888:function(e,t,r){r.r(t),r.d(t,{default:function(){return B}});var a=r(66252),s=r(49963),o=r(3577),i=r.p+"img/add-user.df7b2fcd.png",l=r(79885);const d={class:"col-sm-12 mt-3"},n=(0,a._)("div",{class:"iq-card-header-toolbar d-flex text-center align-items-center mx-auto"},[(0,a._)("h1",{class:"text-center mt-3 mb-3"},"عضو جديد")],-1),c=(0,a._)("div",{class:"iq-card-body p-4"},[(0,a._)("div",{class:"image-block text-center"},[(0,a._)("img",{src:i,class:"img-fluid rounded w-75",alt:"add-user"})])],-1),m={class:"col-12 bg-white pt-2"},u={class:"sign-in-from"},p=(0,a._)("h1",{class:"mb-0"},"اضافة عضو",-1),h={class:"form-group"},f=(0,a._)("label",{for:"exampleInputEmail1"},"الايميل",-1),g={key:0,style:{color:"red"}},v={key:1,style:{color:"red"}},y={class:"form-group"},_=(0,a._)("option",{value:"0",selected:""},"اختر دور العضو",-1),w=["value"],$={key:0,style:{color:"red"}},b={key:0,class:"form-group text-center"},k={style:{color:"red"}},x={key:1,class:"col-sm-12 text-center"},q=(0,a._)("p",{class:"text-center"},"جاري الاضافة",-1),D=(0,a._)("img",{src:l,alt:"loader",style:{height:"100px"}},null,-1),C=[q,D],M={key:2,class:"d-inline-block w-100"},S=(0,a._)("button",{type:"submit",class:"btn btn-primary float-end"}," اضافة ",-1),Z=[S];function A(e,t,r,i,l,q){const D=(0,a.up)("iq-card");return(0,a.wg)(),(0,a.iD)("div",d,[(0,a.Wm)(D,{class:"iq-card"},{default:(0,a.w5)((()=>[n,c,(0,a._)("div",m,[(0,a._)("div",u,[p,(0,a._)("form",{class:"mt-2",onSubmit:t[2]||(t[2]=(0,s.iM)((e=>q.onSubmit()),["prevent"]))},[(0,a._)("div",h,[f,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.v$.form.email.$model=e),class:"form-control mb-0",id:"exampleInputEmail1",placeholder:"البريد الالكتروني العضو"},null,512),[[s.nr,i.v$.form.email.$model]]),i.v$.form.email.$error?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[i.v$.form.email.required.$invalid?((0,a.wg)(),(0,a.iD)("small",g,"البريد الالكتروني مطلوب")):(0,a.kq)("",!0),i.v$.form.email.email.$invalid?((0,a.wg)(),(0,a.iD)("small",v,"البريد الالكتروني غير صحيح")):(0,a.kq)("",!0)],64)):(0,a.kq)("",!0)]),(0,a._)("div",y,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.v$.form.role_id.$model=e),class:"form-select","data-trigger":"",name:"choices-single-default",id:"choices-single-default"},[_,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.roles,((e,t)=>((0,a.wg)(),(0,a.iD)("option",{key:t,value:e.id},(0,o.zw)(l.user_type[e.name]),9,w)))),128))],512),[[s.bM,i.v$.form.role_id.$model]]),i.v$.form.role_id.$error?((0,a.wg)(),(0,a.iD)("small",$," يرجى اختيار دور العضو في المجموعة ")):(0,a.kq)("",!0)]),l.message?((0,a.wg)(),(0,a.iD)("div",b,[(0,a._)("small",k,(0,o.zw)(l.message),1)])):(0,a.kq)("",!0),l.loader?((0,a.wg)(),(0,a.iD)("div",x,C)):((0,a.wg)(),(0,a.iD)("div",M,Z))],32)])])])),_:1})])}var F=r(5705),z=r(10760),E=r(94918),I=r(24150);const O=e=>e>0;var R={name:"AddBook",setup(){return{v$:(0,F.ZP)()}},async created(){const e=await I.hi.get("get-roles/1");this.roles=e.data.data},data(){return{loader:!1,user_type:{ambassador:"سفير",leader:"قائد",supervisor:"مراقب",advisor:"موجه",consultant:"مستشار",admin:"ادارة"},form:{email:"",role_id:0,group_id:this.$route.params.group_id},roles:[],message:""}},methods:{async onSubmit(){if(this.v$.$touch(),!this.v$.form.$invalid){this.loader=!0;try{this.message="";const e=await E.Z.AddMember(this.form);this.message=e,this.v$.form.$reset(),this.form={email:"",role_id:0,group_id:this.$route.params.group_id},setTimeout((()=>{this.message=""}),3e3)}catch(e){this.message="حدث خطأ",console.log(e)}finally{this.loader=!1}}}},validations(){return{form:{email:{required:z.C1,email:z.Do},role_id:{required:z.C1,maxValue:O}}}}},U=r(83744);const V=(0,U.Z)(R,[["render",A]]);var B=V}}]);
//# sourceMappingURL=775.ad5f078c.js.map